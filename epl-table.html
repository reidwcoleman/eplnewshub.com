<!DOCTYPE html>
<html lang="en-GB">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TVPLGM5QY9"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-TVPLGM5QY9');
    </script>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="Live Premier League table and standings for 2025/26 season. Track positions, points, goal difference, and form for all 20 teams.">
    <title>Premier League Table 2025/26 | Live Standings | EPL News Hub</title>
    <link rel="stylesheet" href="/styles.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6480210605786899" crossorigin="anonymous"></script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif:wght@400;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="icon" type="image/png" href="/eplnewshubnewlogo.png">

    <style>
        html, body {
            background: #ffffff;
            color: #121212;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            margin: 0;
            padding: 0;
        }

        .table-container {
            max-width: 1240px;
            margin: 0 auto;
            padding: 48px 24px 80px;
        }

        .table-header {
            margin-bottom: 48px;
            padding-bottom: 32px;
            border-bottom: 1px solid #dfdfdf;
        }

        .table-category {
            font-size: 11px;
            font-weight: 700;
            letter-spacing: 1px;
            text-transform: uppercase;
            color: #38003c;
            margin-bottom: 16px;
        }

        .table-title {
            font-family: 'Noto Serif', Georgia, serif;
            font-size: 56px;
            font-weight: 700;
            line-height: 1.1;
            color: #121212;
            margin: 0 0 24px 0;
            letter-spacing: -0.5px;
        }

        .table-intro {
            font-size: 18px;
            line-height: 1.7;
            color: #555;
            margin: 0;
            max-width: 800px;
        }

        .last-updated {
            font-size: 13px;
            color: #767676;
            margin-top: 16px;
            font-weight: 500;
        }

        .standings-section {
            margin-bottom: 56px;
        }

        .loading-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 80px 0;
            gap: 16px;
        }

        .loading-spinner {
            width: 48px;
            height: 48px;
            border: 4px solid #f0f0f0;
            border-top: 4px solid #121212;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-state p {
            font-size: 16px;
            color: #767676;
        }

        .standings-table {
            width: 100%;
            border-collapse: collapse;
            font-family: 'Inter', sans-serif;
            font-size: 16px;
            background: #ffffff;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        .standings-table thead {
            background: #fafafa;
            border-bottom: 3px solid #121212;
        }

        .standings-table th {
            padding: 16px 12px;
            text-align: left;
            font-weight: 700;
            font-size: 13px;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            color: #666;
        }

        .standings-table th:first-child {
            width: 60px;
            text-align: center;
        }

        .standings-table tbody tr {
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.15s ease;
        }

        .standings-table tbody tr:hover {
            background: #fafafa;
        }

        .standings-table td {
            padding: 18px 12px;
        }

        .standings-rank {
            text-align: center;
            font-weight: 700;
            color: #121212;
            font-size: 18px;
        }

        .standings-team {
            display: flex;
            align-items: center;
            gap: 16px;
            font-weight: 600;
            color: #121212;
            min-width: 200px;
        }

        .team-badge {
            width: 32px;
            height: 32px;
            object-fit: contain;
        }

        .standings-stat {
            text-align: center;
            color: #666;
            font-variant-numeric: tabular-nums;
            font-size: 15px;
        }

        .standings-points {
            text-align: center;
            font-weight: 700;
            color: #121212;
            font-size: 18px;
        }

        .form-indicator {
            display: flex;
            gap: 3px;
            justify-content: center;
        }

        .form-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .form-dot.win {
            background: #10b981;
        }

        .form-dot.draw {
            background: #f59e0b;
        }

        .form-dot.loss {
            background: #ef4444;
        }

        .champions-league {
            border-left: 4px solid #0066cc;
        }

        .europa-league {
            border-left: 4px solid #ff6600;
        }

        .relegation {
            border-left: 4px solid #dc2626;
        }

        .table-legend {
            display: flex;
            gap: 32px;
            margin-top: 24px;
            padding: 20px 24px;
            background: #fafafa;
            border-radius: 4px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 14px;
            color: #555;
        }

        .legend-color {
            width: 4px;
            height: 24px;
            border-radius: 2px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .table-container {
                padding: 32px 20px 60px;
            }

            .table-title {
                font-size: 40px;
            }

            .table-intro {
                font-size: 16px;
            }

            .standings-table {
                font-size: 14px;
            }

            .standings-table th,
            .standings-table td {
                padding: 12px 8px;
            }

            .standings-table th:first-child {
                width: 40px;
            }

            .team-badge {
                width: 24px;
                height: 24px;
            }

            .standings-team {
                gap: 10px;
                font-size: 14px;
                min-width: 140px;
            }

            .standings-rank {
                font-size: 16px;
            }

            .standings-points {
                font-size: 16px;
            }

            /* Hide some columns on mobile */
            .hide-mobile {
                display: none;
            }

            .table-legend {
                gap: 16px;
                padding: 16px;
            }

            .legend-item {
                font-size: 12px;
            }
        }

        @media (max-width: 480px) {
            .table-title {
                font-size: 32px;
            }

            .standings-table {
                font-size: 12px;
            }

            .standings-table th,
            .standings-table td {
                padding: 10px 6px;
            }
        }
    </style>
</head>
<body>
    <div class="header" include="/header.html"></div>

    <div class="table-container">
        <header class="table-header">
            <div class="table-category">Premier League 2025/26</div>
            <h1 class="table-title">League Table & Standings</h1>
            <p class="table-intro">Live standings for all 20 Premier League teams with positions, points, goal difference, and recent form. Updated automatically after every match.</p>
            <div class="last-updated" id="last-updated">Loading...</div>
        </header>

        <section class="standings-section">
            <div id="standings-container">
                <div class="loading-state">
                    <div class="loading-spinner"></div>
                    <p>Loading Premier League standings...</p>
                </div>
            </div>

            <div class="table-legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #0066cc;"></div>
                    <span>Champions League</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #ff6600;"></div>
                    <span>Europa League</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #dc2626;"></div>
                    <span>Relegation</span>
                </div>
            </div>
        </section>
            
            <!-- SEO Content Section -->
            <div style="margin-top: 40px; padding: 30px; background: #f9f9f9; border-radius: 8px;">
                <h2 style="font-family: Georgia, serif; color: #333; margin-bottom: 25px;">📊 Complete Guide to the Premier League Table</h2>
                
                <section style="margin-bottom: 35px;">
                    <h3 style="color: #333; font-size: 1.3rem; margin-bottom: 20px;">Understanding the Premier League Standings</h3>
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">The Premier League table is the heartbeat of English football, a dynamic leaderboard that tracks the fortunes of 20 elite clubs competing for glory, European qualification, and survival. Updated after every match, the standings tell compelling stories of triumph and struggle, providing fans with instant insight into their team's position and prospects throughout the grueling 38-game season.</p>
                    
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">Each team's position in the table is determined primarily by points accumulated through match results – three points for a victory, one for a draw, and none for a defeat. This straightforward system has been in place since the 1995-96 season, replacing the previous two-points-for-a-win format to encourage more attacking play. The change has proven successful, leading to more entertaining matches as teams push for maximum points rather than settling for draws.</p>
                    
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">When teams are level on points, goal difference becomes the primary tiebreaker – calculated by subtracting goals conceded from goals scored throughout the season. This crucial metric often determines final positions, European qualification spots, and even relegation, making every goal significant. The importance of goal difference has led to memorable final-day drama, with teams needing not just to win but to win by specific margins to achieve their objectives.</p>
                </section>

                <section style="margin-bottom: 35px;">
                    <h3 style="color: #333; font-size: 1.3rem; margin-bottom: 20px;">The Race for the Title</h3>
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">The Premier League title represents the pinnacle of English football achievement, with the champions earning automatic qualification to the UEFA Champions League group stage along with substantial prize money and global prestige. Since the league's inception in 1992, only seven different clubs have lifted the trophy, with Manchester United's 13 titles leading the way, though Manchester City's recent dominance has seen them close the gap with six titles in the last twelve seasons.</p>
                    
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">Title races can vary dramatically in their competitiveness. Some seasons witness runaway victories, like Manchester City's 100-point campaign in 2017-18 or Liverpool's 99-point triumph in 2019-20. Other years produce nail-biting finishes decided on the final day, such as Manchester City's dramatic victories in 2011-12 and 2021-22, where goal difference and last-minute goals determined the champions. These contrasting scenarios keep fans engaged throughout the season, never knowing whether they're witnessing history in the making.</p>
                    
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">The psychological aspect of title races cannot be understated. Teams at the top face immense pressure, with every dropped point scrutinized and every victory expected. The ability to maintain consistency over 38 games while handling this pressure separates champions from contenders. Managers must balance squad rotation, tactical flexibility, and mental fortitude to navigate the challenges of a title campaign, including fixture congestion, injuries, and the weight of expectation.</p>
                </section>

                <section style="margin-bottom: 35px;">
                    <h3 style="color: #333; font-size: 1.3rem; margin-bottom: 20px;">European Qualification Positions</h3>
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">The battle for European qualification adds another layer of intrigue to the Premier League table. The top four teams secure Champions League places, with positions one through three entering directly into the group stage while fourth place must navigate a playoff round. This coveted top-four finish has become increasingly important financially, with Champions League participation worth tens of millions in revenue through prize money, broadcasting rights, and commercial opportunities.</p>
                    
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">Fifth place in the table earns direct entry to the Europa League group stage, while sixth place qualifies for the Europa Conference League. The FA Cup winners also secure Europa League qualification, potentially opening another European spot if they've already qualified through league position. These Europa competitions, while less prestigious than the Champions League, offer valuable European experience, additional revenue streams, and alternative routes to Champions League qualification through tournament victory.</p>
                    
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">The race for European places often extends deep into the season, with multiple teams harboring realistic ambitions. Traditional "Big Six" clubs – Manchester United, Manchester City, Liverpool, Chelsea, Arsenal, and Tottenham – typically dominate these positions, but ambitious challengers like Leicester City, West Ham United, and Newcastle United have recently disrupted this hierarchy. The competition for these spots has intensified as more clubs invest heavily in their squads, making European qualification increasingly challenging and unpredictable.</p>
                </section>

                <section style="margin-bottom: 35px;">
                    <h3 style="color: #333; font-size: 1.3rem; margin-bottom: 20px;">The Mid-Table Battle</h3>
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">While less glamorous than title races or relegation battles, the mid-table positions tell their own fascinating stories. Teams finishing between seventh and fourteenth often represent clubs in transition – either building towards European contention or recovering from near-relegation experiences. These positions can indicate progress or regression, influencing transfer strategies, managerial decisions, and long-term planning.</p>
                    
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">Mid-table security allows clubs to blood young players, experiment with tactics, and build foundations for future success without the immediate pressure of relegation or European qualification. Clubs like Brighton, Brentford, and Fulham have used mid-table finishes as platforms for sustainable growth, gradually improving their league positions through smart recruitment, tactical innovation, and infrastructure development. This patient approach often proves more successful than boom-and-bust cycles of heavy spending.</p>
                    
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">The financial implications of mid-table finishes are significant, with each position worth approximately £2-3 million in merit payments from the Premier League's broadcasting revenue distribution. Over several seasons, these incremental gains can fund infrastructure improvements, academy development, or key signings that elevate clubs to the next level. Smart management in mid-table can set the foundation for future European challenges or ensure long-term Premier League stability.</p>
                </section>

                <section style="margin-bottom: 35px;">
                    <h3 style="color: #333; font-size: 1.3rem; margin-bottom: 20px;">The Relegation Battle</h3>
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">The bottom three positions in the Premier League table carry the harshest consequence in English football – relegation to the Championship. This drop represents not just a sporting failure but a financial catastrophe, with clubs losing access to the Premier League's lucrative broadcasting revenues worth over £100 million annually. The stakes couldn't be higher, making the relegation battle one of the most compelling and emotionally charged aspects of any season.</p>
                    
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">Relegation battles often produce the season's most dramatic moments, with survival frequently decided on the final day through complex permutations involving multiple teams. The tension is palpable as clubs fight for every point, leading to defensive football, time-wasting tactics, and unprecedented pressure on players and managers. The psychological toll of a relegation fight can be immense, with form often correlating directly with confidence levels and mental resilience.</p>
                    
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">The financial implications of relegation extend far beyond lost broadcasting revenue. Clubs face massive wage bills with players on Premier League contracts, reduced commercial income, lower attendance figures, and difficulty attracting quality players. Parachute payments soften the blow temporarily, but many relegated clubs struggle to bounce back immediately, entering cycles of financial difficulty that can threaten their long-term viability. This reality makes every point precious for teams near the bottom, turning seemingly mundane fixtures into survival battles.</p>
                </section>

                <section style="margin-bottom: 35px;">
                    <h3 style="color: #333; font-size: 1.3rem; margin-bottom: 20px;">Historical Context and Records</h3>
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">The Premier League table has witnessed remarkable achievements and crushing disappointments throughout its history. Manchester City holds the record for most points in a season with 100 in 2017-18, while Derby County's 11 points in 2007-08 represents the lowest total ever recorded. These extremes highlight the competitive gulf that can exist within a single season, though the league's unpredictability means surprises are always possible.</p>
                    
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">Leicester City's miraculous title win in 2015-16 remains the most extraordinary story in Premier League history, with the 5000-1 outsiders defying all expectations to finish top of the table. This achievement proved that the established order could be challenged, inspiring smaller clubs to dream big and invest in smart recruitment and tactical innovation rather than accepting their traditional place in football's hierarchy.</p>
                    
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">Individual season records add context to current campaigns. The earliest title win came when Manchester United secured the championship with five games remaining in 2000-01, while the latest was Manchester City's final-day triumph in 2011-12. The biggest title-winning margin was Manchester City's 19 points in 2017-18, while the smallest was zero – Manchester City and Manchester United finishing level on points in 2011-12 with goal difference deciding the champions. These records provide benchmarks for evaluating current season performances.</p>
                </section>

                <section style="margin-bottom: 35px;">
                    <h3 style="color: #333; font-size: 1.3rem; margin-bottom: 20px;">Analyzing Table Trends</h3>
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">Understanding table trends requires looking beyond current positions to examine form, fixtures, and underlying statistics. A team's last six games often indicate current momentum better than overall position, while remaining fixture difficulty can predict whether positions are likely to improve or deteriorate. Advanced metrics like expected goals (xG) and expected points help identify teams over-performing or under-performing relative to their actual quality.</p>
                    
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">Home and away form splits provide crucial context for table analysis. Some teams excel at home but struggle on the road, while others are better suited to counter-attacking away from home. These patterns influence betting markets, Fantasy Premier League decisions, and tactical preparations. Understanding why teams perform differently in various contexts – crowd influence, pitch dimensions, travel fatigue – adds depth to table interpretation.</p>
                    
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">Seasonal patterns also affect table dynamics. The festive fixture period from December through January often sees dramatic position changes due to fixture congestion and squad depth becoming crucial. Spring months bring pressure as campaigns reach their climax, with team mentality and experience often determining final positions. Early season tables can be misleading as teams adapt to new signings and tactical systems, making patience important when assessing true quality levels.</p>
                </section>

                <section style="margin-bottom: 35px;">
                    <h3 style="color: #333; font-size: 1.3rem; margin-bottom: 20px;">Impact on Transfers and Management</h3>
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">League position directly influences transfer market activity, with table standing affecting both a club's attractiveness to potential signings and their financial capacity to compete for players. Champions League clubs can offer the prestige of elite European competition and higher wages, while relegation-threatened teams often overpay in desperate January attempts to secure survival. This creates distinct transfer market hierarchies aligned with table positions.</p>
                    
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">Managerial changes frequently correlate with table position, particularly for underperforming teams. The dreaded "vote of confidence" from club boards often precedes dismissals when results don't match expectations. However, the effectiveness of mid-season managerial changes remains debatable, with new manager bounces sometimes providing temporary improvement but rarely guaranteeing long-term success. The pressure to make changes intensifies as poor positions persist, creating cycles of instability.</p>
                    
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">Table position also impacts player development and squad harmony. Young players are more likely to receive opportunities at mid-table clubs without immediate pressure, while relegation battles often see managers rely on experienced players. Success breeds confidence and attracts better players, creating positive cycles, while poor positions can lead to dressing room unrest, transfer requests, and difficulty retaining key players. These dynamics make sustained success or failure self-reinforcing.</p>
                </section>

                <section style="margin-bottom: 35px;">
                    <h3 style="color: #333; font-size: 1.3rem; margin-bottom: 20px;">Financial Implications of Table Position</h3>
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">The Premier League's revenue distribution model makes every position valuable, with clubs receiving merit payments based on final table position. The champions earn approximately £44 million in merit payments alone, while even 20th place receives around £2.2 million. Combined with equal share payments and facility fees for televised matches, total Premier League distributions can exceed £150 million for successful clubs, making table position directly tied to financial health.</p>
                    
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">Commercial revenues also correlate with table success. Sponsors pay premiums for associations with successful clubs, while merchandise sales, matchday revenues, and global fanbase growth all benefit from higher table positions. The compound effect over multiple successful seasons can transform clubs' financial positions, enabling infrastructure investment, academy development, and sustained competitiveness. Conversely, relegation can trigger sponsorship clauses reducing commercial income precisely when clubs need it most.</p>
                    
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">The long-term financial planning of clubs increasingly depends on realistic table position projections. Wage structures often include performance bonuses tied to final position or European qualification, while transfer budgets are set based on expected revenues from anticipated table finishes. This creates risk when clubs gamble on achieving certain positions, potentially leading to financial difficulties if targets aren't met. Sustainable growth requires balancing ambition with financial prudence based on realistic table expectations.</p>
                </section>

                <section style="margin-bottom: 35px;">
                    <h3 style="color: #333; font-size: 1.3rem; margin-bottom: 20px;">Fan Engagement and Table Watching</h3>
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">For millions of fans worldwide, checking the Premier League table is a ritual, performed religiously after every match day. The emotional investment in table position goes beyond mere numbers – it represents hope, pride, and identity. Fans plan their weekends around fixtures that could affect their team's position, calculating permutations and scenarios that could improve their standing. This engagement drives television viewership, social media interaction, and the global growth of Premier League popularity.</p>
                    
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">Fantasy Premier League has added another dimension to table watching, with millions of players tracking not just team positions but individual player performances that affect their fantasy teams. This gamification has broadened interest beyond traditional fan loyalties, creating investment in multiple matches and table implications. The intersection of real and fantasy football has deepened engagement with the Premier League table, making every position and goal difference meaningful to diverse audiences.</p>
                    
                    <p style="color: #444; line-height: 1.7; margin-bottom: 15px;">Social media has transformed how fans interact with table positions, enabling instant reactions, memes, and debates about every change. Live table updates during matches create real-time drama as positions fluctuate with each goal. Post-match analysis focuses heavily on table implications, with pundits, journalists, and fans dissecting how results affect various races. This constant conversation maintains engagement throughout the season, making the table a living document of the campaign's narrative.</p>
                </section>
            </div>
    </div>

    <div class="footer" include="/footer.html"></div>
    <script src="/index.js"></script>

    <script>
    (function() {
        async function fetchStandings() {
            const container = document.getElementById('standings-container');
            const lastUpdated = document.getElementById('last-updated');

            try {
                const leagueId = '4328'; // Premier League
                const now = new Date();
                const currentYear = now.getFullYear();
                const currentMonth = now.getMonth();

                // Premier League season runs Aug-May
                const seasonStartYear = currentMonth >= 7 ? currentYear : currentYear - 1;
                const season = `${seasonStartYear}-${seasonStartYear + 1}`;

                // Try to fetch from table endpoint
                const response = await fetch(`https://www.thesportsdb.com/api/v1/json/3/lookuptable.php?l=${leagueId}&s=${season}`);

                if (!response.ok) throw new Error('API request failed');

                const data = await response.json();

                // If we don't have enough teams, calculate from match results
                let tableData = data.table || [];

                if (tableData.length < 20) {
                    console.log(`Only ${tableData.length} teams in table, calculating from matches...`);
                    tableData = await calculateStandingsFromMatches(leagueId, season);
                }

                if (!tableData || tableData.length === 0) {
                    container.innerHTML = '<div class="loading-state"><p>No standings available at the moment.</p></div>';
                    return;
                }

                // Update last updated time
                const updateDate = tableData[0].dateUpdated ? new Date(tableData[0].dateUpdated) : new Date();
                lastUpdated.textContent = `Last updated: ${updateDate.toLocaleDateString('en-GB', {
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                })}`;

                let html = '<table class="standings-table"><thead><tr>';
                html += '<th>Pos</th>';
                html += '<th>Team</th>';
                html += '<th>P</th>';
                html += '<th>W</th>';
                html += '<th>D</th>';
                html += '<th>L</th>';
                html += '<th class="hide-mobile">GF</th>';
                html += '<th class="hide-mobile">GA</th>';
                html += '<th>GD</th>';
                html += '<th>Pts</th>';
                html += '<th class="hide-mobile">Form</th>';
                html += '</tr></thead><tbody>';

                tableData.forEach((team, index) => {
                    const rank = parseInt(team.intRank || (index + 1));
                    let rowClass = '';

                    if (rank <= 4) {
                        rowClass = 'champions-league';
                    } else if (rank === 5) {
                        rowClass = 'europa-league';
                    } else if (rank >= 18) {
                        rowClass = 'relegation';
                    }

                    html += `<tr class="${rowClass}">`;
                    html += `<td class="standings-rank">${rank}</td>`;
                    html += `<td><div class="standings-team">`;
                    html += `<img src="${(team.strBadge || '').replace('/tiny', '/preview')}" alt="${team.strTeam}" class="team-badge" onerror="this.style.display='none'">`;
                    html += `<span>${team.strTeam}</span>`;
                    html += `</div></td>`;
                    html += `<td class="standings-stat">${team.intPlayed || 0}</td>`;
                    html += `<td class="standings-stat">${team.intWin || 0}</td>`;
                    html += `<td class="standings-stat">${team.intDraw || 0}</td>`;
                    html += `<td class="standings-stat">${team.intLoss || 0}</td>`;
                    html += `<td class="standings-stat hide-mobile">${team.intGoalsFor || 0}</td>`;
                    html += `<td class="standings-stat hide-mobile">${team.intGoalsAgainst || 0}</td>`;
                    html += `<td class="standings-stat">${(team.intGoalDifference || 0) > 0 ? '+' : ''}${team.intGoalDifference || 0}</td>`;
                    html += `<td class="standings-points">${team.intPoints || 0}</td>`;
                    html += `<td class="hide-mobile">${renderForm(team.strForm || '')}</td>`;
                    html += `</tr>`;
                });

                html += '</tbody></table>';
                container.innerHTML = html;

            } catch (error) {
                console.error('Error fetching standings:', error);
                container.innerHTML = '<div class="loading-state"><p>Unable to load standings at the moment. Please try again later.</p></div>';
            }
        }

        async function calculateStandingsFromMatches(leagueId, season) {
            try {
                const response = await fetch(`https://www.thesportsdb.com/api/v1/json/3/eventsseason.php?id=${leagueId}&s=${season}`);

                if (!response.ok) return [];

                const data = await response.json();
                const events = data.events || [];

                // Initialize standings object
                const standings = {};

                // Process all finished matches
                events.forEach(match => {
                    if (match.intHomeScore === null || match.intAwayScore === null) return;

                    const homeTeam = match.strHomeTeam;
                    const awayTeam = match.strAwayTeam;
                    const homeScore = parseInt(match.intHomeScore);
                    const awayScore = parseInt(match.intAwayScore);

                    // Initialize teams if needed
                    [homeTeam, awayTeam].forEach(team => {
                        if (!standings[team]) {
                            standings[team] = {
                                strTeam: team,
                                idTeam: match.strHomeTeam === team ? match.idHomeTeam : match.idAwayTeam,
                                strBadge: match.strHomeTeam === team ? match.strHomeTeamBadge : match.strAwayTeamBadge,
                                intPlayed: 0,
                                intWin: 0,
                                intDraw: 0,
                                intLoss: 0,
                                intGoalsFor: 0,
                                intGoalsAgainst: 0,
                                intGoalDifference: 0,
                                intPoints: 0,
                                results: []
                            };
                        }
                    });

                    // Update stats for home team
                    standings[homeTeam].intPlayed++;
                    standings[homeTeam].intGoalsFor += homeScore;
                    standings[homeTeam].intGoalsAgainst += awayScore;

                    // Update stats for away team
                    standings[awayTeam].intPlayed++;
                    standings[awayTeam].intGoalsFor += awayScore;
                    standings[awayTeam].intGoalsAgainst += homeScore;

                    // Determine result
                    if (homeScore > awayScore) {
                        standings[homeTeam].intWin++;
                        standings[homeTeam].intPoints += 3;
                        standings[homeTeam].results.push('W');
                        standings[awayTeam].intLoss++;
                        standings[awayTeam].results.push('L');
                    } else if (homeScore < awayScore) {
                        standings[awayTeam].intWin++;
                        standings[awayTeam].intPoints += 3;
                        standings[awayTeam].results.push('W');
                        standings[homeTeam].intLoss++;
                        standings[homeTeam].results.push('L');
                    } else {
                        standings[homeTeam].intDraw++;
                        standings[homeTeam].intPoints++;
                        standings[homeTeam].results.push('D');
                        standings[awayTeam].intDraw++;
                        standings[awayTeam].intPoints++;
                        standings[awayTeam].results.push('D');
                    }
                });

                // Calculate goal difference and format results
                const tableArray = Object.values(standings).map(team => {
                    team.intGoalDifference = team.intGoalsFor - team.intGoalsAgainst;
                    team.strForm = team.results.slice(-5).reverse().join('');
                    return team;
                });

                // Sort by points, then goal difference, then goals scored
                tableArray.sort((a, b) => {
                    if (b.intPoints !== a.intPoints) return b.intPoints - a.intPoints;
                    if (b.intGoalDifference !== a.intGoalDifference) return b.intGoalDifference - a.intGoalDifference;
                    return b.intGoalsFor - a.intGoalsFor;
                });

                // Add rank
                tableArray.forEach((team, index) => {
                    team.intRank = (index + 1).toString();
                    team.dateUpdated = new Date().toISOString();
                });

                return tableArray;

            } catch (error) {
                console.error('Error calculating standings:', error);
                return [];
            }
        }

        function renderForm(form) {
            if (!form) return '';

            const formArray = form.split('').slice(0, 5);
            let html = '<div class="form-indicator">';

            formArray.forEach(result => {
                let className = 'form-dot ';
                if (result === 'W') className += 'win';
                else if (result === 'D') className += 'draw';
                else if (result === 'L') className += 'loss';

                html += `<span class="${className}" title="${result === 'W' ? 'Win' : result === 'D' ? 'Draw' : 'Loss'}"></span>`;
            });

            html += '</div>';
            return html;
        }

        // Initial load
        fetchStandings();

        // Refresh every 5 minutes
        setInterval(fetchStandings, 300000);
    })();
    </script>
</body>
</html>
