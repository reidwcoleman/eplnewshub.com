<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TVPLGM5QY9"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-TVPLGM5QY9');
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Complete Premier League Fantasy Football hub with tips, team selection, captain picks, and expert FPL analysis from EPL News Hub.">
    <meta name="keywords" content="Premier League Fantasy, FPL, Fantasy Football, EPL Fantasy, FPL tips, captain picks, team selection, gameweek analysis">
    <title>Premier League Fantasy Football Hub | EPL News Hub</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="responsive.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6480210605786899" crossorigin="anonymous"></script>
    <link rel="apple-touch-icon" href="reidsnbest.webp">
    <link rel="icon" type="image/webp" href="reidsnbest.webp">
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        
        const firebaseConfig = {
            apiKey: "AIzaSyCyOey0l27yQP68oybpoodMVcvayhIHt2I",
            authDomain: "epl-news-hub-94c09.firebaseapp.com",
            projectId: "epl-news-hub-94c09",
            storageBucket: "epl-news-hub-94c09.firebasestorage.app",
            messagingSenderId: "674703933278",
            appId: "1:674703933278:web:90c6dd4aa9f1ace73099cf",
            measurementId: "G-ECM6BCQCS8"
        };
        
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        
        window.auth = auth;
        window.onAuthStateChanged = onAuthStateChanged;
    </script>
    <style>
        .fpl-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .fpl-header {
            background: linear-gradient(135deg, #37003c, #00ff87);
            color: white;
            padding: 40px 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }
        
        .fpl-header::before {
            content: '‚öΩ';
            position: absolute;
            font-size: 200px;
            opacity: 0.1;
            top: -50px;
            right: -50px;
            transform: rotate(15deg);
        }
        
        .fpl-header h1 {
            font-family: Georgia, serif;
            font-size: 2.5rem;
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
        }
        
        .fpl-header p {
            font-size: 1.2rem;
            position: relative;
            z-index: 2;
        }
        
        .fpl-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .sidebar-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .fpl-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12), 0 4px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(55,0,60,0.1);
            border-left: 5px solid #37003c;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .fpl-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(55,0,60,0.05), transparent);
            border-radius: 0 0 0 100px;
        }
        
        .fpl-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15), 0 6px 20px rgba(0, 0, 0, 0.1);
        }
        
        .fpl-card h2 {
            font-family: Georgia, serif;
            color: #37003c;
            margin-bottom: 25px;
            font-size: 1.5rem;
            font-weight: 700;
            position: relative;
            z-index: 2;
        }
        
        .fpl-card h3 {
            color: #37003c;
            margin-bottom: 20px;
            font-size: 1.3rem;
            font-weight: 600;
            position: relative;
            z-index: 2;
        }
            font-size: 1.1rem;
        }
        
        .captain-picks {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .captain-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            border: 2px solid #37003c;
            transition: transform 0.3s ease;
        }
        
        .captain-card:hover {
            transform: translateY(-5px);
        }
        
        .captain-card.premium {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            border-color: #ffd700;
        }
        
        .captain-card .player-name {
            font-size: 1.3rem;
            font-weight: bold;
            color: #37003c;
            margin-bottom: 8px;
        }
        
        .captain-card .player-price {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        
        .captain-card .fixture {
            background: #37003c;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            margin-bottom: 10px;
            display: inline-block;
        }
        
        .transfers-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        .transfers-table th,
        .transfers-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }
        
        .transfers-table th {
            background: #f8f9fa;
            font-weight: bold;
            color: #37003c;
        }
        
        .transfer-in {
            color: #28a745;
            font-weight: bold;
        }
        
        .transfer-out {
            color: #dc3545;
            font-weight: bold;
        }
        
        .gameweek-info {
            background: linear-gradient(135deg, #37003c 0%, #6f42c1 50%, #e83e8c 100%);
            color: white;
            padding: 35px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 15px 35px rgba(55,0,60,0.3), 0 8px 15px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255,255,255,0.1);
            margin-bottom: 25px;
        }
        
        .gameweek-info::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }
        
        .gameweek-info h3 {
            margin-bottom: 15px;
            color: white !important;
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            z-index: 2;
        }
        
        .gameweek-number {
            font-size: 3.5rem;
            font-weight: 900;
            margin: 20px 0;
            text-shadow: 0 4px 8px rgba(0,0,0,0.3);
            background: linear-gradient(45deg, #00ff87, #20c997);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            z-index: 2;
        }
        
        .gameweek-info p {
            font-size: 1rem;
            opacity: 0.9;
            position: relative;
            z-index: 2;
        }
        
        .deadline-timer {
            background: linear-gradient(135deg, #dc3545 0%, #fd7e14 50%, #ffc107 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 35px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(220,53,69,0.3), 0 5px 15px rgba(0,0,0,0.1);
            border: 2px solid rgba(255,255,255,0.2);
            position: relative;
            overflow: hidden;
        }
        
        .deadline-timer::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 200%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: shimmer 3s ease-in-out infinite;
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .deadline-timer h3 {
            margin-bottom: 15px;
            color: white !important;
            font-size: 1.2rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            z-index: 2;
        }
        
        #countdown {
            font-size: 1.4rem;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 2;
        }
        
        .price-changes {
            list-style: none;
            padding: 0;
        }
        
        .price-changes li {
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .price-up {
            color: #28a745;
        }
        
        .price-down {
            color: #dc3545;
        }
        
        .team-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .team-formation {
            background: linear-gradient(135deg, #0f5132 0%, #198754 50%, #20c997 100%);
            border-radius: 20px;
            padding: 40px 25px;
            margin: 25px 0;
            position: relative;
            min-height: 600px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.25);
            border: 3px solid rgba(255,255,255,0.2);
            overflow: hidden;
        }
        
        .team-formation::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 3px;
            height: 100%;
            background: linear-gradient(180deg, rgba(255,255,255,0.5) 0%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0.5) 100%);
            box-shadow: 0 0 10px rgba(255,255,255,0.3);
        }
        
        .team-formation::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120px;
            height: 120px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            box-shadow: 0 0 20px rgba(255,255,255,0.2);
        }
        
        .formation-line {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 25px 0;
            position: relative;
        }
        
        .player-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 16px;
            padding: 16px 12px;
            margin: 0 10px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15), 0 4px 10px rgba(0,0,0,0.1);
            border: 3px solid #fff;
            min-width: 130px;
            max-width: 140px;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            backdrop-filter: blur(10px);
            z-index: 10;
        }
        
        .player-card:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 15px 35px rgba(0,0,0,0.25), 0 8px 15px rgba(0,0,0,0.15);
            border-color: #37003c;
        }
        
        .player-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, transparent, rgba(55,0,60,0.1), transparent);
            border-radius: 18px;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .player-card:hover::before {
            opacity: 1;
        }
        
        .player-name {
            font-weight: bold;
            font-size: 0.9rem;
            color: #333;
            margin-bottom: 4px;
        }
        
        .player-team {
            font-size: 0.75rem;
            color: #666;
            margin-bottom: 6px;
        }
        
        .player-price {
            font-size: 0.8rem;
            color: #37003c;
            font-weight: bold;
            background: rgba(55,0,60,0.1);
            padding: 2px 6px;
            border-radius: 4px;
        }
        
        .formation-goalkeeper .player-card {
            border-color: #FFD700;
            background: rgba(255,215,0,0.1);
        }
        
        .formation-defenders .player-card {
            border-color: #4169E1;
            background: rgba(65,105,225,0.1);
        }
        
        .formation-midfielders .player-card {
            border-color: #32CD32;
            background: rgba(50,205,50,0.1);
        }
        
        .formation-forwards .player-card {
            border-color: #FF4500;
            background: rgba(255,69,0,0.1);
        }
        
        .formation-title {
            text-align: center;
            color: white;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 25px;
            text-shadow: 0 3px 6px rgba(0,0,0,0.5);
            letter-spacing: 1px;
            text-transform: uppercase;
            position: relative;
            z-index: 15;
        }
        
        .formation-title::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, transparent, #fff, transparent);
            border-radius: 2px;
        }
        
        .stats-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: linear-gradient(135deg, rgba(55,0,60,0.05) 0%, rgba(111,66,193,0.05) 100%);
            border-radius: 12px;
            border-left: 4px solid #37003c;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .stat-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background: linear-gradient(90deg, rgba(55,0,60,0.1), transparent);
            transition: width 0.3s ease;
        }
        
        .stat-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(55,0,60,0.1);
        }
        
        .stat-item:hover::before {
            width: 100%;
        }
        
        .stat-icon {
            font-size: 1.8rem;
            margin-right: 15px;
            min-width: 50px;
            text-align: center;
            position: relative;
            z-index: 2;
        }
        
        .stat-content {
            flex: 1;
            position: relative;
            z-index: 2;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
            margin-bottom: 2px;
        }
        
        .stat-value {
            font-size: 1.1rem;
            font-weight: 700;
            color: #37003c;
            margin-bottom: 2px;
        }
        
        .stat-desc {
            font-size: 0.8rem;
            color: #888;
            font-style: italic;
        }
        
        .fixture-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .fixture-tier {
            padding: 18px;
            border-radius: 12px;
            border-left: 5px solid;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .fixture-tier::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 0;
            height: 100%;
            transition: width 0.3s ease;
            opacity: 0.1;
        }
        
        .fixture-tier:hover::before {
            width: 100%;
        }
        
        .fixture-tier.easy {
            background: linear-gradient(135deg, rgba(40,167,69,0.08) 0%, rgba(32,201,151,0.08) 100%);
            border-left-color: #28a745;
        }
        
        .fixture-tier.easy::before {
            background: linear-gradient(90deg, #28a745, #20c997);
        }
        
        .fixture-tier.moderate {
            background: linear-gradient(135deg, rgba(253,126,20,0.08) 0%, rgba(255,193,7,0.08) 100%);
            border-left-color: #fd7e14;
        }
        
        .fixture-tier.moderate::before {
            background: linear-gradient(90deg, #fd7e14, #ffc107);
        }
        
        .fixture-tier.difficult {
            background: linear-gradient(135deg, rgba(220,53,69,0.08) 0%, rgba(229,62,62,0.08) 100%);
            border-left-color: #dc3545;
        }
        
        .fixture-tier.difficult::before {
            background: linear-gradient(90deg, #dc3545, #e53e3e);
        }
        
        .tier-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
        }
        
        .tier-icon {
            font-size: 1.2rem;
            margin-right: 10px;
        }
        
        .tier-title {
            font-weight: 700;
            font-size: 1.1rem;
            color: #333;
            margin-right: 10px;
        }
        
        .tier-rating {
            background: rgba(55,0,60,0.1);
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            color: #37003c;
        }
        
        .tier-teams {
            font-weight: 600;
            color: #37003c;
            margin-bottom: 8px;
            font-size: 0.95rem;
            position: relative;
            z-index: 2;
        }
        
        .tier-note {
            font-size: 0.85rem;
            color: #666;
            font-style: italic;
            position: relative;
            z-index: 2;
        }
        
        .position-group {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }
        
        .position-group h4 {
            color: #37003c;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .player-list {
            list-style: none;
            padding: 0;
        }
        
        .player-list li {
            padding: 5px 0;
            font-size: 0.9rem;
            border-bottom: 1px solid #e9ecef;
        }
        
        .player-list li:last-child {
            border-bottom: none;
        }
        
        .fpl-tips {
            background: #e8f5e8;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .fpl-tips h4 {
            color: #155724;
            margin-bottom: 10px;
        }
        
        .fpl-tips ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .fpl-tips li {
            margin-bottom: 5px;
            color: #155724;
        }
        
        /* Comprehensive Mobile Responsive Styles */
        @media (max-width: 768px) {
            /* Container Mobile */
            .fpl-container {
                padding: 15px;
            }
            
            /* Header Mobile */
            .fpl-header {
                padding: 25px 15px;
                margin-bottom: 20px;
            }
            
            .fpl-header h1 {
                font-size: 2rem;
            }
            
            .fpl-header::before {
                font-size: 120px;
                top: -30px;
                right: -30px;
            }
            
            /* Grid Mobile */
            .fpl-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            /* Cards Mobile */
            .fpl-card {
                padding: 20px;
                margin-bottom: 20px;
            }
            
            .fpl-card h3 {
                font-size: 1.3rem;
            }
            
            /* Gameweek Info Mobile */
            .gameweek-info {
                padding: 25px 15px;
                margin-bottom: 20px;
            }
            
            .gameweek-number {
                font-size: 2.5rem;
                margin: 15px 0;
            }
            
            .gameweek-info h3 {
                font-size: 1rem;
            }
            
            .gameweek-info p {
                font-size: 0.9rem;
            }
            
            /* Deadline Timer Mobile */
            .deadline-timer {
                padding: 20px 15px;
                margin-bottom: 25px;
            }
            
            .deadline-timer h3 {
                font-size: 1.1rem;
            }
            
            /* Captain Picks Mobile */
            .captain-picks {
                padding: 20px;
            }
            
            .captain-picks h3 {
                font-size: 1.2rem;
            }
            
            /* Player Cards Mobile */
            .player-card {
                padding: 15px;
                margin-bottom: 15px;
            }
            
            .player-name {
                font-size: 1rem;
            }
            
            .player-team {
                font-size: 0.85rem;
            }
            
            .player-price {
                font-size: 0.9rem;
            }
            
            /* Lineup Mobile */
            .lineup-formation {
                padding: 20px 10px;
            }
            
            .formation-line {
                margin: 15px 0;
            }
            
            .formation-player {
                width: 60px;
                height: 60px;
                font-size: 0.7rem;
                margin: 5px;
            }
            
            /* Team Selection Mobile */
            .team-selection {
                padding: 20px;
            }
            
            .player-list {
                gap: 10px;
            }
            
            /* Stats Tables Mobile */
            .stats-table {
                font-size: 0.85rem;
                overflow-x: auto;
            }
            
            .stats-table th,
            .stats-table td {
                padding: 8px 4px;
                min-width: 80px;
            }
            
            /* Tips Section Mobile */
            .tips-section {
                padding: 20px;
            }
            
            .tip-item {
                padding: 15px;
                margin-bottom: 15px;
            }
            
            .tip-title {
                font-size: 1rem;
            }
            
            .tip-description {
                font-size: 0.85rem;
            }
            
            /* Transfers Mobile */
            .transfer-suggestions {
                padding: 20px;
            }
            
            .transfer-item {
                padding: 15px;
                margin-bottom: 15px;
            }
            
            .transfer-in,
            .transfer-out {
                font-size: 0.9rem;
            }
            
            /* Analysis Mobile */
            .analysis-section {
                padding: 20px;
            }
            
            .analysis-point {
                padding: 15px;
                margin-bottom: 15px;
            }
            
            /* Price Changes Mobile */
            .price-changes {
                padding: 20px;
            }
            
            .price-change-item {
                padding: 12px;
                font-size: 0.9rem;
            }
            
            /* Buttons Mobile */
            .fpl-btn {
                padding: 12px 20px;
                font-size: 0.9rem;
                width: 100%;
                margin-bottom: 10px;
            }
            
            /* Navigation Mobile */
            .fpl-nav {
                flex-direction: column;
                gap: 10px;
            }
            
            .fpl-nav-item {
                width: 100%;
                text-align: center;
                padding: 12px;
            }
        }
        
        /* Small Mobile Styles */
        @media (max-width: 480px) {
            .fpl-container {
                padding: 10px;
            }
            
            .fpl-header {
                padding: 20px 10px;
            }
            
            .fpl-header h1 {
                font-size: 1.8rem;
            }
            
            .gameweek-number {
                font-size: 2rem;
            }
            
            .fpl-card {
                padding: 15px;
            }
            
            .formation-player {
                width: 50px;
                height: 50px;
                font-size: 0.6rem;
                margin: 3px;
            }
            
            .stats-table {
                font-size: 0.75rem;
            }
            
            .stats-table th,
            .stats-table td {
                padding: 6px 2px;
                min-width: 60px;
            }
            
            .captain-picks {
                padding: 15px;
            }
            
            .team-selection {
                padding: 15px;
            }
            
            .tip-item,
            .transfer-item,
            .analysis-point {
                padding: 12px;
            }
        }
        
        /* Tablet Styles */
        @media (min-width: 769px) and (max-width: 1024px) {
            .fpl-container {
                padding: 18px;
            }
            
            .fpl-grid {
                grid-template-columns: 1fr 1fr;
                gap: 25px;
            }
            
            .fpl-header {
                padding: 30px 20px;
            }
            
            .gameweek-number {
                font-size: 3rem;
            }
        }
        
        /* Enhanced Header Styles */
        .header-content {
            position: relative;
            z-index: 2;
        }
        
        .header-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        
        .stat-bubble {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 15px 25px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .stat-bubble:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.25);
        }
        
        .stat-number {
            font-size: 1.8rem;
            font-weight: 800;
            color: #00ff87;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-top: 5px;
        }
        
        .header-animation {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            overflow: hidden;
        }
        
        .floating-icon {
            position: absolute;
            font-size: 40px;
            opacity: 0.1;
            animation: float 6s ease-in-out infinite;
        }
        
        .floating-icon:nth-child(1) {
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }
        
        .floating-icon:nth-child(2) {
            top: 60%;
            right: 15%;
            animation-delay: 2s;
        }
        
        .floating-icon:nth-child(3) {
            bottom: 20%;
            left: 20%;
            animation-delay: 4s;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(10deg); }
        }
        
        /* Enhanced Player Comparison Styles */
        .comparison-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
            padding: 20px;
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            border-radius: 12px;
            border: 1px solid #e9ecef;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .filter-group label {
            font-weight: 600;
            color: #37003c;
            font-size: 0.9rem;
        }
        
        .filter-group select {
            padding: 10px 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 0.9rem;
            background: white;
            transition: all 0.3s ease;
        }
        
        .filter-group select:focus {
            outline: none;
            border-color: #37003c;
            box-shadow: 0 0 0 3px rgba(55, 0, 60, 0.1);
        }
        
        .price-range {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .price-range input[type="range"] {
            flex: 1;
            min-width: 60px;
        }
        
        .price-range span {
            font-size: 0.8rem;
            font-weight: 500;
            color: #666;
            min-width: 45px;
        }
        
        .comparison-container {
            margin-top: 20px;
        }
        
        .player-select-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .player-selector {
            flex: 1;
            min-width: 200px;
        }
        
        .player-selector label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #37003c;
        }
        
        .search-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .search-container input {
            padding: 10px 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        
        .search-container input:focus {
            outline: none;
            border-color: #37003c;
            box-shadow: 0 0 0 3px rgba(55, 0, 60, 0.1);
        }
        
        .player-selector select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            background: white;
            transition: all 0.3s ease;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .player-selector select:focus {
            outline: none;
            border-color: #37003c;
            box-shadow: 0 0 0 3px rgba(55, 0, 60, 0.1);
        }
        
        .vs-divider {
            font-size: 1.5rem;
            font-weight: 800;
            color: #37003c;
            padding: 0 15px;
            background: linear-gradient(135deg, #37003c, #6f42c1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .comparison-loading {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            padding: 40px;
            text-align: center;
            color: #666;
        }
        
        .comparison-stats {
            margin-top: 20px;
        }
        
        .comparison-stats.has-data {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
        }
        
        .no-comparison {
            text-align: center;
            padding: 40px 20px;
            color: #666;
            font-style: italic;
        }
        
        .player-comparison-card {
            background: linear-gradient(135deg, rgba(55,0,60,0.05), rgba(111,66,193,0.05));
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .player-comparison-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #37003c, #6f42c1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .player-comparison-card.winner {
            border-color: #28a745;
            background: linear-gradient(135deg, rgba(40,167,69,0.1), rgba(32,201,151,0.1));
        }
        
        .player-comparison-card.winner::before {
            opacity: 1;
            background: linear-gradient(90deg, #28a745, #20c997);
        }
        
        .player-header {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(55,0,60,0.1);
        }
        
        .player-header h4 {
            margin: 0 0 5px 0;
            font-size: 1.2rem;
            color: #37003c;
        }
        
        .player-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 8px;
        }
        
        .comparison-stat-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .comparison-stat-list li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            transition: background-color 0.3s ease;
        }
        
        .comparison-stat-list li:hover {
            background-color: rgba(55,0,60,0.03);
        }
        
        .comparison-stat-list li:last-child {
            border-bottom: none;
        }
        
        .stat-label {
            font-weight: 500;
            color: #333;
        }
        
        .stat-value {
            font-weight: 600;
            padding: 4px 8px;
            border-radius: 6px;
            transition: all 0.3s ease;
        }
        
        .stat-better {
            color: #28a745;
            background: rgba(40,167,69,0.1);
        }
        
        .comparison-vs {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .vs-badge {
            background: linear-gradient(135deg, #37003c, #6f42c1);
            color: white;
            padding: 15px 20px;
            border-radius: 50%;
            font-weight: 800;
            font-size: 1.2rem;
            box-shadow: 0 5px 15px rgba(55,0,60,0.3);
        }
        
        .stats-toggle {
            margin-top: 25px;
            text-align: center;
        }
        
        .toggle-switch {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            user-select: none;
        }
        
        .toggle-switch input {
            display: none;
        }
        
        .toggle-slider {
            width: 50px;
            height: 24px;
            background: #ccc;
            border-radius: 24px;
            position: relative;
            transition: background 0.3s ease;
        }
        
        .toggle-slider::before {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
        }
        
        .toggle-switch input:checked + .toggle-slider {
            background: #37003c;
        }
        
        .toggle-switch input:checked + .toggle-slider::before {
            transform: translateX(26px);
        }
        
        .toggle-label {
            font-weight: 500;
            color: #37003c;
        }
        
        .advanced-stats {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(0,0,0,0.1);
        }
        
        .advanced-stats.show {
            display: block;
        }
        
        /* Team Builder Styles */
        .team-builder {
            margin-top: 15px;
        }
        
        .budget-display {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #37003c, #6f42c1);
            border-radius: 15px;
            color: white;
        }
        
        .budget-remaining {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 5px;
        }
        
        .budget-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .position-slot {
            margin-bottom: 15px;
        }
        
        .slot-header {
            font-weight: 600;
            color: #37003c;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .player-slot {
            background: #f8f9fa;
            border: 2px dashed #ddd;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 5px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .player-slot:hover {
            border-color: #37003c;
            background: rgba(55,0,60,0.05);
        }
        
        .player-slot.filled {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border-style: solid;
            border-color: #28a745;
        }
        
        .slot-text {
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        .reset-team-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #dc3545, #e74c3c);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
        }
        
        .reset-team-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(220,53,69,0.3);
        }
        
        /* Enhanced Animations */
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .fpl-card {
            animation: slideInUp 0.6s ease-out;
        }
        
        .captain-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .captain-card:hover {
            animation: pulse 2s infinite;
        }
        
        /* Touch-friendly enhancements for mobile */
        @media (hover: none) and (pointer: coarse) {
            .captain-card:hover,
            .player-card:hover,
            .fpl-card:hover {
                transform: none !important;
                box-shadow: 0 4px 15px rgba(0,0,0,0.1) !important;
            }
            
            .fpl-btn {
                min-height: 44px;
                min-width: 44px;
            }
        }
        
        /* Live Stats Panel Styles */
        .live-stats-panel {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(40,167,69,0.2);
            position: relative;
            overflow: hidden;
        }
        
        .live-stats-panel::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .live-stats-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            position: relative;
            z-index: 2;
        }
        
        .live-stats-header h3 {
            margin: 0;
            color: white !important;
            font-size: 1.3rem;
        }
        
        .live-stats-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        
        .live-stats-info {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
            position: relative;
            z-index: 2;
        }
        
        .stat-info {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        
        .info-label {
            font-size: 0.8rem;
            opacity: 0.8;
            font-weight: 500;
        }
        
        .info-value {
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        /* Loading Spinner Styles */
        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        /* Enhanced Mobile Responsiveness */
        @media (max-width: 768px) {
            .header-stats {
                gap: 15px;
            }
            
            .stat-bubble {
                padding: 12px 20px;
            }
            
            .stat-number {
                font-size: 1.5rem;
            }
            
            .player-select-container {
                flex-direction: column;
                gap: 15px;
            }
            
            .vs-divider {
                order: 2;
                padding: 10px 0;
            }
            
            .comparison-stats {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .live-stats-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .live-stats-controls {
                justify-content: center;
            }
            
            .live-stats-info {
                justify-content: center;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="header" include="./header.html"></div>

    <!-- Premium Membership Gate -->
    <div id="premium-gate" class="premium-gate-overlay" style="display: none;">
        <div class="premium-gate-content">
            <div class="gate-header">
                <h2>üîí Premium FPL Content Ahead!</h2>
                <p>This Fantasy Premier League hub is exclusive to our Premium Starter members</p>
            </div>
            
            <div class="gate-benefits">
                <h3>Join Premium Starter for only <span class="price">$2.00/month</span></h3>
                <p class="benefits-intro">Get exclusive access to:</p>
                <ul class="benefits-list">
                    <li>‚úÖ <strong>5 exclusive articles per week</strong> - In-depth analysis you won't find anywhere else</li>
                    <li>‚úÖ <strong>Latest transfer rumors</strong> - Breaking news before it hits mainstream media</li>
                    <li>‚úÖ <strong>Weekly team and match analysis</strong> - Expert tactical breakdowns</li>
                    <li>‚úÖ <strong>Access to all articles</strong> - Full archive of premium content</li>
                    <li>‚úÖ <strong>FPL pro advice and suggested teams</strong> - Weekly fantasy lineups from experts</li>
                    <li>‚úÖ <strong>Ad-free browsing</strong> - Clean, uninterrupted reading experience</li>
                    <li>‚úÖ <strong>Premium Fantasy Football Hub</strong> - Advanced FPL strategies and insider tips</li>
                </ul>
            </div>
            
            <div class="gate-actions">
                <button class="join-premium-btn" onclick="joinPremiumStarter()">
                    Join Premium Starter - $2/month
                </button>
                <p class="gate-subtext">Cancel anytime ‚Ä¢ Instant access ‚Ä¢ 30-day money-back guarantee</p>
            </div>
            
            <div class="gate-footer">
                <p>Already a member? <a href="/signin.html" class="signin-link">Sign in here</a></p>
            </div>
        </div>
    </div>

    <!-- Main Content Area -->
    <main class="main-content">
        <div class="fpl-container">
            <div class="fpl-header">
                <div class="header-content">
                    <h1>‚öΩ Premier League Fantasy Hub</h1>
                    <p>Your complete guide to FPL success with expert tips, analysis, and strategies</p>
                    <div class="header-stats">
                        <div class="stat-bubble">
                            <div class="stat-number" id="total-managers">9.2M+</div>
                            <div class="stat-label">Active Managers</div>
                        </div>
                        <div class="stat-bubble">
                            <div class="stat-number" id="avg-score">45</div>
                            <div class="stat-label">Average GW Score</div>
                        </div>
                        <div class="stat-bubble">
                            <div class="stat-number" id="top-scorer">127</div>
                            <div class="stat-label">Highest GW Score</div>
                        </div>
                    </div>
                </div>
                <div class="header-animation">
                    <div class="floating-icon">‚öΩ</div>
                    <div class="floating-icon">üèÜ</div>
                    <div class="floating-icon">üìä</div>
                </div>
            </div>

            <div class="deadline-timer">
                <h3>‚è∞ Next Deadline</h3>
                <div id="countdown">Gameweek 1 approaching (season launch confirmed, first matches mid-August 2025)</div>
            </div>

            <!-- Live Stats Control Panel -->
            <div class="live-stats-panel">
                <div class="live-stats-header">
                    <h3>üì° Live FPL Data</h3>
                    <div class="live-stats-controls">
                    </div>
                </div>
                <div class="live-stats-info">
                    <div class="stat-info">
                        <span class="info-label">Data Source:</span>
                        <span class="info-value">Official FPL API</span>
                    </div>
                    <div class="stat-info">
                        <span class="info-label">Status:</span>
                        <span class="info-value" id="api-status">üü¢ Live</span>
                    </div>
                    <div class="stat-info">
                        <span class="info-label" id="last-refresh">Last updated: Never</span>
                    </div>
                </div>
            </div>

            <div class="fpl-grid">
                <div class="main-content">
                    <!-- Captain Picks -->
                    <div class="fpl-card">
                        <h2>üèÜ This Week's Captain Picks</h2>
                        <div class="captain-picks">
                            <div class="captain-card premium">
                                <div class="player-name">Mohamed Salah (C)</div>
                                <div class="player-price">¬£13.0m | Liverpool</div>
                                <div class="fixture">vs BOU (H)</div>
                                <p>Liverpool's talisman starts at home against Bournemouth. With strong form expected under new management and penalties in his arsenal, Salah is a top premium captain option for GW1, especially as a differential if avoiding Haaland.</p>
                            </div>
                            
                            <div class="captain-card">
                                <div class="player-name">Cole Palmer</div>
                                <div class="player-price">¬£10.5m | Chelsea</div>
                                <div class="fixture">vs CRY (H)</div>
                                <p>Chelsea's penalty taker and creative force faces Crystal Palace at home. Palmer's consistency last season makes him a solid early captain pick, particularly in drafts chasing fixtures.</p>
                            </div>
                            
                            <div class="captain-card">
                                <div class="player-name">Bukayo Saka</div>
                                <div class="player-price">¬£10.0m | Arsenal</div>
                                <div class="fixture">vs LEE (H)</div>
                                <p>Arsenal's star winger hosts Leeds. Saka's home form and set-piece involvement position him as an excellent alternative captain for those spreading premiums.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Transfer Recommendations -->
                    <div class="fpl-card">
                        <h2>üîÑ Transfer Recommendations</h2>
                        <p>Since this is pre-season, focus on initial draft tweaks based on fixtures and prices. Here's updated advice drawing from expert drafts and early analysis:</p>
                        <table class="transfers-table">
                            <thead>
                                <tr>
                                    <th>Transfer Out</th>
                                    <th>Transfer In</th>
                                    <th>Price</th>
                                    <th>Reason</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="transfer-out">Overpriced premiums like Haaland if budget tight</td>
                                    <td class="transfer-in">Isak</td>
                                    <td>¬£8.5m</td>
                                    <td>Newcastle's favorable early fixtures (home fortress) and Isak's form make him a strong forward enabler; top triple captain candidate early on.</td>
                                </tr>
                                <tr>
                                    <td class="transfer-out">Injury-prone mids like Maddison</td>
                                    <td class="transfer-in">Eze</td>
                                    <td>¬£7.0m</td>
                                    <td>Crystal Palace's fixtures suit Eze's attacking returns; great for captain chasing in GW4 vs SUN.</td>
                                </tr>
                                <tr>
                                    <td class="transfer-out">High-risk defenders like Digne</td>
                                    <td class="transfer-in">Van Dijk</td>
                                    <td>¬£6.0m</td>
                                    <td>Liverpool's captain is a nailed starter with defensive contributions; strong for clean sheets in a refreshed backline.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Recommended Team Selection -->
                    <div class="fpl-card">
                        <h2>‚≠ê Recommended Team (GW1)</h2>
                        <p>Adjusted for the standard ¬£100m budget using latest 2025/26 prices and value picks for balance (total cost: ¬£100.0m):</p>
                        <div class="team-formation">
                            <div class="formation-title">3-5-3 Formation</div>
                            
                            <!-- Forwards -->
                            <div class="formation-line formation-forwards">
                                <div class="player-card">
                                    <div class="player-name">Wissa</div>
                                    <div class="player-team">BRE</div>
                                    <div class="player-price">¬£6.0m</div>
                                </div>
                                <div class="player-card">
                                    <div class="player-name">Mateta</div>
                                    <div class="player-team">CRY</div>
                                    <div class="player-price">¬£7.5m</div>
                                </div>
                                <div class="player-card">
                                    <div class="player-name">Wood</div>
                                    <div class="player-team">NFO</div>
                                    <div class="player-price">¬£6.0m</div>
                                </div>
                            </div>
                            
                            <!-- Midfielders -->
                            <div class="formation-line formation-midfielders">
                                <div class="player-card">
                                    <div class="player-name">Son (C)</div>
                                    <div class="player-team">TOT</div>
                                    <div class="player-price">¬£10.0m</div>
                                </div>
                                <div class="player-card">
                                    <div class="player-name">Palmer</div>
                                    <div class="player-team">CHE</div>
                                    <div class="player-price">¬£10.5m</div>
                                </div>
                                <div class="player-card">
                                    <div class="player-name">Saka</div>
                                    <div class="player-team">ARS</div>
                                    <div class="player-price">¬£10.0m</div>
                                </div>
                                <div class="player-card">
                                    <div class="player-name">Gordon</div>
                                    <div class="player-team">NEW</div>
                                    <div class="player-price">¬£7.0m</div>
                                </div>
                                <div class="player-card">
                                    <div class="player-name">Luiz</div>
                                    <div class="player-team">AVL</div>
                                    <div class="player-price">¬£5.5m</div>
                                </div>
                            </div>
                            
                            <!-- Defenders -->
                            <div class="formation-line formation-defenders">
                                <div class="player-card">
                                    <div class="player-name">Alexander-Arnold</div>
                                    <div class="player-team">LIV</div>
                                    <div class="player-price">¬£7.0m</div>
                                </div>
                                <div class="player-card">
                                    <div class="player-name">Saliba</div>
                                    <div class="player-team">ARS</div>
                                    <div class="player-price">¬£6.0m</div>
                                </div>
                                <div class="player-card">
                                    <div class="player-name">Andersen</div>
                                    <div class="player-team">CRY</div>
                                    <div class="player-price">¬£4.5m</div>
                                </div>
                            </div>
                            
                            <!-- Goalkeeper -->
                            <div class="formation-line formation-goalkeeper">
                                <div class="player-card">
                                    <div class="player-name">Pickford</div>
                                    <div class="player-team">EVE</div>
                                    <div class="player-price">¬£5.5m</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Bench Players -->
                        <div style="margin-top: 20px;">
                            <h4 style="color: #37003c; margin-bottom: 15px; font-size: 1.1rem;">ü™ë Bench</h4>
                            <div style="display: flex; gap: 15px; flex-wrap: wrap; justify-content: center;">
                                <div class="player-card" style="background: linear-gradient(145deg, #f8f9fa 0%, #e9ecef 100%); border-color: #6c757d; opacity: 0.8;">
                                    <div class="player-name">Flekken</div>
                                    <div class="player-team">BRE</div>
                                    <div class="player-price">¬£4.5m</div>
                                </div>
                                <div class="player-card" style="background: linear-gradient(145deg, #f8f9fa 0%, #e9ecef 100%); border-color: #6c757d; opacity: 0.8;">
                                    <div class="player-name">Lewis</div>
                                    <div class="player-team">MCI</div>
                                    <div class="player-price">¬£4.5m</div>
                                </div>
                                <div class="player-card" style="background: linear-gradient(145deg, #f8f9fa 0%, #e9ecef 100%); border-color: #6c757d; opacity: 0.8;">
                                    <div class="player-name">Munoz</div>
                                    <div class="player-team">CRY</div>
                                    <div class="player-price">¬£5.5m</div>
                                </div>
                            </div>
                        </div>
                        <p style="margin-top: 15px; font-style: italic;">This team emphasizes premium mids for captain flexibility, double Liverpool defense for clean sheet potential, and value forwards. Pros: Fixture-proof premiums; Cons: Bench depth limited‚Äîplan early transfers.</p>
                    </div>

                    <!-- Enhanced Player Comparison Tool -->
                    <div class="fpl-card">
                        <h2>üîç Live Player Comparison Tool</h2>
                        <p>Compare players using real-time data from the official FPL API</p>
                        
                        <!-- Player Search and Filters -->
                        <div class="comparison-filters">
                            <div class="filter-group">
                                <label>Position Filter:</label>
                                <select id="position-filter" onchange="filterPlayersByPosition()">
                                    <option value="all">All Positions</option>
                                    <option value="1">Goalkeepers</option>
                                    <option value="2">Defenders</option>
                                    <option value="3">Midfielders</option>
                                    <option value="4">Forwards</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label>Team Filter:</label>
                                <select id="team-filter" onchange="filterPlayersByTeam()">
                                    <option value="all">All Teams</option>
                                    <!-- Teams will be populated dynamically -->
                                </select>
                            </div>
                            <div class="filter-group">
                                <label>Price Range:</label>
                                <div class="price-range">
                                    <input type="range" id="min-price" min="4.0" max="15.0" step="0.1" value="4.0" onchange="filterPlayersByPrice()">
                                    <span id="min-price-display">¬£4.0m</span>
                                    <span>to</span>
                                    <input type="range" id="max-price" min="4.0" max="15.0" step="0.1" value="15.0" onchange="filterPlayersByPrice()">
                                    <span id="max-price-display">¬£15.0m</span>
                                </div>
                            </div>
                        </div>

                        <div class="comparison-container">
                            <div class="player-select-container">
                                <div class="player-selector">
                                    <label>Player 1:</label>
                                    <div class="search-container">
                                        <input type="text" id="player1-search" placeholder="Search players..." onkeyup="searchPlayers(1)">
                                        <select id="player1-select" onchange="updateComparison()">
                                            <option value="">Select Player 1...</option>
                                            <!-- Players will be populated dynamically -->
                                        </select>
                                    </div>
                                </div>
                                <div class="vs-divider">VS</div>
                                <div class="player-selector">
                                    <label>Player 2:</label>
                                    <div class="search-container">
                                        <input type="text" id="player2-search" placeholder="Search players..." onkeyup="searchPlayers(2)">
                                        <select id="player2-select" onchange="updateComparison()">
                                            <option value="">Select Player 2...</option>
                                            <!-- Players will be populated dynamically -->
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="comparison-loading" id="comparison-loading" style="display: none;">
                                <div class="spinner"></div>
                                <span>Loading player data...</span>
                            </div>
                            
                            <div class="comparison-stats" id="comparison-stats">
                                <div class="no-comparison">
                                    <p>Select two players to compare their statistics</p>
                                </div>
                            </div>
                            
                            <!-- Advanced Stats Toggle -->
                            <div class="stats-toggle">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="advanced-stats-toggle" onchange="toggleAdvancedStats()">
                                    <span class="toggle-slider"></span>
                                    <span class="toggle-label">Show Advanced Stats</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- FPL Tips -->
                    <div class="fpl-tips">
                        <h4>üí° Pro Tips for This Gameweek (GW1 Prep)</h4>
                        <ul>
                            <li>Triple captain early on in-form premiums like Isak or Salah during favorable home games‚Äîsave the second for DGWs later.</li>
                            <li>Double up on Arsenal/Liverpool defense for early clean sheets, but monitor pre-season rotations.</li>
                            <li>Avoid overloading on Chelsea assets until form stabilizes; Nkunku could be a differential.</li>
                            <li>Newcastle's fixtures are kind‚Äîload up on Isak/Gordon for attacking returns.</li>
                            <li>With new rules (e.g., 5 free transfers during AFCON, extra chips), plan wildcards around GW12 and use unlimited tweaks pre-GW1.</li>
                            <li>Monitor pre-season for injuries; bolder drafts without Salah/Haaland can work if nailing captains.</li>
                        </ul>
                    </div>
                </div>

                <div class="sidebar-content">
                    <!-- Gameweek Info -->
                    <div class="gameweek-info">
                        <h3>Current Gameweek</h3>
                        <div class="gameweek-number">Pre-season</div>
                        <p>GW1 fixtures released June 18, 2025</p>
                    </div>

                    <!-- Price Changes -->
                    <div class="fpl-card">
                        <h3>üí∞ Latest Price Changes</h3>
                        <p>No changes yet (initial prices set at launch; expect rises/falls post-GW1 based on performance).</p>
                    </div>

                    <!-- Quick Stats -->
                    <div class="fpl-card">
                        <h3>üìä Quick Stats</h3>
                        <div class="stats-container">
                            <div class="stat-item">
                                <div class="stat-icon">üëë</div>
                                <div class="stat-content">
                                    <div class="stat-label">Most Captained</div>
                                    <div class="stat-value">Son</div>
                                    <div class="stat-desc">Early drafts favor balanced approach</div>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">üìà</div>
                                <div class="stat-content">
                                    <div class="stat-label">Most Transferred In</div>
                                    <div class="stat-value">Wissa</div>
                                    <div class="stat-desc">Popular budget forward option</div>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">üìâ</div>
                                <div class="stat-content">
                                    <div class="stat-label">Most Transferred Out</div>
                                    <div class="stat-value">Premium Assets</div>
                                    <div class="stat-desc">Haaland/Salah for budget balance</div>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">üéØ</div>
                                <div class="stat-content">
                                    <div class="stat-label">Best Value</div>
                                    <div class="stat-value">Palmer</div>
                                    <div class="stat-desc">¬£10.5m, penalties + creativity</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Fixture Difficulty -->
                    <div class="fpl-card">
                        <h3>üìÖ Fixture Difficulty (Next 5)</h3>
                        <div class="fixture-container">
                            <div class="fixture-tier easy">
                                <div class="tier-header">
                                    <div class="tier-icon">üü¢</div>
                                    <div class="tier-title">Easy</div>
                                    <div class="tier-rating">FDR 2-3</div>
                                </div>
                                <div class="tier-teams">Bournemouth, Leeds, Sunderland, Burnley, Fulham</div>
                                <div class="tier-note">Low FDR rankings for attacking teams like Liverpool, Arsenal, Newcastle</div>
                            </div>
                            
                            <div class="fixture-tier moderate">
                                <div class="tier-header">
                                    <div class="tier-icon">üü°</div>
                                    <div class="tier-title">Moderate</div>
                                    <div class="tier-rating">FDR 3-4</div>
                                </div>
                                <div class="tier-teams">Crystal Palace, Newcastle, Brentford</div>
                                <div class="tier-note">Balanced matchups with upset potential</div>
                            </div>
                            
                            <div class="fixture-tier difficult">
                                <div class="tier-header">
                                    <div class="tier-icon">üî¥</div>
                                    <div class="tier-title">Difficult</div>
                                    <div class="tier-rating">FDR 4-5</div>
                                </div>
                                <div class="tier-teams">Arsenal, Manchester City, Liverpool</div>
                                <div class="tier-note">Tough for underdogs, but premiums thrive here</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quick Team Builder -->
                    <div class="fpl-card">
                        <h3>‚ö° Quick Team Builder</h3>
                        <p style="font-size: 0.9rem; margin-bottom: 15px;">Build your team with our interactive budget tracker</p>
                        <div class="team-builder">
                            <div class="budget-display">
                                <div class="budget-remaining" id="budget-remaining">¬£100.0m</div>
                                <div class="budget-label">Remaining</div>
                            </div>
                            <div class="player-slots">
                                <div class="position-slot">
                                    <div class="slot-header">GK (2)</div>
                                    <div class="player-slot" onclick="openPlayerSelector('gk', 0)">
                                        <span class="slot-text">+ Add GK</span>
                                    </div>
                                    <div class="player-slot" onclick="openPlayerSelector('gk', 1)">
                                        <span class="slot-text">+ Add GK</span>
                                    </div>
                                </div>
                                <div class="position-slot">
                                    <div class="slot-header">DEF (5)</div>
                                    <div class="player-slot" onclick="openPlayerSelector('def', 0)">
                                        <span class="slot-text">+ Add DEF</span>
                                    </div>
                                    <div class="player-slot" onclick="openPlayerSelector('def', 1)">
                                        <span class="slot-text">+ Add DEF</span>
                                    </div>
                                    <div class="player-slot" onclick="openPlayerSelector('def', 2)">
                                        <span class="slot-text">+ Add DEF</span>
                                    </div>
                                </div>
                                <div class="position-slot">
                                    <div class="slot-header">MID (5)</div>
                                    <div class="player-slot" onclick="openPlayerSelector('mid', 0)">
                                        <span class="slot-text">+ Add MID</span>
                                    </div>
                                    <div class="player-slot" onclick="openPlayerSelector('mid', 1)">
                                        <span class="slot-text">+ Add MID</span>
                                    </div>
                                    <div class="player-slot" onclick="openPlayerSelector('mid', 2)">
                                        <span class="slot-text">+ Add MID</span>
                                    </div>
                                </div>
                                <div class="position-slot">
                                    <div class="slot-header">FWD (3)</div>
                                    <div class="player-slot" onclick="openPlayerSelector('fwd', 0)">
                                        <span class="slot-text">+ Add FWD</span>
                                    </div>
                                    <div class="player-slot" onclick="openPlayerSelector('fwd', 1)">
                                        <span class="slot-text">+ Add FWD</span>
                                    </div>
                                    <div class="player-slot" onclick="openPlayerSelector('fwd', 2)">
                                        <span class="slot-text">+ Add FWD</span>
                                    </div>
                                </div>
                            </div>
                            <button class="reset-team-btn" onclick="resetTeam()">Reset Team</button>
                        </div>
                    </div>

                    <!-- New Stats Section -->
                    <div class="fpl-card">
                        <h3>üÜï Advanced Analytics</h3>
                        <div style="line-height: 1.6; font-size: 0.9rem;">
                            <p><strong>Value per Million (Projected):</strong> Palmer leads at ~8.5 points/m (based on last season + fixtures); Isak ~7.2/m as budget king.</p>
                            <p><strong>Captain Risk Index:</strong> Salah (Low risk: Home vs easy; 85% haul chance); Haaland (Medium: Form-dependent; 70%).</p>
                            <p><strong>Differential Ownership:</strong> Eze <10%‚Äîhigh upside for ranks; Van Dijk ~15% for set-piece threat.</p>
                            <p><strong>Chip Usage Projection:</strong> 60% plan Triple Captain in GW1-10 (e.g., Isak home); Wildcard 1 by GW12 for fixture turns.</p>
                            <p><strong>Team Balance Score:</strong> Recommended team above scores 8/10 (strong attack, solid defense).</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div class="footer" include="./footer.html"></div>
    <script src="./index.js"></script>
    <script src="./ad-target-blank.js"></script>
    
    <style>
        /* Premium Gate Styles */
        .premium-gate-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            box-sizing: border-box;
        }
        
        .premium-gate-content {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            border: 3px solid #37003c;
            text-align: center;
            animation: gateSlideIn 0.5s ease-out;
        }
        
        @keyframes gateSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .gate-header h2 {
            color: #37003c;
            font-size: 2.2rem;
            margin-bottom: 15px;
            font-weight: 800;
        }
        
        .gate-header p {
            color: #666;
            font-size: 1.2rem;
            margin-bottom: 30px;
        }
        
        .gate-benefits h3 {
            color: #37003c;
            font-size: 1.6rem;
            margin-bottom: 20px;
            font-weight: 700;
        }
        
        .price {
            color: #28a745;
            font-weight: 800;
            font-size: 1.8rem;
        }
        
        .benefits-intro {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 20px;
        }
        
        .benefits-list {
            text-align: left;
            list-style: none;
            padding: 0;
            margin: 20px 0;
        }
        
        .benefits-list li {
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
            font-size: 1rem;
            line-height: 1.6;
            color: #333;
        }
        
        .benefits-list li:last-child {
            border-bottom: none;
        }
        
        .join-premium-btn {
            background: linear-gradient(135deg, #37003c, #6f42c1);
            color: white;
            border: none;
            padding: 18px 36px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            box-shadow: 0 8px 25px rgba(55, 0, 60, 0.3);
        }
        
        .join-premium-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(55, 0, 60, 0.4);
        }
        
        .gate-subtext {
            font-size: 0.9rem;
            color: #666;
            margin-top: 15px;
        }
        
        .gate-footer {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }
        
        .signin-link {
            color: #37003c;
            text-decoration: none;
            font-weight: 600;
        }
        
        .signin-link:hover {
            text-decoration: underline;
        }
        
        /* Hide main content when gate is active */
        .content-blocked {
            filter: blur(5px);
            pointer-events: none;
            user-select: none;
        }
        
        /* Mobile responsiveness for gate */
        @media (max-width: 768px) {
            .premium-gate-content {
                padding: 30px 20px;
                margin: 10px;
            }
            
            .gate-header h2 {
                font-size: 1.8rem;
            }
            
            .join-premium-btn {
                padding: 16px 28px;
                font-size: 1.1rem;
            }
        }
    </style>

    <script>
        // Premium membership gate functionality
        let userAuthenticated = false;
        let userHasPremium = false;
        
        // Check authentication and membership status
        function checkPremiumAccess() {
            if (window.onAuthStateChanged && window.auth) {
                window.onAuthStateChanged(window.auth, (user) => {
                    if (user) {
                        userAuthenticated = true;
                        // Check for premium membership status
                        checkMembershipStatus(user);
                    } else {
                        // User not signed in - show gate
                        showPremiumGate();
                    }
                });
            } else {
                // Firebase not loaded - show gate
                setTimeout(checkPremiumAccess, 1000);
            }
        }
        
        function checkMembershipStatus(user) {
            // Special admin accounts with Pro membership
            if (user.email === 'reidwcoleman@gmail.com' || user.email === 'brianpcoleman@gmail.com') {
                // Grant Pro membership access to admin accounts
                const adminMembership = {
                    plan: 'pro',
                    status: 'active',
                    startDate: new Date().toISOString(),
                    nextBilling: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString() // 30 days from now
                };
                localStorage.setItem('membership', JSON.stringify(adminMembership));
                userHasPremium = true;
                hidePremiumGate();
                return;
            }
            
            // Check localStorage for membership info
            const membershipInfo = localStorage.getItem('membership');
            
            if (membershipInfo) {
                const membership = JSON.parse(membershipInfo);
                // Check if user has starter or pro membership
                if (membership.plan === 'starter' || membership.plan === 'pro' || 
                    membership.plan === 'starter-annual' || membership.plan === 'pro-annual') {
                    userHasPremium = true;
                    hidePremiumGate();
                } else {
                    showPremiumGate();
                }
            } else {
                // No membership found - show gate
                showPremiumGate();
            }
        }
        
        function showPremiumGate() {
            const gate = document.getElementById('premium-gate');
            const mainContent = document.querySelector('.main-content');
            
            gate.style.display = 'flex';
            if (mainContent) {
                mainContent.classList.add('content-blocked');
            }
            
            // Prevent scrolling on background
            document.body.style.overflow = 'hidden';
            
            // Disable right-click and keyboard shortcuts
            document.addEventListener('contextmenu', preventDefaultAction);
            document.addEventListener('keydown', preventKeyboardShortcuts);
        }
        
        function hidePremiumGate() {
            const gate = document.getElementById('premium-gate');
            const mainContent = document.querySelector('.main-content');
            
            gate.style.display = 'none';
            if (mainContent) {
                mainContent.classList.remove('content-blocked');
            }
            
            // Re-enable scrolling
            document.body.style.overflow = 'auto';
            
            // Re-enable right-click and keyboard shortcuts
            document.removeEventListener('contextmenu', preventDefaultAction);
            document.removeEventListener('keydown', preventKeyboardShortcuts);
        }
        
        function preventDefaultAction(e) {
            e.preventDefault();
            return false;
        }
        
        function preventKeyboardShortcuts(e) {
            // Prevent common shortcuts like F12, Ctrl+U, Ctrl+Shift+I, etc.
            if (e.key === 'F12' || 
                (e.ctrlKey && e.key === 'u') ||
                (e.ctrlKey && e.shiftKey && e.key === 'I') ||
                (e.ctrlKey && e.shiftKey && e.key === 'C') ||
                (e.ctrlKey && e.key === 's')) {
                e.preventDefault();
                return false;
            }
        }
        
        function joinPremiumStarter() {
            // Redirect to membership page with starter plan pre-selected
            window.location.href = '/membership.html#starter';
        }
        
        // Prevent gate dismissal attempts
        document.addEventListener('click', function(e) {
            const gate = document.getElementById('premium-gate');
            const gateContent = document.querySelector('.premium-gate-content');
            
            if (gate.style.display === 'flex' && 
                !gateContent.contains(e.target) && 
                !userHasPremium) {
                e.preventDefault();
                e.stopPropagation();
                return false;
            }
        });
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            checkPremiumAccess();
        });
        
        // Prevent closing gate with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && !userHasPremium) {
                e.preventDefault();
                return false;
            }
        });
    </script>
    
    <script>
        // Countdown timer functionality
        function updateCountdown() {
            // This would normally calculate time until next FPL deadline
            const deadline = new Date('2025-01-27T11:30:00').getTime();
            const now = new Date().getTime();
            const timeLeft = deadline - now;
            
            if (timeLeft > 0) {
                const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                
                document.getElementById('countdown').textContent = 
                    `${days} days, ${hours} hours, ${minutes} minutes`;
            } else {
                document.getElementById('countdown').textContent = 'Gameweek in progress';
            }
        }
        
        // Update countdown every minute
        updateCountdown();
        setInterval(updateCountdown, 60000);
        
        // Live FPL API Integration
        class FPLLiveStats {
            constructor() {
                this.baseURL = 'https://fantasy.premierleague.com/api';
                this.corsProxy = 'https://api.allorigins.win/raw?url=';
                this.cache = {};
                this.lastFetch = {};
                this.cacheExpiry = 5 * 60 * 1000; // 5 minutes
            }

            async fetchWithCache(endpoint) {
                const now = Date.now();
                if (this.cache[endpoint] && (now - this.lastFetch[endpoint]) < this.cacheExpiry) {
                    return this.cache[endpoint];
                }

                try {
                    const url = `${this.corsProxy}${encodeURIComponent(this.baseURL + endpoint)}`;
                    const response = await fetch(url);
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    
                    const data = await response.json();
                    this.cache[endpoint] = data;
                    this.lastFetch[endpoint] = now;
                    return data;
                } catch (error) {
                    console.warn(`Failed to fetch ${endpoint}:`, error);
                    // Return fallback data if API fails
                    return this.getFallbackData(endpoint);
                }
            }

            getFallbackData(endpoint) {
                if (endpoint === '/bootstrap-static/') {
                    return this.getFallbackBootstrap();
                } else if (endpoint.includes('/event/') && endpoint.includes('/live/')) {
                    return this.getFallbackLiveData();
                }
                return null;
            }

            getFallbackBootstrap() {
                return {
                    events: [{ id: 1, name: 'Gameweek 1', is_current: true, average_entry_score: 45 }],
                    total_players: 9200000,
                    elements: this.getFallbackPlayers()
                };
            }

            getFallbackPlayers() {
                return [
                    { id: 1, web_name: 'Salah', team: 3, element_type: 3, now_cost: 130, total_points: 218, goals_scored: 18, assists: 13, bonus: 34, selected_by_percent: '48.2' },
                    { id: 2, web_name: 'Haaland', team: 11, element_type: 4, now_cost: 151, total_points: 245, goals_scored: 27, assists: 5, bonus: 28, selected_by_percent: '52.8' },
                    { id: 3, web_name: 'Son', team: 20, element_type: 3, now_cost: 100, total_points: 167, goals_scored: 14, assists: 9, bonus: 19, selected_by_percent: '22.1' },
                    { id: 4, web_name: 'Palmer', team: 6, element_type: 3, now_cost: 105, total_points: 152, goals_scored: 11, assists: 15, bonus: 22, selected_by_percent: '31.4' },
                    { id: 5, web_name: 'Saka', team: 1, element_type: 3, now_cost: 100, total_points: 143, goals_scored: 9, assists: 12, bonus: 18, selected_by_percent: '28.7' }
                ];
            }

            getFallbackLiveData() {
                return {
                    elements: [
                        { id: 1, stats: { total_points: 8, goals_scored: 1, assists: 0, bonus: 3 } },
                        { id: 2, stats: { total_points: 12, goals_scored: 2, assists: 1, bonus: 3 } },
                        { id: 3, stats: { total_points: 6, goals_scored: 0, assists: 1, bonus: 2 } },
                        { id: 4, stats: { total_points: 9, goals_scored: 1, assists: 1, bonus: 2 } },
                        { id: 5, stats: { total_points: 7, goals_scored: 0, assists: 2, bonus: 1 } }
                    ]
                };
            }

            async getBootstrapData() {
                return await this.fetchWithCache('/bootstrap-static/');
            }

            async getCurrentGameweek() {
                const data = await this.getBootstrapData();
                return data?.events?.find(event => event.is_current) || data?.events?.[0];
            }

            async getLiveGameweekData(gameweekId) {
                return await this.fetchWithCache(`/event/${gameweekId}/live/`);
            }

            async getPlayersData() {
                const data = await this.getBootstrapData();
                return data?.elements || [];
            }

            async getTeamsData() {
                const data = await this.getBootstrapData();
                return data?.teams || [];
            }

            formatPlayerData(players, teams = []) {
                const teamMap = teams.reduce((acc, team) => {
                    acc[team.id] = team.short_name || team.name;
                    return acc;
                }, {});

                return players.reduce((acc, player) => {
                    const key = player.web_name.toLowerCase().replace(/[^a-z]/g, '');
                    acc[key] = {
                        id: player.id,
                        name: player.web_name,
                        team: teamMap[player.team] || 'Unknown',
                        price: player.now_cost / 10,
                        points: player.total_points,
                        goals: player.goals_scored,
                        assists: player.assists,
                        bonus: player.bonus,
                        ownership: parseFloat(player.selected_by_percent)
                    };
                    return acc;
                }, {});
            }
        }

        // Initialize live stats system
        const fplLiveStats = new FPLLiveStats();
        let playerData = {}; // Will be populated with live data

        // Live stats update functions
        async function updateLiveStats() {
            try {
                showLoadingIndicator();
                
                // Fetch live data
                const [bootstrapData, currentGW] = await Promise.all([
                    fplLiveStats.getBootstrapData(),
                    fplLiveStats.getCurrentGameweek()
                ]);

                const players = bootstrapData?.elements || [];
                const teams = bootstrapData?.teams || [];

                // Update player data for comparison tool
                playerData = fplLiveStats.formatPlayerData(players, teams);

                // Update header stats
                await updateHeaderStats(bootstrapData, currentGW);

                // Update live gameweek data if available
                if (currentGW?.id) {
                    const liveData = await fplLiveStats.getLiveGameweekData(currentGW.id);
                    updateLiveGameweekStats(liveData);
                }

                // Update comparison tool with new data
                updateComparison();

                // Update last updated time
                updateLastRefreshTime();

                hideLoadingIndicator();
                showSuccessMessage('Live stats updated successfully!');

            } catch (error) {
                console.error('Failed to update live stats:', error);
                hideLoadingIndicator();
                showErrorMessage('Failed to update live stats. Using cached data.');
            }
        }

        function showLoadingIndicator() {
            const indicator = document.getElementById('loading-indicator');
            if (indicator) {
                indicator.style.display = 'block';
            } else {
                // Create loading indicator if it doesn't exist
                const loader = document.createElement('div');
                loader.id = 'loading-indicator';
                loader.innerHTML = `
                    <div class="loading-spinner">
                        <div class="spinner"></div>
                        <span>Updating live stats...</span>
                    </div>
                `;
                loader.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: linear-gradient(135deg, #37003c, #6f42c1);
                    color: white;
                    padding: 15px 20px;
                    border-radius: 10px;
                    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                    z-index: 10000;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                `;
                document.body.appendChild(loader);
            }
        }

        function hideLoadingIndicator() {
            const indicator = document.getElementById('loading-indicator');
            if (indicator) {
                indicator.style.display = 'none';
            }
        }

        function showSuccessMessage(message) {
            showNotification(message, 'success');
        }

        function showErrorMessage(message) {
            showNotification(message, 'error');
        }

        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 10px;
                color: white;
                font-weight: 600;
                z-index: 10001;
                transform: translateX(100%);
                transition: transform 0.3s ease;
                ${type === 'success' ? 'background: linear-gradient(135deg, #28a745, #20c997);' : 'background: linear-gradient(135deg, #dc3545, #e74c3c);'}
            `;
            
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        async function updateHeaderStats(bootstrapData, currentGW) {
            // Update total managers
            const totalManagersEl = document.getElementById('total-managers');
            if (totalManagersEl && bootstrapData?.total_players) {
                const totalPlayers = bootstrapData.total_players;
                const formatted = totalPlayers > 1000000 ? 
                    `${(totalPlayers / 1000000).toFixed(1)}M+` : 
                    `${(totalPlayers / 1000).toFixed(0)}K+`;
                totalManagersEl.textContent = formatted;
            }

            // Update average score
            const avgScoreEl = document.getElementById('avg-score');
            if (avgScoreEl && currentGW?.average_entry_score) {
                avgScoreEl.textContent = Math.round(currentGW.average_entry_score);
            }

            // Update highest score (placeholder - would need additional API call)
            const topScorerEl = document.getElementById('top-scorer');
            if (topScorerEl) {
                // This would require calling the dream team endpoint
                topScorerEl.textContent = '127*'; // Placeholder with asterisk to indicate estimation
            }
        }

        function updateLiveGameweekStats(liveData) {
            if (!liveData?.elements) return;

            // Update live scores for players in comparison tool
            liveData.elements.forEach(element => {
                const playerId = element.id;
                const stats = element.stats;
                
                // Update any displayed live stats
                updatePlayerLiveStats(playerId, stats);
            });
        }

        function updatePlayerLiveStats(playerId, stats) {
            // Update live stats in the UI if player is currently displayed
            const playerCards = document.querySelectorAll(`[data-player-id="${playerId}"]`);
            playerCards.forEach(card => {
                const livePointsEl = card.querySelector('.live-points');
                if (livePointsEl && stats.total_points !== undefined) {
                    livePointsEl.textContent = `Live: ${stats.total_points}pts`;
                }
            });
        }

        function updateLastRefreshTime() {
            const refreshTimeEl = document.getElementById('last-refresh');
            if (refreshTimeEl) {
                const now = new Date();
                refreshTimeEl.textContent = `Last updated: ${now.toLocaleTimeString()}`;
            }
        }

        // Team builder data
        let teamBudget = 100.0;
        let selectedPlayers = {
            gk: [null, null],
            def: [null, null, null, null, null],
            mid: [null, null, null, null, null],
            fwd: [null, null, null]
        };

        // Enhanced Player Comparison with Live FPL Data
        let allPlayers = [];
        let filteredPlayers = [];
        let allTeams = [];

        async function populatePlayerDropdowns() {
            try {
                const bootstrapData = await fplLiveStats.getBootstrapData();
                allPlayers = bootstrapData?.elements || [];
                allTeams = bootstrapData?.teams || [];
                
                // Create team lookup
                const teamLookup = {};
                allTeams.forEach(team => {
                    teamLookup[team.id] = team.short_name;
                });
                
                // Process players with team names
                allPlayers = allPlayers.map(player => ({
                    ...player,
                    team_name: teamLookup[player.team] || 'Unknown',
                    display_name: `${player.web_name} (${teamLookup[player.team]}) - ¬£${(player.now_cost / 10).toFixed(1)}m`
                }));
                
                filteredPlayers = [...allPlayers];
                
                // Populate team filter dropdown
                populateTeamFilter();
                
                // Update player dropdowns
                updatePlayerDropdowns();
                
                console.log(`Loaded ${allPlayers.length} players from FPL API`);
                
            } catch (error) {
                console.error('Failed to populate player dropdowns:', error);
                showErrorMessage('Failed to load player data');
            }
        }

        function populateTeamFilter() {
            const teamFilter = document.getElementById('team-filter');
            if (!teamFilter) return;
            
            // Clear existing options (except "All Teams")
            teamFilter.innerHTML = '<option value="all">All Teams</option>';
            
            // Add team options
            allTeams.forEach(team => {
                const option = document.createElement('option');
                option.value = team.id;
                option.textContent = team.name;
                teamFilter.appendChild(option);
            });
        }

        function updatePlayerDropdowns() {
            const player1Select = document.getElementById('player1-select');
            const player2Select = document.getElementById('player2-select');
            
            if (!player1Select || !player2Select) return;
            
            // Store current selections
            const currentPlayer1 = player1Select.value;
            const currentPlayer2 = player2Select.value;
            
            // Clear dropdowns
            player1Select.innerHTML = '<option value="">Select Player 1...</option>';
            player2Select.innerHTML = '<option value="">Select Player 2...</option>';
            
            // Add filtered players
            filteredPlayers.forEach(player => {
                const option1 = document.createElement('option');
                option1.value = player.id;
                option1.textContent = player.display_name;
                player1Select.appendChild(option1);
                
                const option2 = document.createElement('option');
                option2.value = player.id;
                option2.textContent = player.display_name;
                player2Select.appendChild(option2);
            });
            
            // Restore selections if they still exist in filtered list
            if (filteredPlayers.find(p => p.id == currentPlayer1)) {
                player1Select.value = currentPlayer1;
            }
            if (filteredPlayers.find(p => p.id == currentPlayer2)) {
                player2Select.value = currentPlayer2;
            }
        }

        function filterPlayersByPosition() {
            const positionFilter = document.getElementById('position-filter');
            const selectedPosition = positionFilter.value;
            
            if (selectedPosition === 'all') {
                filteredPlayers = [...allPlayers];
            } else {
                filteredPlayers = allPlayers.filter(player => 
                    player.element_type == selectedPosition
                );
            }
            
            applyAllFilters();
        }

        function filterPlayersByTeam() {
            const teamFilter = document.getElementById('team-filter');
            const selectedTeam = teamFilter.value;
            
            if (selectedTeam === 'all') {
                filteredPlayers = [...allPlayers];
            } else {
                filteredPlayers = allPlayers.filter(player => 
                    player.team == selectedTeam
                );
            }
            
            applyAllFilters();
        }

        function filterPlayersByPrice() {
            const minPrice = parseFloat(document.getElementById('min-price').value);
            const maxPrice = parseFloat(document.getElementById('max-price').value);
            
            // Update display
            document.getElementById('min-price-display').textContent = `¬£${minPrice}m`;
            document.getElementById('max-price-display').textContent = `¬£${maxPrice}m`;
            
            filteredPlayers = allPlayers.filter(player => {
                const price = player.now_cost / 10;
                return price >= minPrice && price <= maxPrice;
            });
            
            applyAllFilters();
        }

        function applyAllFilters() {
            const positionFilter = document.getElementById('position-filter').value;
            const teamFilter = document.getElementById('team-filter').value;
            const minPrice = parseFloat(document.getElementById('min-price').value);
            const maxPrice = parseFloat(document.getElementById('max-price').value);
            
            filteredPlayers = allPlayers.filter(player => {
                const price = player.now_cost / 10;
                const positionMatch = positionFilter === 'all' || player.element_type == positionFilter;
                const teamMatch = teamFilter === 'all' || player.team == teamFilter;
                const priceMatch = price >= minPrice && price <= maxPrice;
                
                return positionMatch && teamMatch && priceMatch;
            });
            
            updatePlayerDropdowns();
        }

        function searchPlayers(playerNumber) {
            const searchInput = document.getElementById(`player${playerNumber}-search`);
            const searchTerm = searchInput.value.toLowerCase();
            
            if (!searchTerm) {
                updatePlayerDropdowns();
                return;
            }
            
            const searchResults = filteredPlayers.filter(player => 
                player.web_name.toLowerCase().includes(searchTerm) ||
                player.first_name.toLowerCase().includes(searchTerm) ||
                player.second_name.toLowerCase().includes(searchTerm) ||
                player.team_name.toLowerCase().includes(searchTerm)
            );
            
            const playerSelect = document.getElementById(`player${playerNumber}-select`);
            playerSelect.innerHTML = `<option value="">Select Player ${playerNumber}...</option>`;
            
            searchResults.forEach(player => {
                const option = document.createElement('option');
                option.value = player.id;
                option.textContent = player.display_name;
                playerSelect.appendChild(option);
            });
        }

        function updateComparison() {
            const player1Id = document.getElementById('player1-select').value;
            const player2Id = document.getElementById('player2-select').value;
            const statsContainer = document.getElementById('comparison-stats');
            
            if (!player1Id || !player2Id) {
                statsContainer.innerHTML = '<div class="no-comparison"><p>Select two players to compare their statistics</p></div>';
                statsContainer.classList.remove('has-data');
                return;
            }
            
            const player1 = allPlayers.find(p => p.id == player1Id);
            const player2 = allPlayers.find(p => p.id == player2Id);
            
            if (!player1 || !player2) {
                statsContainer.innerHTML = '<div class="no-comparison"><p>Player data not found</p></div>';
                return;
            }
            
            // Show loading
            document.getElementById('comparison-loading').style.display = 'flex';
            statsContainer.classList.remove('has-data');
            
            setTimeout(() => {
                renderComparison(player1, player2);
                document.getElementById('comparison-loading').style.display = 'none';
                statsContainer.classList.add('has-data');
            }, 500);
        }

        function renderComparison(player1, player2) {
            const statsContainer = document.getElementById('comparison-stats');
            const showAdvanced = document.getElementById('advanced-stats-toggle').checked;
            
            // Basic stats
            const basicStats = [
                { label: 'Price', key: 'now_cost', format: (val) => `¬£${(val / 10).toFixed(1)}m`, lower_better: true },
                { label: 'Total Points', key: 'total_points', format: (val) => val.toString() },
                { label: 'Goals', key: 'goals_scored', format: (val) => val.toString() },
                { label: 'Assists', key: 'assists', format: (val) => val.toString() },
                { label: 'Bonus Points', key: 'bonus', format: (val) => val.toString() },
                { label: 'Ownership %', key: 'selected_by_percent', format: (val) => `${parseFloat(val).toFixed(1)}%` }
            ];
            
            // Advanced stats
            const advancedStats = [
                { label: 'Clean Sheets', key: 'clean_sheets', format: (val) => val.toString() },
                { label: 'Yellow Cards', key: 'yellow_cards', format: (val) => val.toString(), lower_better: true },
                { label: 'Red Cards', key: 'red_cards', format: (val) => val.toString(), lower_better: true },
                { label: 'Saves', key: 'saves', format: (val) => val.toString() },
                { label: 'Penalties Saved', key: 'penalties_saved', format: (val) => val.toString() },
                { label: 'Penalties Missed', key: 'penalties_missed', format: (val) => val.toString(), lower_better: true },
                { label: 'Own Goals', key: 'own_goals', format: (val) => val.toString(), lower_better: true },
                { label: 'Form', key: 'form', format: (val) => val ? val.toString() : '0.0' },
                { label: 'Points per Game', key: 'points_per_game', format: (val) => val ? parseFloat(val).toFixed(1) : '0.0' },
                { label: 'Value (Points per ¬£)', key: 'value', format: (val) => calculateValueScore(player1, player2) }
            ];
            
            const statsToShow = showAdvanced ? [...basicStats, ...advancedStats] : basicStats;
            
            let player1HTML = `
                <div class="player-comparison-card" id="player1-card">
                    <div class="player-header">
                        <h4>${player1.web_name}</h4>
                        <div class="player-info">
                            <span>${getTeamName(player1.team)}</span>
                            <span>${getPositionName(player1.element_type)}</span>
                        </div>
                        <div class="player-info">
                            <span>¬£${(player1.now_cost / 10).toFixed(1)}m</span>
                            <span>${parseFloat(player1.selected_by_percent).toFixed(1)}% owned</span>
                        </div>
                    </div>
                    <ul class="comparison-stat-list">
            `;
            
            let player2HTML = `
                <div class="player-comparison-card" id="player2-card">
                    <div class="player-header">
                        <h4>${player2.web_name}</h4>
                        <div class="player-info">
                            <span>${getTeamName(player2.team)}</span>
                            <span>${getPositionName(player2.element_type)}</span>
                        </div>
                        <div class="player-info">
                            <span>¬£${(player2.now_cost / 10).toFixed(1)}m</span>
                            <span>${parseFloat(player2.selected_by_percent).toFixed(1)}% owned</span>
                        </div>
                    </div>
                    <ul class="comparison-stat-list">
            `;
            
            let player1Score = 0;
            let player2Score = 0;
            
            statsToShow.forEach(stat => {
                let val1, val2;
                
                if (stat.key === 'value') {
                    val1 = calculatePlayerValue(player1);
                    val2 = calculatePlayerValue(player2);
                } else {
                    val1 = player1[stat.key] || 0;
                    val2 = player2[stat.key] || 0;
                }
                
                let better1 = false, better2 = false;
                
                if (stat.lower_better) {
                    better1 = val1 < val2;
                    better2 = val2 < val1;
                } else {
                    better1 = val1 > val2;
                    better2 = val2 > val1;
                }
                
                if (better1) player1Score++;
                if (better2) player2Score++;
                
                const formattedVal1 = stat.format(val1);
                const formattedVal2 = stat.format(val2);
                
                player1HTML += `
                    <li>
                        <span class="stat-label">${stat.label}</span>
                        <span class="stat-value ${better1 ? 'stat-better' : ''}">${formattedVal1}</span>
                    </li>
                `;
                
                player2HTML += `
                    <li>
                        <span class="stat-label">${stat.label}</span>
                        <span class="stat-value ${better2 ? 'stat-better' : ''}">${formattedVal2}</span>
                    </li>
                `;
            });
            
            player1HTML += '</ul></div>';
            player2HTML += '</ul></div>';
            
            const vsHTML = `
                <div class="comparison-vs">
                    <div class="vs-badge">VS</div>
                </div>
            `;
            
            statsContainer.innerHTML = player1HTML + vsHTML + player2HTML;
            
            // Highlight overall winner
            setTimeout(() => {
                if (player1Score > player2Score) {
                    document.getElementById('player1-card').classList.add('winner');
                } else if (player2Score > player1Score) {
                    document.getElementById('player2-card').classList.add('winner');
                }
            }, 100);
        }

        function getTeamName(teamId) {
            const team = allTeams.find(t => t.id === teamId);
            return team ? team.short_name : 'Unknown';
        }

        function getPositionName(elementType) {
            const positions = {
                1: 'Goalkeeper',
                2: 'Defender', 
                3: 'Midfielder',
                4: 'Forward'
            };
            return positions[elementType] || 'Unknown';
        }

        function calculatePlayerValue(player) {
            const points = player.total_points || 0;
            const price = (player.now_cost || 40) / 10;
            return (points / price).toFixed(1);
        }

        function toggleAdvancedStats() {
            const toggle = document.getElementById('advanced-stats-toggle');
            if (toggle.checked) {
                showNotification('Advanced stats enabled', 'info');
            } else {
                showNotification('Basic stats view', 'info');
            }
            
            // Re-render comparison if players are selected
            const player1Id = document.getElementById('player1-select').value;
            const player2Id = document.getElementById('player2-select').value;
            
            if (player1Id && player2Id) {
                updateComparison();
            }
        }

        // Team builder functionality
        function openPlayerSelector(position, slot) {
            // Simple alert for demo - in real app would open modal with player selection
            const playerName = prompt(`Select a ${position.toUpperCase()} for slot ${slot + 1}:`);
            if (playerName) {
                addPlayerToTeam(position, slot, playerName, 5.0); // Demo price
            }
        }

        function addPlayerToTeam(position, slot, name, price) {
            if (teamBudget >= price) {
                selectedPlayers[position][slot] = { name, price };
                teamBudget -= price;
                updateTeamDisplay();
                updateBudgetDisplay();
            } else {
                alert('Not enough budget remaining!');
            }
        }

        function updateTeamDisplay() {
            // Update visual display of team slots
            Object.keys(selectedPlayers).forEach(position => {
                selectedPlayers[position].forEach((player, slot) => {
                    const slotElement = document.querySelector(`[onclick="openPlayerSelector('${position}', ${slot})"]`);
                    if (player && slotElement) {
                        slotElement.classList.add('filled');
                        slotElement.innerHTML = `<span class="slot-text">${player.name} (¬£${player.price}m)</span>`;
                    }
                });
            });
        }

        function updateBudgetDisplay() {
            const budgetElement = document.getElementById('budget-remaining');
            if (budgetElement) {
                budgetElement.textContent = `¬£${teamBudget.toFixed(1)}m`;
                
                // Color coding based on budget remaining
                if (teamBudget < 5) {
                    budgetElement.style.color = '#dc3545';
                } else if (teamBudget < 15) {
                    budgetElement.style.color = '#ffc107';
                } else {
                    budgetElement.style.color = '#00ff87';
                }
            }
        }

        function resetTeam() {
            selectedPlayers = {
                gk: [null, null],
                def: [null, null, null, null, null],
                mid: [null, null, null, null, null],
                fwd: [null, null, null]
            };
            teamBudget = 100.0;
            
            // Reset visual display
            document.querySelectorAll('.player-slot').forEach(slot => {
                slot.classList.remove('filled');
                const position = slot.getAttribute('onclick').match(/'(\w+)'/)[1];
                const slotNum = slot.getAttribute('onclick').match(/(\d+)/)[1];
                slot.innerHTML = `<span class="slot-text">+ Add ${position.toUpperCase()}</span>`;
            });
            
            updateBudgetDisplay();
        }


        // Enhanced interactive features
        function animateStatBubbles() {
            const bubbles = document.querySelectorAll('.stat-bubble');
            bubbles.forEach((bubble, index) => {
                setTimeout(() => {
                    bubble.style.opacity = '0';
                    bubble.style.transform = 'translateY(20px)';
                    
                    setTimeout(() => {
                        bubble.style.transition = 'all 0.5s ease';
                        bubble.style.opacity = '1';
                        bubble.style.transform = 'translateY(0)';
                    }, 100);
                }, index * 200);
            });
        }

        // Enhanced notification system
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            let bgColor;
            switch(type) {
                case 'success':
                    bgColor = 'linear-gradient(135deg, #28a745, #20c997)';
                    break;
                case 'error':
                    bgColor = 'linear-gradient(135deg, #dc3545, #e74c3c)';
                    break;
                case 'info':
                    bgColor = 'linear-gradient(135deg, #17a2b8, #007bff)';
                    break;
                default:
                    bgColor = 'linear-gradient(135deg, #6c757d, #495057)';
            }
            
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 10px;
                color: white;
                font-weight: 600;
                z-index: 10001;
                transform: translateX(100%);
                transition: transform 0.3s ease;
                background: ${bgColor};
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            `;
            
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Add some interactive features
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize live stats system
            console.log('Initializing FPL Live Stats System...');
            
            // Load initial data
            updateLiveStats().then(() => {
                console.log('Initial live stats loaded successfully');
                // Populate player comparison dropdowns after stats load
                return populatePlayerDropdowns();
            }).then(() => {
                console.log('Player dropdowns populated successfully');
                showNotification('Player database loaded with live FPL data!', 'success');
            }).catch(error => {
                console.error('Failed to load initial stats:', error);
                showErrorMessage('Failed to load live stats. Using fallback data.');
            });
            
            // Initialize comparison tool with live data
            setTimeout(() => {
                updateComparison();
            }, 2000);
            
            // Animate header stats on load
            setTimeout(animateStatBubbles, 1500);
            
            // Add click effects to captain cards
            document.querySelectorAll('.captain-card').forEach(card => {
                card.addEventListener('click', function() {
                    // Remove active class from all cards
                    document.querySelectorAll('.captain-card').forEach(c => c.classList.remove('selected'));
                    
                    // Add active class to clicked card
                    this.classList.add('selected');
                    
                    // Store selection (in real app, this would save to user's team)
                    const playerName = this.querySelector('.player-name').textContent;
                    console.log('Selected captain:', playerName);
                    
                    // Show success message
                    const originalText = this.querySelector('p').textContent;
                    this.querySelector('p').textContent = '‚úÖ Selected as Captain!';
                    setTimeout(() => {
                        this.querySelector('p').textContent = originalText;
                    }, 2000);
                });
            });

            // Add hover effects to player cards in formation
            document.querySelectorAll('.player-card').forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-8px) scale(1.05)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
            });

            // Add keyboard shortcuts for quick actions
            document.addEventListener('keydown', function(e) {
                // Ctrl+R or F5 to refresh stats
                if ((e.ctrlKey && e.key === 'r') || e.key === 'F5') {
                    e.preventDefault();
                    updateLiveStats();
                }
                
            });

            // Animate cards on scroll
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animation = 'slideInUp 0.6s ease-out';
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.fpl-card').forEach(card => {
                observer.observe(card);
            });

            // Show welcome message with live stats info
            setTimeout(() => {
                showNotification('Live FPL stats system initialized! Use Ctrl+R to refresh manually.', 'info');
            }, 2000);
        });
    </script>
    
    <style>
        .captain-card.selected {
            border-color: #00ff87;
            box-shadow: 0 0 15px rgba(0, 255, 135, 0.3);
        }
    </style>
</body>
</html>