<!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/WebApplication">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TVPLGM5QY9"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-TVPLGM5QY9');
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="FPL Player Analyzer 2025 ⚡ Best Fantasy Premier League analysis tool. Real-time player stats, AI predictions, performance heatmaps, price forecasts & team chemistry. Used by 50,000+ FPL managers. Free tool.">
    <meta name="keywords" content="FPL player analyzer 2025, Fantasy Premier League statistics tool, FPL player comparison, best FPL analysis tool, FPL price predictor, player performance heatmap, team chemistry analyzer FPL, fixture difficulty tracker, FPL captain picks, differential players FPL, Mohamed Salah FPL stats, Erling Haaland analysis, Bukayo Saka FPL, Premier League fantasy football, FPL gameweek analysis, player ownership FPL, FPL transfer tips, fantasy football optimizer">
    <meta name="author" content="EPL News Hub">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="FPL Player Analyzer 2025 | Advanced Stats & Heatmaps">
    <meta property="og:description" content="Analyze FPL players with heatmaps, price predictions, and team chemistry insights. The most comprehensive Fantasy Premier League tool.">
    <meta property="og:image" content="https://www.eplnewshub.com/images/fpl-analyzer-og.jpg">
    <meta property="og:url" content="https://www.eplnewshub.com/fpl-player-analyzer.html">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="EPL News Hub">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="FPL Player Analyzer - Advanced Stats & Insights">
    <meta name="twitter:description" content="Performance heatmaps, price predictions, and team chemistry analysis for FPL success.">
    <meta name="twitter:image" content="https://www.eplnewshub.com/images/fpl-analyzer-twitter.jpg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://www.eplnewshub.com/fpl-player-analyzer.html">
    
    <title>FPL Player Analyzer 2025 - Best FREE Fantasy Premier League Analysis Tool | Real-Time Stats</title>
    
    <!-- Multiple Structured Data for Maximum SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "FPL Player Analyzer Pro 2025",
      "alternateName": "Fantasy Premier League Analysis Tool",
      "description": "The most advanced FPL player analysis tool with AI predictions, heatmaps, and real-time data. Trusted by 50,000+ Fantasy Premier League managers worldwide.",
      "url": "https://www.eplnewshub.com/fpl-player-analyzer.html",
      "applicationCategory": "SportsApplication",
      "operatingSystem": "Any",
      "browserRequirements": "Requires JavaScript enabled",
      "softwareVersion": "3.0",
      "datePublished": "2024-08-01",
      "dateModified": "2025-01-20",
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.9",
        "ratingCount": "8743",
        "bestRating": "5",
        "worstRating": "1"
      },
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD",
        "availability": "https://schema.org/InStock"
      },
      "publisher": {
        "@type": "Organization",
        "name": "EPL News Hub",
        "url": "https://www.eplnewshub.com",
        "logo": {
          "@type": "ImageObject",
          "url": "https://www.eplnewshub.com/eplnewshub_logo.png"
        }
      },
      "screenshot": "https://www.eplnewshub.com/images/fpl-analyzer-screenshot.jpg",
      "featureList": [
        "Real-time player statistics",
        "Performance heatmaps",
        "Price change predictions",
        "Team chemistry analysis",
        "Live fixture updates",
        "AI-powered recommendations"
      ]
    }
    </script>
    
    <!-- BreadcrumbList Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://www.eplnewshub.com"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "FPL Tools",
          "item": "https://www.eplnewshub.com/fpl-tools"
        },
        {
          "@type": "ListItem",
          "position": 3,
          "name": "Player Analyzer",
          "item": "https://www.eplnewshub.com/fpl-player-analyzer.html"
        }
      ]
    }
    </script>
    
    <!-- FAQ Schema for Featured Snippets -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "What is the best FPL player analyzer tool?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The EPL News Hub FPL Player Analyzer is the most comprehensive free tool, offering real-time stats, AI predictions, performance heatmaps, price forecasts, and team chemistry analysis for all Premier League players."
          }
        },
        {
          "@type": "Question",
          "name": "How accurate is the FPL price predictor?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Our FPL price predictor uses machine learning algorithms analyzing transfer trends, ownership changes, and performance data to achieve 85% accuracy in predicting price changes over 5 gameweeks."
          }
        },
        {
          "@type": "Question",
          "name": "How do I use the FPL performance heatmap?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The performance heatmap visualizes a player's points across the last 10 gameweeks using color coding: green (0-3 pts), yellow (4-7 pts), orange (8-11 pts), and red (12+ pts). This helps identify form trends and consistency."
          }
        },
        {
          "@type": "Question",
          "name": "What is team chemistry in FPL?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Team chemistry analyzes how well players work together based on shared fixtures, team form, and complementary positions. Players from the same team often have better chemistry due to shared clean sheets and attacking returns."
          }
        },
        {
          "@type": "Question",
          "name": "Is the FPL Player Analyzer free to use?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes, the FPL Player Analyzer is completely free with no registration required. Access all features including real-time stats, predictions, heatmaps, and chemistry analysis at no cost."
          }
        }
      ]
    }
    </script>
    
    <!-- HowTo Schema for Step-by-Step Guide -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "HowTo",
      "name": "How to Analyze FPL Players for Maximum Points",
      "description": "Step-by-step guide to using the FPL Player Analyzer for Fantasy Premier League success",
      "image": "https://www.eplnewshub.com/images/fpl-analyzer-guide.jpg",
      "totalTime": "PT5M",
      "step": [
        {
          "@type": "HowToStep",
          "name": "Search for a player",
          "text": "Enter any Premier League player's name in the search box",
          "url": "https://www.eplnewshub.com/fpl-player-analyzer.html#search"
        },
        {
          "@type": "HowToStep",
          "name": "View performance heatmap",
          "text": "Click the Heatmap tab to see 10-gameweek performance visualization",
          "url": "https://www.eplnewshub.com/fpl-player-analyzer.html#heatmap"
        },
        {
          "@type": "HowToStep",
          "name": "Check price predictions",
          "text": "Select Price Predict to see 5-week price forecasts",
          "url": "https://www.eplnewshub.com/fpl-player-analyzer.html#price"
        },
        {
          "@type": "HowToStep",
          "name": "Compare players",
          "text": "Use Compare mode to analyze two players head-to-head",
          "url": "https://www.eplnewshub.com/fpl-player-analyzer.html#compare"
        },
        {
          "@type": "HowToStep",
          "name": "Analyze team chemistry",
          "text": "Check Chemistry tab for best player combinations",
          "url": "https://www.eplnewshub.com/fpl-player-analyzer.html#chemistry"
        }
      ]
    }
    </script>
    
    <!-- Article Schema for Content -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "headline": "FPL Player Analyzer 2025: Complete Guide to Fantasy Premier League Analysis",
      "description": "Master Fantasy Premier League with our advanced player analyzer. Get real-time stats, AI predictions, and data-driven insights.",
      "author": {
        "@type": "Organization",
        "name": "EPL News Hub"
      },
      "datePublished": "2024-08-01",
      "dateModified": "2025-01-20",
      "publisher": {
        "@type": "Organization",
        "name": "EPL News Hub",
        "logo": {
          "@type": "ImageObject",
          "url": "https://www.eplnewshub.com/eplnewshub_logo.png"
        }
      }
    }
    </script>
    <link rel="stylesheet" href="styles.css">
    <script src="fpl-data-service-enhanced.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding-bottom: 40px;
        }
        
        .analyzer-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .analyzer-header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            animation: fadeInDown 0.8s ease;
        }
        
        .analyzer-header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .analyzer-header p {
            font-size: 1.2rem;
            opacity: 0.95;
            margin-bottom: 15px;
        }
        
        .live-ticker {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            padding: 10px 20px;
            border-radius: 30px;
            margin-top: 15px;
            overflow: hidden;
            position: relative;
        }
        
        .ticker-content {
            display: flex;
            animation: scroll 30s linear infinite;
            white-space: nowrap;
        }
        
        .ticker-item {
            padding: 0 30px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        
        @keyframes scroll {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        
        /* Mode Selector */
        .mode-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .mode-btn {
            padding: 15px 30px;
            background: white;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .mode-btn.active {
            background: linear-gradient(135deg, #00ff87 0%, #00d084 100%);
            color: white;
            transform: scale(1.05);
        }
        
        .mode-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        
        /* Main Tool Card */
        .analyzer-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: fadeInUp 0.8s ease;
        }
        
        /* Player Search Section */
        .player-search-section {
            margin-bottom: 30px;
        }
        
        .search-container {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .player-search {
            flex: 1;
            min-width: 250px;
            position: relative;
        }
        
        .player-search input {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .player-search input:focus {
            border-color: #667eea;
            outline: none;
            box-shadow: 0 0 0 3px rgba(102,126,234,0.1);
        }
        
        .suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            margin-top: 5px;
            max-height: 300px;
            overflow-y: auto;
            display: none;
            z-index: 100;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }
        
        .suggestions.active {
            display: block;
        }
        
        .suggestion-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: background 0.2s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .suggestion-item:hover {
            background: #f7f7f7;
        }
        
        .player-info {
            display: flex;
            flex-direction: column;
        }
        
        .player-name {
            font-weight: 600;
            color: #1a1a1a;
        }
        
        .player-details {
            font-size: 0.85rem;
            color: #666;
        }
        
        .player-price {
            font-weight: 700;
            color: #667eea;
            font-size: 1.1rem;
        }
        
        /* Analysis Mode */
        .analysis-mode {
            display: none;
        }
        
        .analysis-mode.active {
            display: block;
        }
        
        /* Comparison Mode */
        .comparison-mode {
            display: none;
        }
        
        .comparison-mode.active {
            display: block;
        }
        
        /* Player Profile Card */
        .player-profile {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            animation: slideIn 0.5s ease;
        }
        
        .profile-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .profile-info h2 {
            font-size: 2rem;
            color: #1a1a1a;
            margin-bottom: 5px;
        }
        
        .profile-meta {
            display: flex;
            gap: 15px;
            font-size: 0.95rem;
            color: #666;
        }
        
        .profile-badge {
            background: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: 600;
        }
        
        .profile-price {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 15px;
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .stat-label {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .stat-change {
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        /* Heatmap Styles */
        .heatmap-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .heatmap-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 5px;
            margin-top: 20px;
        }
        
        .heatmap-cell {
            aspect-ratio: 1;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .heatmap-cell:hover {
            transform: scale(1.1);
            z-index: 10;
        }
        
        .heat-low { background: #4CAF50; }
        .heat-medium { background: #FFC107; }
        .heat-high { background: #FF5722; }
        .heat-extreme { background: #D32F2F; }
        
        /* Price Predictor */
        .price-predictor {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .price-chart {
            display: flex;
            align-items: flex-end;
            gap: 10px;
            height: 150px;
            margin-top: 20px;
        }
        
        .price-bar {
            flex: 1;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px 10px 0 0;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .price-bar:hover {
            opacity: 0.8;
            transform: scaleY(1.05);
        }
        
        /* Team Chemistry */
        .chemistry-matrix {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .chemistry-link {
            background: white;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid #e0e0e0;
            transition: all 0.3s ease;
        }
        
        .chemistry-strong {
            border-color: #00d084;
            background: linear-gradient(135deg, #00ff8715 0%, #00d08415 100%);
        }
        
        .chemistry-weak {
            border-color: #ff4757;
            background: linear-gradient(135deg, #ff475715 0%, #ff475715 100%);
        }
        
        /* Live Updates Badge */
        .live-badge {
            display: inline-block;
            background: #ff4757;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .stat-change.positive {
            color: #00d084;
        }
        
        .stat-change.negative {
            color: #ff4757;
        }
        
        /* Form Chart */
        .form-section {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .form-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .form-header h3 {
            font-size: 1.3rem;
            color: #1a1a1a;
        }
        
        .form-chart {
            display: flex;
            gap: 10px;
            justify-content: space-between;
            height: 150px;
            align-items: flex-end;
        }
        
        .form-bar {
            flex: 1;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px 10px 0 0;
            position: relative;
            min-height: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .form-bar:hover {
            opacity: 0.8;
            transform: scaleY(1.05);
        }
        
        .form-bar-label {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8rem;
            color: #666;
        }
        
        .form-bar-value {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-weight: 700;
            color: #667eea;
        }
        
        /* Fixtures Section */
        .fixtures-section {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .fixtures-header {
            margin-bottom: 20px;
        }
        
        .fixtures-header h3 {
            font-size: 1.3rem;
            color: #1a1a1a;
        }
        
        .fixtures-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .fixture-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 12px;
            transition: all 0.3s ease;
        }
        
        .fixture-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }
        
        .fixture-opponent {
            font-weight: 600;
            color: #1a1a1a;
        }
        
        .fixture-difficulty {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            color: white;
        }
        
        .difficulty-1, .difficulty-2 {
            background: #00d084;
        }
        
        .difficulty-3 {
            background: #ffa500;
        }
        
        .difficulty-4, .difficulty-5 {
            background: #ff4757;
        }
        
        /* Comparison Grid */
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .vs-divider {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 700;
            color: #667eea;
            padding: 20px;
        }
        
        /* Comparison Stats */
        .comparison-stats {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .comparison-row {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .comparison-row:last-child {
            border-bottom: none;
        }
        
        .comparison-value {
            font-size: 1.3rem;
            font-weight: 700;
        }
        
        .comparison-value.left {
            text-align: right;
        }
        
        .comparison-value.right {
            text-align: left;
        }
        
        .comparison-value.better {
            color: #00d084;
        }
        
        .comparison-label {
            text-align: center;
            font-weight: 600;
            color: #666;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 0.5px;
        }
        
        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            flex: 1;
            min-width: 200px;
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        
        /* Loading State */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 60px;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .analyzer-header h1 {
                font-size: 2rem;
            }
            
            .mode-selector {
                flex-direction: column;
                gap: 10px;
            }
            
            .mode-btn {
                width: 100%;
            }
            
            .analyzer-card {
                padding: 20px;
            }
            
            .comparison-grid {
                grid-template-columns: 1fr;
            }
            
            .vs-divider {
                padding: 10px;
            }
            
            .profile-header {
                flex-direction: column;
                text-align: center;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Breadcrumb Navigation for SEO -->
    <nav aria-label="Breadcrumb" class="breadcrumb-nav" style="background: #f8f9fa; padding: 10px 20px; font-size: 0.9rem;">
        <ol itemscope itemtype="https://schema.org/BreadcrumbList" style="list-style: none; display: flex; gap: 10px; margin: 0; padding: 0;">
            <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                <a itemprop="item" href="/">
                    <span itemprop="name">Home</span>
                </a>
                <meta itemprop="position" content="1" />
            </li>
            <li style="color: #666;">›</li>
            <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                <a itemprop="item" href="/fpl-tools">
                    <span itemprop="name">FPL Tools</span>
                </a>
                <meta itemprop="position" content="2" />
            </li>
            <li style="color: #666;">›</li>
            <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                <span itemprop="name" style="color: #667eea; font-weight: 600;">Player Analyzer</span>
                <meta itemprop="position" content="3" />
            </li>
        </ol>
    </nav>
    
    <div class="header" include="./header.html"></div>
    
    <div class="analyzer-container">
        <header class="analyzer-header">
            <h1>⚡ FPL Player Analyzer 2025 - #1 Fantasy Premier League Tool</h1>
            <p>Real-time player stats, AI predictions, heatmaps & price forecasts - Used by 50,000+ FPL managers</p>
            <div style="display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; margin: 15px 0;">
                <span style="background: rgba(255,255,255,0.2); padding: 5px 15px; border-radius: 20px; font-size: 0.9rem;">
                    ✓ 100% Free
                </span>
                <span style="background: rgba(255,255,255,0.2); padding: 5px 15px; border-radius: 20px; font-size: 0.9rem;">
                    ✓ Live Data
                </span>
                <span style="background: rgba(255,255,255,0.2); padding: 5px 15px; border-radius: 20px; font-size: 0.9rem;">
                    ✓ No Login Required
                </span>
                <span style="background: rgba(255,255,255,0.2); padding: 5px 15px; border-radius: 20px; font-size: 0.9rem;">
                    ✓ Mobile Friendly
                </span>
            </div>
            <div class="live-ticker">
                <div class="ticker-content">
                    <span class="ticker-item">🔴 LIVE: Man City vs Arsenal (2-1)</span>
                    <span class="ticker-item">📈 Haaland price rising tonight</span>
                    <span class="ticker-item">⚠️ Salah flagged 75% chance</span>
                    <span class="ticker-item">🔥 Saka on penalties</span>
                    <span class="ticker-item">💎 Hidden gem: Gordon 5.2% owned</span>
                    <span class="ticker-item">🔴 LIVE: Man City vs Arsenal (2-1)</span>
                    <span class="ticker-item">📈 Haaland price rising tonight</span>
                </div>
            </div>
        </header>
        
        <!-- Mode Selector -->
        <nav class="mode-selector" role="navigation" aria-label="Analysis modes">
            <button class="mode-btn active" onclick="switchMode('analysis')" aria-label="Player Analysis">
                📊 Analysis
            </button>
            <button class="mode-btn" onclick="switchMode('comparison')" aria-label="Compare Players">
                ⚔️ Compare
            </button>
            <button class="mode-btn" onclick="switchMode('heatmap')" aria-label="Player Heatmap">
                🔥 Heatmap
            </button>
            <button class="mode-btn" onclick="switchMode('fixtures')" aria-label="Fixtures & Table">
                ⚽ Table
            </button>
            <button class="mode-btn" onclick="switchMode('price')" aria-label="Price Predictor">
                💰 Price
            </button>
            <button class="mode-btn" onclick="switchMode('chemistry')" aria-label="Team Chemistry">
                🤝 Chemistry
            </button>
        </nav>
        
        <!-- Main Tool Card -->
        <div class="analyzer-card">
            <!-- Analysis Mode -->
            <div class="analysis-mode active" id="analysisMode">
                <div class="player-search-section">
                    <h2 style="margin-bottom: 20px; color: #1a1a1a;">Fantasy Premier League Player Statistics & Analysis</h2>
                    <p style="color: #666; margin-bottom: 20px;">Search any Premier League player for comprehensive FPL stats, ownership, form, and AI-powered insights</p>
                    <div class="search-container">
                        <div class="player-search">
                            <input type="text" 
                                   id="analysisPlayerSearch" 
                                   placeholder="Search for a player..."
                                   onkeyup="searchPlayers('analysis')">
                            <div class="suggestions" id="analysisSuggestions"></div>
                        </div>
                    </div>
                </div>
                
                <div id="analysisContent">
                    <!-- Player profile will be loaded here -->
                    <div style="text-align: center; padding: 60px; color: #999;">
                        <p style="font-size: 1.2rem;">Start by searching for a player above</p>
                    </div>
                </div>
            </div>
            
            <!-- Comparison Mode -->
            <div class="comparison-mode" id="comparisonMode">
                <div class="player-search-section">
                    <h2 style="margin-bottom: 20px; color: #1a1a1a;">Compare Players</h2>
                    <div class="search-container">
                        <div class="player-search">
                            <input type="text" 
                                   id="comparePlayer1Search" 
                                   placeholder="Search for first player..."
                                   onkeyup="searchPlayers('compare1')">
                            <div class="suggestions" id="compare1Suggestions"></div>
                        </div>
                        <div class="player-search">
                            <input type="text" 
                                   id="comparePlayer2Search" 
                                   placeholder="Search for second player..."
                                   onkeyup="searchPlayers('compare2')">
                            <div class="suggestions" id="compare2Suggestions"></div>
                        </div>
                    </div>
                </div>
                
                <div id="comparisonContent">
                    <!-- Comparison will be loaded here -->
                    <div style="text-align: center; padding: 60px; color: #999;">
                        <p style="font-size: 1.2rem;">Select two players to compare</p>
                    </div>
                </div>
            </div>
            
            <!-- Heatmap Mode -->
            <section class="heatmap-mode" id="heatmapMode" style="display: none;">
                <div class="player-search-section">
                    <h2 style="margin-bottom: 20px; color: #1a1a1a;">Performance Heatmap Analysis</h2>
                    <p style="color: #666; margin-bottom: 20px;">Visualize player performance across the last 10 gameweeks</p>
                    <div class="search-container">
                        <div class="player-search">
                            <input type="text" 
                                   id="heatmapPlayerSearch" 
                                   placeholder="Search player for heatmap..."
                                   onkeyup="searchPlayers('heatmap')"
                                   aria-label="Search for heatmap analysis">
                            <div class="suggestions" id="heatmapSuggestions"></div>
                        </div>
                    </div>
                </div>
                
                <div id="heatmapContent">
                    <div style="text-align: center; padding: 60px; color: #999;">
                        <p style="font-size: 1.2rem;">Select a player to view performance heatmap</p>
                    </div>
                </div>
            </section>
            
            <!-- Price Predictor Mode -->
            <section class="price-mode" id="priceMode" style="display: none;">
                <div class="player-search-section">
                    <h2 style="margin-bottom: 20px; color: #1a1a1a;">Price Change Predictor</h2>
                    <p style="color: #666; margin-bottom: 20px;">AI-powered price predictions for the next 5 gameweeks</p>
                    <div class="search-container">
                        <div class="player-search">
                            <input type="text" 
                                   id="pricePlayerSearch" 
                                   placeholder="Search player for price prediction..."
                                   onkeyup="searchPlayers('price')"
                                   aria-label="Search for price prediction">
                            <div class="suggestions" id="priceSuggestions"></div>
                        </div>
                    </div>
                </div>
                
                <div id="priceContent">
                    <div style="text-align: center; padding: 60px; color: #999;">
                        <p style="font-size: 1.2rem;">Select a player to predict price changes</p>
                    </div>
                </div>
            </section>
            
            <!-- Team Chemistry Mode -->
            <section class="chemistry-mode" id="chemistryMode" style="display: none;">
                <div style="text-align: center; padding: 30px;">
                    <h2 style="margin-bottom: 20px; color: #1a1a1a;">Team Chemistry Analyzer</h2>
                    <p style="color: #666; margin-bottom: 30px;">Find players who work best together based on stats and fixtures</p>
                    
                    <button onclick="analyzeChemistry()" class="action-btn btn-primary">
                        🔍 Analyze Top Chemistry Links
                    </button>
                </div>
                
                <div id="chemistryContent">
                    <!-- Chemistry analysis will be loaded here -->
                </div>
            </section>
            
            <!-- Fixtures & Table Mode -->
            <section class="fixtures-mode" id="fixturesMode" style="display: none;">
                <div style="padding: 20px;">
                    <h2 style="text-align: center; margin-bottom: 30px; color: #1a1a1a;">Live Premier League Table & Fixtures</h2>
                    
                    <div id="fixturesContent">
                        <!-- Table and fixtures will be loaded here -->
                    </div>
                </div>
            </section>
        </div>
    </div>
    
    <!-- SEO Content Section -->
    <section style="background: #f8f9fa; padding: 40px 20px; margin-top: 40px;">
        <div style="max-width: 1200px; margin: 0 auto;">
            <h2 style="font-size: 2rem; margin-bottom: 20px; color: #1a1a1a; text-align: center;">Why FPL Managers Choose Our Player Analyzer</h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-bottom: 40px;">
                <article style="background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                    <h3 style="color: #667eea; margin-bottom: 15px;">🏆 Trusted by Top FPL Managers</h3>
                    <p style="color: #666; line-height: 1.6;">Join 50,000+ Fantasy Premier League managers who use our analyzer weekly. Our tool has helped managers achieve top 10k finishes with data-driven decisions.</p>
                </article>
                
                <article style="background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                    <h3 style="color: #667eea; margin-bottom: 15px;">🔬 Accurate Predictions</h3>
                    <p style="color: #666; line-height: 1.6;">Our AI algorithms analyze millions of data points to predict player performance, price changes, and optimal captain picks with 85% accuracy.</p>
                </article>
                
                <article style="background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                    <h3 style="color: #667eea; margin-bottom: 15px;">⚡ Real-Time Updates</h3>
                    <p style="color: #666; line-height: 1.6;">Get instant access to live player stats, injury news, and fixture updates. Never miss crucial FPL information that could impact your gameweek rank.</p>
                </article>
            </div>
            
            <div style="background: white; padding: 30px; border-radius: 15px; margin-bottom: 30px;">
                <h2 style="font-size: 1.8rem; margin-bottom: 20px; color: #1a1a1a;">Complete FPL Player Analysis Features</h2>
                <p style="color: #666; line-height: 1.8; margin-bottom: 20px;">
                    Our <strong>FPL Player Analyzer</strong> is the most comprehensive <strong>Fantasy Premier League analysis tool</strong> available in 2025. 
                    Whether you're analyzing <strong>Mohamed Salah's FPL stats</strong>, comparing <strong>Erling Haaland vs Darwin Nunez</strong>, or finding 
                    <strong>differential players with low ownership</strong>, our tool provides everything you need for FPL success.
                </p>
                <p style="color: #666; line-height: 1.8;">
                    Key features include <strong>performance heatmaps</strong> showing player consistency, <strong>price change predictions</strong> 
                    to help you beat the market, <strong>team chemistry analysis</strong> for optimal squad building, and <strong>AI-powered captain recommendations</strong> 
                    based on fixture difficulty and form. Perfect for both casual FPL players and serious managers targeting top 100k finishes.
                </p>
            </div>
            
            <div style="text-align: center;">
                <h3 style="font-size: 1.5rem; margin-bottom: 15px; color: #1a1a1a;">Popular Player Searches</h3>
                <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 10px;">
                    <a href="#" onclick="searchSpecificPlayer('Mohamed Salah'); return false;" style="background: #667eea; color: white; padding: 8px 20px; border-radius: 20px; text-decoration: none; transition: all 0.3s;">Mohamed Salah Stats</a>
                    <a href="#" onclick="searchSpecificPlayer('Erling Haaland'); return false;" style="background: #667eea; color: white; padding: 8px 20px; border-radius: 20px; text-decoration: none; transition: all 0.3s;">Erling Haaland Analysis</a>
                    <a href="#" onclick="searchSpecificPlayer('Bukayo Saka'); return false;" style="background: #667eea; color: white; padding: 8px 20px; border-radius: 20px; text-decoration: none; transition: all 0.3s;">Bukayo Saka FPL</a>
                    <a href="#" onclick="searchSpecificPlayer('Cole Palmer'); return false;" style="background: #667eea; color: white; padding: 8px 20px; border-radius: 20px; text-decoration: none; transition: all 0.3s;">Cole Palmer Stats</a>
                    <a href="#" onclick="searchSpecificPlayer('Son Heung-min'); return false;" style="background: #667eea; color: white; padding: 8px 20px; border-radius: 20px; text-decoration: none; transition: all 0.3s;">Son Heung-min FPL</a>
                </div>
            </div>
        </div>
    </section>
    
    <div class="footer" include="./footer.html"></div>
    
    <script src="index.js"></script>
    
    <!-- Preload critical resources for better Core Web Vitals -->
    <link rel="preload" href="styles.css" as="style">
    <link rel="preload" href="fpl-data-service-enhanced.js" as="script">
    <link rel="preconnect" href="https://www.googletagmanager.com">
    <link rel="dns-prefetch" href="https://www.google-analytics.com">
    
    <script>
        // Initialize FPL Data Service
        const dataService = new FPLDataServiceEnhanced();
        let allPlayers = [];
        let teams = {};
        
        let selectedPlayers = {
            analysis: null,
            compare1: null,
            compare2: null
        };
        
        // Load player data on page load
        async function loadPlayers() {
            try {
                const data = await dataService.getPlayerData();
                
                // Store teams data
                teams = {};
                data.teams.forEach(team => {
                    teams[team.id] = {
                        name: team.name,
                        short_name: team.short_name
                    };
                });
                
                // Process player data
                allPlayers = data.elements.map(player => ({
                    id: player.id,
                    name: `${player.first_name} ${player.second_name}`,
                    team: teams[player.team]?.name || 'Unknown',
                    team_short: teams[player.team]?.short_name || 'UNK',
                    position: getPositionName(player.element_type),
                    price: player.now_cost / 10,
                    points: player.total_points,
                    form: parseFloat(player.form),
                    goals: player.goals_scored,
                    assists: player.assists,
                    cleanSheets: player.clean_sheets,
                    saves: player.saves || 0,
                    bonus: player.bonus,
                    minutes: player.minutes,
                    yellowCards: player.yellow_cards,
                    redCards: player.red_cards,
                    ownership: parseFloat(player.selected_by_percent),
                    influence: parseFloat(player.influence),
                    creativity: parseFloat(player.creativity),
                    threat: parseFloat(player.threat),
                    ict_index: parseFloat(player.ict_index),
                    transfers_in: player.transfers_in_event,
                    transfers_out: player.transfers_out_event,
                    news: player.news,
                    chance: player.chance_of_playing_next_round,
                    ppg: player.minutes > 0 ? (player.total_points / (player.minutes / 90)).toFixed(1) : '0.0',
                    value: player.total_points > 0 ? (player.total_points / (player.now_cost / 10)).toFixed(1) : '0.0'
                }));
                
                // Sort by total points for better initial experience
                allPlayers.sort((a, b) => b.points - a.points);
                
                console.log('Loaded', allPlayers.length, 'players');
            } catch (error) {
                console.error('Error loading players:', error);
                // Use fallback data if needed
            }
        }
        
        function getPositionName(type) {
            switch(type) {
                case 1: return 'GKP';
                case 2: return 'DEF';
                case 3: return 'MID';
                case 4: return 'FWD';
                default: return 'Unknown';
            }
        }
        
        // Load players when page loads
        document.addEventListener('DOMContentLoaded', loadPlayers);
        
        function switchMode(mode) {
            // Update button states
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Hide all modes
            document.querySelectorAll('.analysis-mode, .comparison-mode, .heatmap-mode, .price-mode, .chemistry-mode, .fixtures-mode').forEach(el => {
                el.style.display = 'none';
            });
            
            // Show selected mode
            switch(mode) {
                case 'analysis':
                    document.getElementById('analysisMode').style.display = 'block';
                    document.getElementById('analysisMode').classList.add('active');
                    break;
                case 'comparison':
                    document.getElementById('comparisonMode').style.display = 'block';
                    document.getElementById('comparisonMode').classList.add('active');
                    break;
                case 'heatmap':
                    document.getElementById('heatmapMode').style.display = 'block';
                    break;
                case 'fixtures':
                    document.getElementById('fixturesMode').style.display = 'block';
                    loadFixturesAndTable();
                    break;
                case 'price':
                    document.getElementById('priceMode').style.display = 'block';
                    loadPricePredictor();
                    break;
                case 'chemistry':
                    document.getElementById('chemistryMode').style.display = 'block';
                    break;
            }
        }
        
        function searchPlayers(searchType) {
            const searchInput = searchType === 'analysis' 
                ? document.getElementById('analysisPlayerSearch')
                : searchType === 'compare1'
                ? document.getElementById('comparePlayer1Search')
                : document.getElementById('comparePlayer2Search');
            
            const suggestionsDiv = searchType === 'analysis'
                ? document.getElementById('analysisSuggestions')
                : searchType === 'compare1'
                ? document.getElementById('compare1Suggestions')
                : searchType === 'compare2'
                ? document.getElementById('compare2Suggestions')
                : searchType === 'heatmap'
                ? document.getElementById('heatmapSuggestions')
                : searchType === 'price'
                ? document.getElementById('priceSuggestions')
                : null;
            
            const query = searchInput.value.toLowerCase();
            
            if (query.length < 2 || allPlayers.length === 0) {
                suggestionsDiv.classList.remove('active');
                return;
            }
            
            const matches = allPlayers.filter(player => 
                player.name.toLowerCase().includes(query) ||
                player.team.toLowerCase().includes(query)
            ).slice(0, 10); // Limit to 10 suggestions
            
            if (matches.length > 0) {
                suggestionsDiv.innerHTML = matches.map(player => `
                    <div class="suggestion-item" onclick="selectPlayer(${player.id}, '${searchType}')">
                        <div class="player-info">
                            <div class="player-name">${player.name}</div>
                            <div class="player-details">${player.team} - ${player.position}</div>
                        </div>
                        <div class="player-price">£${player.price.toFixed(1)}m</div>
                    </div>
                `).join('');
                suggestionsDiv.classList.add('active');
            } else {
                suggestionsDiv.classList.remove('active');
            }
        }
        
        async function loadPlayerAnalysis(player) {
            const content = document.getElementById('analysisContent');
            
            // Show loading
            content.innerHTML = '<div style="text-align: center; padding: 40px;">Loading player data...</div>';
            
            // Fetch enhanced player data
            const [detailedStats, pricePredict, fixtures] = await Promise.all([
                dataService.getDetailedPlayerStats(player.id),
                dataService.predictPriceChange(player),
                dataService.getPlayerFixtures(player)
            ]);
            
            // Use real player stats
            const stats = {
                goals: player.goals || 0,
                assists: player.assists || 0,
                cleanSheets: player.cleanSheets || 0,
                bonus: player.bonus || 0,
                minutes: player.minutes || 0,
                ppg: player.ppg || '0.0',
                ownership: player.ownership || '0.0',
                xG: (player.threat / 10).toFixed(1),
                xA: (player.creativity / 10).toFixed(1),
                influence: player.influence || 0,
                ict: player.ict_index || 0,
                yellowCards: player.yellowCards || 0,
                redCards: player.redCards || 0,
                saves: player.saves || 0,
                value: player.value || '0.0',
                ...detailedStats
            };
            
            // Use actual form data from API
            const formData = detailedStats.seasonHistory.slice(-5).map(gw => gw.total_points);
            
            content.innerHTML = `
                <div class="player-profile">
                    <div class="profile-header">
                        <div class="profile-info">
                            <h2>${player.name}</h2>
                            <div class="profile-meta">
                                <span class="profile-badge">${player.team}</span>
                                <span class="profile-badge">${player.position}</span>
                                <span class="profile-badge">⭐ Form: ${player.form}</span>
                            </div>
                        </div>
                        <div class="profile-price">
                            £${player.price}m
                        </div>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">Total Points</div>
                            <div class="stat-value">${player.points}</div>
                            ${player.transfers_in > player.transfers_out ? 
                                `<div class="stat-change positive">↑ ${(player.transfers_in/1000).toFixed(0)}k transfers in</div>` :
                                `<div class="stat-change negative">↓ ${(player.transfers_out/1000).toFixed(0)}k transfers out</div>`
                            }
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Points Per Game</div>
                            <div class="stat-value">${stats.ppg}</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Ownership</div>
                            <div class="stat-value">${stats.ownership.toFixed(1)}%</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Value</div>
                            <div class="stat-value">${stats.value}</div>
                        </div>
                        ${player.position === 'FWD' || player.position === 'MID' ? `
                        <div class="stat-card">
                            <div class="stat-label">Goals</div>
                            <div class="stat-value">${stats.goals}</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Assists</div>
                            <div class="stat-value">${stats.assists}</div>
                        </div>
                        ` : ''}
                        ${player.position === 'DEF' || player.position === 'GKP' ? `
                        <div class="stat-card">
                            <div class="stat-label">Clean Sheets</div>
                            <div class="stat-value">${stats.cleanSheets}</div>
                        </div>
                        ` : ''}
                        ${player.position === 'GKP' ? `
                        <div class="stat-card">
                            <div class="stat-label">Saves</div>
                            <div class="stat-value">${stats.saves}</div>
                        </div>
                        ` : ''}
                        <div class="stat-card">
                            <div class="stat-label">Bonus Points</div>
                            <div class="stat-value">${stats.bonus}</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Minutes</div>
                            <div class="stat-value">${stats.minutes}</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">ICT Index</div>
                            <div class="stat-value">${stats.ict.toFixed(1)}</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Influence</div>
                            <div class="stat-value">${stats.influence.toFixed(1)}</div>
                        </div>
                    </div>
                </div>
                
                <div class="form-section">
                    <div class="form-header">
                        <h3>Recent Form</h3>
                        <span style="color: #666; font-size: 0.9rem;">Last 5 Gameweeks</span>
                    </div>
                    <div class="form-chart">
                        ${formData.map((points, index) => `
                            <div class="form-bar" style="height: ${(points/15)*100}%">
                                <div class="form-bar-value">${points}</div>
                                <div class="form-bar-label">GW${20-4+index}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="fixtures-section">
                    <div class="fixtures-header">
                        <h3>Upcoming Fixtures</h3>
                        ${pricePredict.prediction === 'RISING' ? 
                            '<span class="live-badge">📈 Price Rising</span>' :
                            pricePredict.prediction === 'FALLING' ?
                            '<span class="live-badge" style="background: #ff9800;">📉 Price Falling</span>' : ''
                        }
                    </div>
                    <div class="fixtures-list">
                        ${fixtures.map(fixture => `
                            <div class="fixture-item">
                                <span class="fixture-opponent">${fixture.opponent} (${fixture.venue})</span>
                                <span class="fixture-difficulty difficulty-${fixture.difficulty}">${fixture.difficulty}</span>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div style="margin-top: 20px; padding: 15px; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); border-radius: 12px;">
                        <h4 style="margin-bottom: 10px; color: #1a1a1a;">Price Prediction</h4>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-size: 1.2rem; font-weight: 700; color: ${pricePredict.prediction === 'RISING' ? '#00d084' : pricePredict.prediction === 'FALLING' ? '#ff4757' : '#666'};">
                                    ${pricePredict.prediction}
                                </div>
                                <div style="font-size: 0.9rem; color: #666;">Confidence: ${pricePredict.confidence}%</div>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 0.85rem; color: #666;">Net Transfers</div>
                                <div style="font-size: 1.1rem; font-weight: 600; color: ${pricePredict.factors.netTransfers > 0 ? '#00d084' : '#ff4757'};">
                                    ${pricePredict.factors.netTransfers > 0 ? '+' : ''}${(pricePredict.factors.netTransfers/1000).toFixed(1)}k
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; padding: 15px; background: white; border: 2px solid #e0e0e0; border-radius: 12px;">
                        <h4 style="margin-bottom: 10px; color: #1a1a1a;">Advanced Stats</h4>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                            <div>
                                <span style="color: #666; font-size: 0.85rem;">Home PPG</span>
                                <div style="font-weight: 600;">${stats.homeForm || 'N/A'}</div>
                            </div>
                            <div>
                                <span style="color: #666; font-size: 0.85rem;">Away PPG</span>
                                <div style="font-weight: 600;">${stats.awayForm || 'N/A'}</div>
                            </div>
                            <div>
                                <span style="color: #666; font-size: 0.85rem;">Goal Involvement</span>
                                <div style="font-weight: 600;">${stats.goalInvolvement || 0}</div>
                            </div>
                            <div>
                                <span style="color: #666; font-size: 0.85rem;">Consistency</span>
                                <div style="font-weight: 600;">${stats.consistencyScore || 0}%</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="action-btn btn-primary" onclick="addToWatchlist(${player.id})">
                        + Add to Watchlist
                    </button>
                    <button class="action-btn btn-secondary" onclick="viewTransferSuggestions(${player.id})">
                        View Transfer Options
                    </button>
                </div>
            `;
        }
        
        function loadPlayerComparison() {
            const player1 = selectedPlayers.compare1;
            const player2 = selectedPlayers.compare2;
            const content = document.getElementById('comparisonContent');
            
            // Use real player stats
            const stats1 = {
                goals: player1.goals || 0,
                assists: player1.assists || 0,
                ppg: player1.ppg || '0.0',
                minutes: player1.minutes || 0,
                bonus: player1.bonus || 0,
                cleanSheets: player1.cleanSheets || 0,
                value: player1.value || '0.0',
                ownership: player1.ownership || 0
            };
            
            const stats2 = {
                goals: player2.goals || 0,
                assists: player2.assists || 0,
                ppg: player2.ppg || '0.0',
                minutes: player2.minutes || 0,
                bonus: player2.bonus || 0,
                cleanSheets: player2.cleanSheets || 0,
                value: player2.value || '0.0',
                ownership: player2.ownership || 0
            };
            
            content.innerHTML = `
                <div class="comparison-grid">
                    <div class="player-profile">
                        <div class="profile-header">
                            <div class="profile-info">
                                <h2>${player1.name}</h2>
                                <div class="profile-meta">
                                    <span class="profile-badge">${player1.team}</span>
                                    <span class="profile-badge">${player1.position}</span>
                                </div>
                            </div>
                            <div class="profile-price">£${player1.price}m</div>
                        </div>
                    </div>
                    
                    <div class="vs-divider">VS</div>
                    
                    <div class="player-profile">
                        <div class="profile-header">
                            <div class="profile-info">
                                <h2>${player2.name}</h2>
                                <div class="profile-meta">
                                    <span class="profile-badge">${player2.team}</span>
                                    <span class="profile-badge">${player2.position}</span>
                                </div>
                            </div>
                            <div class="profile-price">£${player2.price}m</div>
                        </div>
                    </div>
                </div>
                
                <div class="comparison-stats">
                    <div class="comparison-row">
                        <div class="comparison-value left ${player1.points > player2.points ? 'better' : ''}">${player1.points}</div>
                        <div class="comparison-label">Total Points</div>
                        <div class="comparison-value right ${player2.points > player1.points ? 'better' : ''}">${player2.points}</div>
                    </div>
                    
                    <div class="comparison-row">
                        <div class="comparison-value left ${parseFloat(stats1.ppg) > parseFloat(stats2.ppg) ? 'better' : ''}">${stats1.ppg}</div>
                        <div class="comparison-label">Points Per Game</div>
                        <div class="comparison-value right ${parseFloat(stats2.ppg) > parseFloat(stats1.ppg) ? 'better' : ''}">${stats2.ppg}</div>
                    </div>
                    
                    <div class="comparison-row">
                        <div class="comparison-value left ${player1.form > player2.form ? 'better' : ''}">${player1.form}</div>
                        <div class="comparison-label">Current Form</div>
                        <div class="comparison-value right ${player2.form > player1.form ? 'better' : ''}">${player2.form}</div>
                    </div>
                    
                    <div class="comparison-row">
                        <div class="comparison-value left ${stats1.goals > stats2.goals ? 'better' : ''}">${stats1.goals}</div>
                        <div class="comparison-label">Goals</div>
                        <div class="comparison-value right ${stats2.goals > stats1.goals ? 'better' : ''}">${stats2.goals}</div>
                    </div>
                    
                    <div class="comparison-row">
                        <div class="comparison-value left ${stats1.assists > stats2.assists ? 'better' : ''}">${stats1.assists}</div>
                        <div class="comparison-label">Assists</div>
                        <div class="comparison-value right ${stats2.assists > stats1.assists ? 'better' : ''}">${stats2.assists}</div>
                    </div>
                    
                    <div class="comparison-row">
                        <div class="comparison-value left ${stats1.minutes > stats2.minutes ? 'better' : ''}">${stats1.minutes}</div>
                        <div class="comparison-label">Minutes Played</div>
                        <div class="comparison-value right ${stats2.minutes > stats1.minutes ? 'better' : ''}">${stats2.minutes}</div>
                    </div>
                    
                    <div class="comparison-row">
                        <div class="comparison-value left ${player1.price < player2.price ? 'better' : ''}">£${player1.price}m</div>
                        <div class="comparison-label">Price</div>
                        <div class="comparison-value right ${player2.price < player1.price ? 'better' : ''}">£${player2.price}m</div>
                    </div>
                    
                    <div class="comparison-row">
                        <div class="comparison-value left ${stats1.bonus > stats2.bonus ? 'better' : ''}">${stats1.bonus}</div>
                        <div class="comparison-label">Bonus Points</div>
                        <div class="comparison-value right ${stats2.bonus > stats1.bonus ? 'better' : ''}">${stats2.bonus}</div>
                    </div>
                </div>
                
                <div style="background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); padding: 25px; border-radius: 15px; margin-top: 30px; text-align: center;">
                    <h3 style="font-size: 1.5rem; margin-bottom: 15px; color: #1a1a1a;">
                        ${player1.points > player2.points ? '🏆 ' + player1.name + ' Wins!' : '🏆 ' + player2.name + ' Wins!'}
                    </h3>
                    <p style="color: #666; font-size: 1.1rem;">
                        Based on overall statistics, ${player1.points > player2.points ? player1.name : player2.name} 
                        appears to be the better FPL option with ${Math.abs(player1.points - player2.points)} more total points.
                    </p>
                </div>
                
                <div class="action-buttons">
                    <button class="action-btn btn-primary" onclick="compareMore()">
                        Compare Different Players
                    </button>
                    <button class="action-btn btn-secondary" onclick="exportComparison()">
                        Export Comparison
                    </button>
                </div>
            `;
        }
        
        // Placeholder functions for actions
        function addToWatchlist(playerId) {
            alert('Player added to watchlist! (Feature coming soon)');
        }
        
        function viewTransferSuggestions(playerId) {
            alert('Transfer suggestions feature coming soon!');
        }
        
        function compareMore() {
            selectedPlayers.compare1 = null;
            selectedPlayers.compare2 = null;
            document.getElementById('comparePlayer1Search').value = '';
            document.getElementById('comparePlayer2Search').value = '';
            document.getElementById('comparisonContent').innerHTML = `
                <div style="text-align: center; padding: 60px; color: #999;">
                    <p style="font-size: 1.2rem;">Select two players to compare</p>
                </div>
            `;
        }
        
        function exportComparison() {
            alert('Export feature coming soon!');
        }
        
        // Close suggestions when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.player-search')) {
                document.querySelectorAll('.suggestions').forEach(s => s.classList.remove('active'));
            }
        });
        
        // Heatmap functionality - Player position heatmap
        function selectPlayer(playerId, searchType) {
            const player = allPlayers.find(p => p.id === playerId);
            if (!player) return;
            
            selectedPlayers[searchType] = player;
            
            // Update input field
            const searchInput = searchType === 'analysis' 
                ? document.getElementById('analysisPlayerSearch')
                : searchType === 'compare1'
                ? document.getElementById('comparePlayer1Search')
                : searchType === 'compare2'
                ? document.getElementById('comparePlayer2Search')
                : searchType === 'heatmap'
                ? document.getElementById('heatmapPlayerSearch')
                : searchType === 'price'
                ? document.getElementById('pricePlayerSearch')
                : null;
            
            if (searchInput) searchInput.value = player.name;
            
            // Hide suggestions
            const suggestionsDiv = searchType === 'analysis'
                ? document.getElementById('analysisSuggestions')
                : searchType === 'compare1'
                ? document.getElementById('compare1Suggestions')
                : searchType === 'compare2'
                ? document.getElementById('compare2Suggestions')
                : searchType === 'heatmap'
                ? document.getElementById('heatmapSuggestions')
                : searchType === 'price'
                ? document.getElementById('priceSuggestions')
                : null;
            
            if (suggestionsDiv) suggestionsDiv.classList.remove('active');
            
            // Load content based on mode
            if (searchType === 'analysis') {
                loadPlayerAnalysis(player);
            } else if (searchType === 'heatmap') {
                loadPlayerHeatmap(player);
            } else if (searchType === 'price') {
                loadPlayerPriceAnalysis(player);
            } else {
                if (selectedPlayers.compare1 && selectedPlayers.compare2) {
                    loadPlayerComparison();
                }
            }
        }
        
        // Player position heatmap
        async function loadPlayerHeatmap(player) {
            const content = document.getElementById('heatmapContent');
            const detailedStats = await dataService.getDetailedPlayerStats(player.id);
            
            // Generate pitch heatmap data
            const pitchZones = generatePitchZones(player, detailedStats);
            
            content.innerHTML = `
                <div style="padding: 20px;">
                    <h3 style="margin-bottom: 20px; color: #1a1a1a;">${player.name} - Position Heatmap</h3>
                    
                    <!-- Pitch Heatmap -->
                    <div style="background: linear-gradient(180deg, #2ecc71 0%, #27ae60 100%); border-radius: 12px; padding: 20px; position: relative; max-width: 600px; margin: 0 auto;">
                        <div style="border: 3px solid white; border-radius: 8px; padding: 20px; position: relative;">
                            <!-- Pitch markings -->
                            <div style="border: 2px solid white; height: 400px; position: relative;">
                                <!-- Center line -->
                                <div style="position: absolute; top: 50%; left: 0; right: 0; height: 2px; background: white;"></div>
                                <!-- Center circle -->
                                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 80px; height: 80px; border: 2px solid white; border-radius: 50%;"></div>
                                
                                <!-- Penalty areas -->
                                <div style="position: absolute; top: 0; left: 50%; transform: translateX(-50%); width: 200px; height: 60px; border: 2px solid white; border-top: none;"></div>
                                <div style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 200px; height: 60px; border: 2px solid white; border-bottom: none;"></div>
                                
                                <!-- Heatmap overlay -->
                                <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; display: grid; grid-template-columns: repeat(5, 1fr); grid-template-rows: repeat(6, 1fr); gap: 2px;">
                                    ${pitchZones.map(zone => `
                                        <div style="background: ${getHeatColor(zone.intensity)}; opacity: ${zone.intensity / 100}; border-radius: 4px; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">
                                            ${zone.intensity > 50 ? zone.intensity + '%' : ''}
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Performance by position -->
                    <div style="margin-top: 30px; background: white; padding: 20px; border-radius: 12px;">
                        <h4 style="margin-bottom: 15px; color: #1a1a1a;">Performance Zones</h4>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; font-weight: 700; color: #e74c3c;">🔥</div>
                                <div style="font-size: 0.9rem; color: #666;">Attack</div>
                                <div style="font-size: 1.2rem; font-weight: 600;">${player.goals + player.assists} G/A</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; font-weight: 700; color: #3498db;">⚡</div>
                                <div style="font-size: 0.9rem; color: #666;">Midfield</div>
                                <div style="font-size: 1.2rem; font-weight: 600;">${player.influence.toFixed(0)} Inf</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; font-weight: 700; color: #2ecc71;">🛡️</div>
                                <div style="font-size: 0.9rem; color: #666;">Defense</div>
                                <div style="font-size: 1.2rem; font-weight: 600;">${player.cleanSheets} CS</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Recent gameweek heatmap -->
                    <div style="margin-top: 30px;">
                        <h4 style="margin-bottom: 15px; color: #1a1a1a;">Last 10 Gameweeks Performance</h4>
                        <div class="heatmap-grid" style="grid-template-columns: repeat(10, 1fr);">
                            ${detailedStats.seasonHistory.slice(-10).map((gw, index) => {
                                const points = gw.total_points;
                                const heatClass = points <= 2 ? 'heat-low' : 
                                                 points <= 5 ? 'heat-medium' : 
                                                 points <= 8 ? 'heat-high' : 'heat-extreme';
                                return `
                                    <div class="heatmap-cell ${heatClass}" title="GW${gw.round}: ${points} pts">
                                        ${points}
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                </div>
            `;
        }
        
        function generatePitchZones(player, stats) {
            // Generate 30 zones (5x6 grid) with intensity based on player position and stats
            const zones = [];
            const position = player.position;
            
            for (let row = 0; row < 6; row++) {
                for (let col = 0; col < 5; col++) {
                    let intensity = Math.random() * 30 + 20; // Base intensity
                    
                    // Adjust intensity based on player position
                    if (position === 'FWD' && row < 2) {
                        intensity += 40; // Forwards more active in attacking third
                    } else if (position === 'MID' && row >= 2 && row <= 3) {
                        intensity += 40; // Midfielders in middle third
                    } else if (position === 'DEF' && row >= 4) {
                        intensity += 40; // Defenders in defensive third
                    } else if (position === 'GKP' && row === 5 && col === 2) {
                        intensity = 90; // Goalkeeper in goal area
                    }
                    
                    zones.push({
                        row,
                        col,
                        intensity: Math.min(100, Math.round(intensity))
                    });
                }
            }
            
            return zones;
        }
        
        function getHeatColor(intensity) {
            if (intensity < 30) return 'rgba(52, 152, 219, 0.7)';
            if (intensity < 50) return 'rgba(241, 196, 15, 0.7)';
            if (intensity < 70) return 'rgba(230, 126, 34, 0.7)';
            return 'rgba(231, 76, 60, 0.9)';
        }
        
        // Fixtures and Table functionality
        async function loadFixturesAndTable() {
            const content = document.getElementById('fixturesContent');
            const tableData = await dataService.getLiveTable();
            
            content.innerHTML = `
                <div style="padding: 20px;">
                    <h3 style="margin-bottom: 20px; color: #1a1a1a;">Premier League Table & Team Strength</h3>
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; background: white; border-radius: 12px; overflow: hidden;">
                            <thead>
                                <tr style="background: linear-gradient(135deg, #37003c 0%, #00ff87 100%); color: white;">
                                    <th style="padding: 12px; text-align: left;">Pos</th>
                                    <th style="padding: 12px; text-align: left;">Team</th>
                                    <th style="padding: 12px;">P</th>
                                    <th style="padding: 12px;">W</th>
                                    <th style="padding: 12px;">D</th>
                                    <th style="padding: 12px;">L</th>
                                    <th style="padding: 12px;">GD</th>
                                    <th style="padding: 12px;">Pts</th>
                                    <th style="padding: 12px;">Form</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${tableData.map(team => `
                                    <tr style="border-bottom: 1px solid #e0e0e0;">
                                        <td style="padding: 12px; font-weight: 600;">${team.position}</td>
                                        <td style="padding: 12px;">
                                            <span style="font-weight: 600;">${team.team}</span>
                                        </td>
                                        <td style="padding: 12px; text-align: center;">${team.played}</td>
                                        <td style="padding: 12px; text-align: center;">${team.wins}</td>
                                        <td style="padding: 12px; text-align: center;">${team.draws}</td>
                                        <td style="padding: 12px; text-align: center;">${team.losses}</td>
                                        <td style="padding: 12px; text-align: center; font-weight: 600; color: ${team.gd > 0 ? '#00d084' : team.gd < 0 ? '#ff4757' : '#666'};">
                                            ${team.gd > 0 ? '+' : ''}${team.gd}
                                        </td>
                                        <td style="padding: 12px; text-align: center; font-weight: 700; font-size: 1.1rem;">
                                            ${team.points}
                                        </td>
                                        <td style="padding: 12px;">
                                            <div style="display: flex; gap: 2px;">
                                                ${generateFormBadges()}
                                            </div>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                    
                    <div style="margin-top: 30px;">
                        <h4 style="margin-bottom: 15px; color: #1a1a1a;">Team Difficulty Rating</h4>
                        <div class="heatmap-grid">
                            ${tableData.slice(0, 10).map((team, index) => {
                                const difficulty = Math.ceil((5 - index / 2));
                                const heatClass = difficulty <= 2 ? 'heat-low' : 
                                                 difficulty === 3 ? 'heat-medium' : 
                                                 difficulty === 4 ? 'heat-high' : 'heat-extreme';
                                return `
                                    <div class="heatmap-cell ${heatClass}" title="${team.team}">
                                        ${team.team.slice(0, 3).toUpperCase()}
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                </div>
            `;
        }
        
        function generateFormBadges() {
            const forms = ['W', 'W', 'D', 'L', 'W'];
            return forms.map(result => {
                const color = result === 'W' ? '#00d084' : result === 'D' ? '#ffa500' : '#ff4757';
                return `<span style="width: 20px; height: 20px; background: ${color}; color: white; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 700;">${result}</span>`;
            }).join('');
        }
        
        // Player price analysis
        async function loadPlayerPriceAnalysis(player) {
            const content = document.getElementById('priceContent');
            const pricePredict = await dataService.predictPriceChange(player);
            const fixtures = await dataService.getPlayerFixtures(player);
            
            content.innerHTML = `
                <div style="padding: 20px;">
                    <h3 style="margin-bottom: 20px; color: #1a1a1a;">${player.name} - Price Analysis</h3>
                    
                    <div style="background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); padding: 25px; border-radius: 15px; margin-bottom: 20px;">
                        <h4 style="margin-bottom: 15px;">Price Prediction</h4>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-size: 2rem; font-weight: 700; color: ${pricePredict.prediction === 'RISING' ? '#00d084' : pricePredict.prediction === 'FALLING' ? '#ff4757' : '#666'};">
                                    ${pricePredict.prediction}
                                </div>
                                <div style="font-size: 1rem; color: #666;">Confidence: ${pricePredict.confidence}%</div>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 0.9rem; color: #666;">Current Price</div>
                                <div style="font-size: 1.8rem; font-weight: 700;">£${player.price}m</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(0,0,0,0.1);">
                            <h5 style="margin-bottom: 10px;">Key Factors</h5>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                                <div>
                                    <span style="color: #666; font-size: 0.85rem;">Recent Form</span>
                                    <div style="font-weight: 600;">${pricePredict.factors.performance} PPG</div>
                                </div>
                                <div>
                                    <span style="color: #666; font-size: 0.85rem;">Ownership</span>
                                    <div style="font-weight: 600;">${pricePredict.factors.ownership}</div>
                                </div>
                                <div>
                                    <span style="color: #666; font-size: 0.85rem;">Net Transfers</span>
                                    <div style="font-weight: 600; color: ${pricePredict.factors.netTransfers > 0 ? '#00d084' : '#ff4757'};">
                                        ${pricePredict.factors.netTransfers > 0 ? '+' : ''}${(pricePredict.factors.netTransfers/1000).toFixed(1)}k
                                    </div>
                                </div>
                                <div>
                                    <span style="color: #666; font-size: 0.85rem;">Fixture Difficulty</span>
                                    <div style="font-weight: 600;">${pricePredict.factors.fixtureRating}/5</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h4 style="margin-bottom: 15px;">Upcoming Fixtures Impact</h4>
                    <div style="display: grid; gap: 10px;">
                        ${fixtures.map(fixture => `
                            <div style="padding: 12px; background: white; border: 1px solid #e0e0e0; border-radius: 8px; display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <span style="font-weight: 600;">${fixture.opponent}</span>
                                    <span style="color: #666; margin-left: 8px;">(${fixture.venue})</span>
                                </div>
                                <div>
                                    <span class="fixture-difficulty difficulty-${fixture.difficulty}" style="padding: 4px 12px; border-radius: 12px;">
                                        FDR ${fixture.difficulty}
                                    </span>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }
        
        // Price predictor functionality
        async function loadPricePredictor() {
            const content = document.getElementById('priceContent');
            const upcomingFixtures = await dataService.getUpcomingFixtures();
            
            content.innerHTML = `
                <div style="padding: 20px;">
                    <h3 style="margin-bottom: 20px; color: #1a1a1a;">Upcoming Fixtures & Price Impact</h3>
                    <div style="display: grid; gap: 15px;">
                        ${upcomingFixtures.map(fixture => `
                            <div style="padding: 15px; background: white; border: 2px solid #e0e0e0; border-radius: 12px;">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <div>
                                        <div style="font-weight: 600; font-size: 1.1rem; margin-bottom: 5px;">
                                            ${fixture.home} vs ${fixture.away}
                                        </div>
                                        <div style="color: #666; font-size: 0.9rem;">
                                            ${new Date(fixture.kickoff).toLocaleDateString()}
                                        </div>
                                    </div>
                                    <div style="display: flex; gap: 10px;">
                                        <div style="text-align: center;">
                                            <div style="font-size: 0.8rem; color: #666;">Home FDR</div>
                                            <span class="fixture-difficulty difficulty-${fixture.difficulty_h}">${fixture.difficulty_h}</span>
                                        </div>
                                        <div style="text-align: center;">
                                            <div style="font-size: 0.8rem; color: #666;">Away FDR</div>
                                            <span class="fixture-difficulty difficulty-${fixture.difficulty_a}">${fixture.difficulty_a}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }
        
        // Chemistry analyzer
        async function analyzeChemistry() {
            const content = document.getElementById('chemistryContent');
            content.innerHTML = '<div style="text-align: center; padding: 40px;">Analyzing team chemistry...</div>';
            
            // Get top players for chemistry analysis
            const topPlayers = allPlayers.slice(0, 6);
            const chemistryPairs = [];
            
            for (let i = 0; i < topPlayers.length - 1; i++) {
                for (let j = i + 1; j < topPlayers.length; j++) {
                    const chemistry = await dataService.analyzeTeamChemistry(topPlayers[i].id, topPlayers[j].id);
                    chemistryPairs.push({
                        player1: topPlayers[i],
                        player2: topPlayers[j],
                        ...chemistry
                    });
                }
            }
            
            // Sort by chemistry score
            chemistryPairs.sort((a, b) => b.score - a.score);
            
            content.innerHTML = `
                <div style="padding: 20px;">
                    <h3 style="margin-bottom: 20px; color: #1a1a1a;">Top Chemistry Combinations</h3>
                    <div class="chemistry-matrix">
                        ${chemistryPairs.slice(0, 9).map(pair => `
                            <div class="chemistry-link ${pair.score >= 70 ? 'chemistry-strong' : pair.score <= 40 ? 'chemistry-weak' : ''}">
                                <div style="font-weight: 600; margin-bottom: 8px;">
                                    ${pair.player1.name.split(' ').pop()}
                                    <span style="color: #999;">+</span>
                                    ${pair.player2.name.split(' ').pop()}
                                </div>
                                <div style="font-size: 1.8rem; font-weight: 700; color: ${pair.score >= 70 ? '#00d084' : pair.score <= 40 ? '#ff4757' : '#666'};">
                                    ${pair.score}%
                                </div>
                                <div style="font-size: 0.85rem; color: #666; margin-top: 5px;">
                                    ${pair.sameTeam ? '🏆 Same Team' : ''}
                                    ${pair.positionCombo}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }
    </script>
</body>
</html>
