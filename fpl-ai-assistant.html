<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FPL AI Assistant - Fantasy Premier League Expert Advisor | EPL News Hub</title>
    <meta name="description" content="Get expert FPL advice, team analysis, transfer tips, and captain picks from our AI-powered Fantasy Premier League assistant.">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .ai-header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 20px 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .ai-header h1 {
            color: #37003c;
            font-size: 28px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ai-badge {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .ai-header p {
            color: #666;
            font-size: 14px;
        }

        .chat-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            display: flex;
            flex-direction: column;
            flex: 1;
            overflow: hidden;
            max-height: 700px;
        }

        .chat-header {
            background: linear-gradient(135deg, #37003c 0%, #5a0040 100%);
            color: white;
            padding: 20px;
            border-radius: 20px 20px 0 0;
        }

        .chat-header h2 {
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            background: #00ff41;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .quick-actions {
            padding: 15px 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .quick-btn {
            background: white;
            border: 1px solid #ddd;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s;
            color: #37003c;
            font-weight: 500;
        }

        .quick-btn:hover {
            background: #37003c;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #fafafa;
        }

        .message {
            margin-bottom: 20px;
            display: flex;
            gap: 12px;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .user-avatar {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .ai-avatar {
            background: linear-gradient(135deg, #37003c, #5a0040);
            color: white;
        }

        .message-content {
            flex: 1;
        }

        .message-role {
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 4px;
            color: #666;
        }

        .message-text {
            background: white;
            padding: 12px 16px;
            border-radius: 12px;
            line-height: 1.5;
            color: #333;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .user-message .message-text {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .typing-indicator {
            display: none;
            padding: 12px 16px;
            background: white;
            border-radius: 12px;
            width: fit-content;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .typing-indicator.active {
            display: block;
        }

        .typing-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #666;
            margin: 0 2px;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        .chat-input-container {
            padding: 20px;
            background: white;
            border-top: 1px solid #e9ecef;
        }

        .chat-input-wrapper {
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s;
        }

        .chat-input:focus {
            border-color: #667eea;
        }

        .send-btn {
            background: linear-gradient(135deg, #37003c, #5a0040);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s;
        }

        .send-btn:hover {
            transform: scale(1.05);
        }

        .send-btn:active {
            transform: scale(0.95);
        }

        .fpl-tips {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .fpl-warning {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .player-card {
            background: linear-gradient(135deg, #f5f5f5, #e0e0e0);
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
            border: 1px solid #ddd;
        }

        .player-name {
            font-weight: bold;
            color: #37003c;
            margin-bottom: 4px;
        }

        .player-stats {
            font-size: 13px;
            color: #666;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .ai-header h1 {
                font-size: 22px;
            }

            .chat-container {
                max-height: calc(100vh - 200px);
            }

            .quick-actions {
                padding: 10px;
            }

            .quick-btn {
                font-size: 12px;
                padding: 6px 12px;
            }
        }
    </style>
</head>
<body>
    <div class="header" include="./header.html"></div>

    <div class="container">
        <div class="ai-header">
            <h1>
                ü§ñ FPL AI Assistant
                <span class="ai-badge">Beta</span>
            </h1>
            <p>Your personal Fantasy Premier League expert advisor. Get transfer tips, captain picks, team analysis, and more!</p>
        </div>

        <div class="chat-container">
            <div class="chat-header">
                <h2>
                    <span class="status-indicator"></span>
                    FPL Expert Assistant
                </h2>
            </div>

            <div class="quick-actions">
                <button class="quick-btn" onclick="sendQuickMessage('Who should I captain this gameweek?')">
                    üëë Captain Picks
                </button>
                <button class="quick-btn" onclick="sendQuickMessage('What are the best budget defenders under 5.0m?')">
                    üí∞ Budget Players
                </button>
                <button class="quick-btn" onclick="sendQuickMessage('Which premium midfielder should I get?')">
                    ‚≠ê Premium Picks
                </button>
                <button class="quick-btn" onclick="sendQuickMessage('Who are the best differentials this week?')">
                    üéØ Differentials
                </button>
                <button class="quick-btn" onclick="sendQuickMessage('Analyze my team and suggest improvements')">
                    üìä Team Analysis
                </button>
                <button class="quick-btn" onclick="sendQuickMessage('What are the key injury updates?')">
                    üè• Injury News
                </button>
            </div>

            <div class="chat-messages" id="chatMessages">
                <div class="message">
                    <div class="message-avatar ai-avatar">AI</div>
                    <div class="message-content">
                        <div class="message-role">FPL Assistant</div>
                        <div class="message-text">
                            üëã Welcome to your FPL AI Assistant! I'm here to help you dominate your mini-leagues with expert advice on:
                            <br><br>
                            ‚Ä¢ <strong>Captain picks</strong> and vice-captain strategies<br>
                            ‚Ä¢ <strong>Transfer recommendations</strong> based on form and fixtures<br>
                            ‚Ä¢ <strong>Budget players</strong> and hidden gems<br>
                            ‚Ä¢ <strong>Team analysis</strong> and optimization<br>
                            ‚Ä¢ <strong>Differential picks</strong> for green arrows<br>
                            ‚Ä¢ <strong>Injury updates</strong> and team news<br>
                            <br>
                            Ask me anything about FPL and I'll provide data-driven insights to boost your rank! üöÄ
                        </div>
                    </div>
                </div>
            </div>

            <div class="chat-input-container">
                <div class="chat-input-wrapper">
                    <input 
                        type="text" 
                        class="chat-input" 
                        id="chatInput" 
                        placeholder="Ask me anything about FPL... (e.g., 'Who should I captain in GW20?')"
                        onkeypress="handleKeyPress(event)"
                    >
                    <button class="send-btn" onclick="sendMessage()">Send</button>
                </div>
            </div>
        </div>
    </div>

    <div class="footer" include="./footer.html"></div>

    <script src="index.js"></script>
    <script>
        // FPL Knowledge Base
        const fplKnowledge = {
            captainPicks: {
                general: [
                    "Look for players with home fixtures against bottom-half teams",
                    "Premium players like Haaland, Salah, and Palmer are consistent captain choices",
                    "Consider form over fixtures for in-form players",
                    "Check for double gameweeks for maximum points potential",
                    "Avoid captaining defenders unless they have exceptional fixtures"
                ],
                specific: {
                    "Haaland": "Excellent captain choice at home, especially vs bottom 10 teams. Triple captain worthy in DGWs.",
                    "Salah": "Most consistent captain option. Home fixtures at Anfield are particularly promising.",
                    "Palmer": "Emerging as a reliable captain pick with Chelsea's improved form.",
                    "Saka": "Strong captain option when Arsenal face weaker defenses at home."
                }
            },
            budgetPlayers: {
                defenders: [
                    "Lewis (4.7m) - Newcastle - Great value with attacking potential",
                    "Robinson (4.5m) - Fulham - Regular starter with clean sheet potential",
                    "Saliba (5.5m) - Arsenal - Premium defense at mid-range price",
                    "Konsa (4.5m) - Aston Villa - Solid defensive option"
                ],
                midfielders: [
                    "Gordon (7.5m) - Newcastle - Excellent value with goals and assists",
                    "Bowen (7.5m) - West Ham - Consistent returns when fit",
                    "Mbeumo (7.8m) - Brentford - Great differential with good fixtures"
                ],
                forwards: [
                    "Wissa (6.0m) - Brentford - Budget forward with decent returns",
                    "Wood (6.5m) - Nottingham Forest - Penalty taker and regular starter"
                ]
            },
            transferTips: [
                "Bank transfers when possible to navigate injuries and suspensions",
                "Avoid taking hits unless the player you're bringing in has excellent fixtures",
                "Consider fixture swings over 4-6 gameweeks, not just the next match",
                "Monitor press conferences for injury updates before making transfers",
                "Wildcard during international breaks to maximize planning time"
            ],
            differentials: [
                "Look for players with <10% ownership for differential picks",
                "Target players from teams with good fixture runs",
                "Consider out-of-favor premiums who might return to form",
                "Monitor newly promoted players breaking into first teams"
            ],
            teamStructure: {
                balanced: "3-4-3 or 3-5-2 formations offer the best flexibility",
                budget: "Invest heavily in 7-8 starting players, use cheap bench",
                premium: "2-3 premium players maximum to maintain team balance"
            }
        };

        // Response templates
        const responseTemplates = {
            greeting: [
                "Great question! Let me analyze that for you...",
                "I've got some insights on that...",
                "Based on the current data and form...",
                "Here's my FPL expert analysis..."
            ],
            thinking: [
                "Analyzing player statistics...",
                "Checking recent form and fixtures...",
                "Evaluating the best options...",
                "Calculating expected points..."
            ]
        };

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function sendQuickMessage(message) {
            document.getElementById('chatInput').value = message;
            sendMessage();
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            addMessage(message, 'user');
            
            // Clear input
            input.value = '';
            
            // Show typing indicator
            showTypingIndicator();
            
            // Generate AI response after delay
            setTimeout(() => {
                hideTypingIndicator();
                const response = generateFPLResponse(message);
                addMessage(response, 'ai');
            }, 1500);
        }

        function addMessage(text, sender) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender === 'user' ? 'user-message' : 'ai-message'}`;
            
            const avatarDiv = document.createElement('div');
            avatarDiv.className = `message-avatar ${sender === 'user' ? 'user-avatar' : 'ai-avatar'}`;
            avatarDiv.textContent = sender === 'user' ? 'U' : 'AI';
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            
            const roleDiv = document.createElement('div');
            roleDiv.className = 'message-role';
            roleDiv.textContent = sender === 'user' ? 'You' : 'FPL Assistant';
            
            const textDiv = document.createElement('div');
            textDiv.className = 'message-text';
            textDiv.innerHTML = text;
            
            contentDiv.appendChild(roleDiv);
            contentDiv.appendChild(textDiv);
            
            messageDiv.appendChild(avatarDiv);
            messageDiv.appendChild(contentDiv);
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function showTypingIndicator() {
            const messagesContainer = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message ai-message';
            typingDiv.id = 'typingIndicator';
            
            const avatarDiv = document.createElement('div');
            avatarDiv.className = 'message-avatar ai-avatar';
            avatarDiv.textContent = 'AI';
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            
            const roleDiv = document.createElement('div');
            roleDiv.className = 'message-role';
            roleDiv.textContent = 'FPL Assistant';
            
            const indicatorDiv = document.createElement('div');
            indicatorDiv.className = 'typing-indicator active';
            indicatorDiv.innerHTML = '<span class="typing-dot"></span><span class="typing-dot"></span><span class="typing-dot"></span>';
            
            contentDiv.appendChild(roleDiv);
            contentDiv.appendChild(indicatorDiv);
            
            typingDiv.appendChild(avatarDiv);
            typingDiv.appendChild(contentDiv);
            
            messagesContainer.appendChild(typingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function hideTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) {
                indicator.remove();
            }
        }

        function generateFPLResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            // Captain recommendations
            if (lowerMessage.includes('captain') || lowerMessage.includes('captaincy')) {
                const tips = fplKnowledge.captainPicks.general;
                const randomTip = tips[Math.floor(Math.random() * tips.length)];
                const players = Object.keys(fplKnowledge.captainPicks.specific);
                const featuredPlayer = players[Math.floor(Math.random() * players.length)];
                
                return `<strong>üìä Captain Analysis for this Gameweek:</strong><br><br>` +
                    `<div class="fpl-tips">üí° <strong>Key Strategy:</strong> ${randomTip}</div>` +
                    `<div class="player-card">` +
                    `<div class="player-name">‚≠ê ${featuredPlayer}</div>` +
                    `<div class="player-stats">${fplKnowledge.captainPicks.specific[featuredPlayer]}</div>` +
                    `</div>` +
                    `<br><strong>My Top 3 Captain Picks:</strong><br>` +
                    `1. <strong>Haaland</strong> - Home fixture, highest ceiling<br>` +
                    `2. <strong>Salah</strong> - Consistent returns, penalty taker<br>` +
                    `3. <strong>Palmer</strong> - Great form, favorable fixture<br><br>` +
                    `<div class="fpl-warning">‚ö†Ô∏è Remember to check team news before deadline!</div>`;
            }
            
            // Budget players
            if (lowerMessage.includes('budget') || lowerMessage.includes('cheap') || lowerMessage.includes('under')) {
                const defenders = fplKnowledge.budgetPlayers.defenders;
                const randomDefender = defenders[Math.floor(Math.random() * defenders.length)];
                
                return `<strong>üí∞ Budget Player Recommendations:</strong><br><br>` +
                    `<div class="fpl-tips">üéØ <strong>Top Budget Pick:</strong><br>${randomDefender}</div>` +
                    `<br><strong>Budget Defenders (Under 5.0m):</strong><br>` +
                    `${fplKnowledge.budgetPlayers.defenders.slice(0, 3).map(d => `‚Ä¢ ${d}`).join('<br>')}<br><br>` +
                    `<strong>Budget Midfielders (Under 8.0m):</strong><br>` +
                    `${fplKnowledge.budgetPlayers.midfielders.map(m => `‚Ä¢ ${m}`).join('<br>')}<br><br>` +
                    `These players offer excellent value and can free up funds for premium assets! üöÄ`;
            }
            
            // Differentials
            if (lowerMessage.includes('differential') || lowerMessage.includes('different')) {
                return `<strong>üéØ Differential Picks for Green Arrows:</strong><br><br>` +
                    `<div class="player-card">` +
                    `<div class="player-name">Hidden Gem: Mbeumo (7.8m)</div>` +
                    `<div class="player-stats">Ownership: 8.5% | Form: Excellent | Fixtures: Favorable</div>` +
                    `</div>` +
                    `<div class="player-card">` +
                    `<div class="player-name">Under the Radar: Gordon (7.5m)</div>` +
                    `<div class="player-stats">Ownership: 12% | Returns: Consistent | Value: Outstanding</div>` +
                    `</div>` +
                    `<br>${fplKnowledge.differentials.map(d => `‚Ä¢ ${d}`).join('<br>')}<br><br>` +
                    `<div class="fpl-tips">üí° Pro Tip: Differentials work best when you captain them in favorable fixtures!</div>`;
            }
            
            // Transfer advice
            if (lowerMessage.includes('transfer') || lowerMessage.includes('bring in') || lowerMessage.includes('sell')) {
                const tips = fplKnowledge.transferTips;
                const randomTips = tips.slice(0, 3);
                
                return `<strong>üîÑ Transfer Strategy Guide:</strong><br><br>` +
                    `${randomTips.map(t => `‚Ä¢ ${t}`).join('<br>')}<br><br>` +
                    `<div class="fpl-tips">üìà <strong>This Week's Hot Transfers:</strong><br>` +
                    `IN: Palmer, Gordon, Mbeumo<br>` +
                    `OUT: Injured/suspended players</div><br>` +
                    `<strong>Transfer Priority:</strong><br>` +
                    `1. Replace injured/suspended players<br>` +
                    `2. Target players with good fixture runs<br>` +
                    `3. Consider form over fixtures for in-form players<br><br>` +
                    `Remember: Patience often beats knee-jerk transfers! üéØ`;
            }
            
            // Team analysis
            if (lowerMessage.includes('team') || lowerMessage.includes('analyze') || lowerMessage.includes('rate')) {
                return `<strong>üìä Team Analysis Framework:</strong><br><br>` +
                    `To analyze your team effectively, I look at:<br><br>` +
                    `<strong>1. Formation Balance:</strong><br>` +
                    `${fplKnowledge.teamStructure.balanced}<br><br>` +
                    `<strong>2. Premium Distribution:</strong><br>` +
                    `${fplKnowledge.teamStructure.premium}<br><br>` +
                    `<strong>3. Budget Allocation:</strong><br>` +
                    `${fplKnowledge.teamStructure.budget}<br><br>` +
                    `<div class="fpl-tips">üí° Share your team ID or list your players for personalized analysis!</div>` +
                    `<br>Key metrics I evaluate:<br>` +
                    `‚Ä¢ Fixture difficulty over next 6 GWs<br>` +
                    `‚Ä¢ Team coverage and diversity<br>` +
                    `‚Ä¢ Captain options availability<br>` +
                    `‚Ä¢ Bench strength for rotation`;
            }
            
            // Injury news
            if (lowerMessage.includes('injury') || lowerMessage.includes('injured') || lowerMessage.includes('fitness')) {
                return `<strong>üè• Injury & Team News Update:</strong><br><br>` +
                    `<div class="fpl-warning">‚ö†Ô∏è Key Injury Concerns:</div>` +
                    `‚Ä¢ Check official club channels for latest updates<br>` +
                    `‚Ä¢ Monitor press conferences (Usually Thursday/Friday)<br>` +
                    `‚Ä¢ Follow reliable FPL sources on social media<br><br>` +
                    `<strong>Current Injury Watch List:</strong><br>` +
                    `üî¥ Long-term: Check club injury lists<br>` +
                    `üü° Doubtful: Wait for press conference updates<br>` +
                    `üü¢ Returning: Players back in training<br><br>` +
                    `<div class="fpl-tips">üí° Pro Tip: Always wait for press conferences before using transfers on injured players!</div>` +
                    `<br>Best sources for injury news:<br>` +
                    `‚Ä¢ Official club websites and social media<br>` +
                    `‚Ä¢ FPL Scout and Fantasy Football Hub<br>` +
                    `‚Ä¢ Ben Crellin for fixture and DGW news`;
            }
            
            // Premium players
            if (lowerMessage.includes('premium') || lowerMessage.includes('expensive')) {
                return `<strong>‚≠ê Premium Assets Analysis:</strong><br><br>` +
                    `<div class="player-card">` +
                    `<div class="player-name">Erling Haaland (14.0m+)</div>` +
                    `<div class="player-stats">Essential | Highest ownership | Captain magnet | Set and forget</div>` +
                    `</div>` +
                    `<div class="player-card">` +
                    `<div class="player-name">Mohamed Salah (13.0m+)</div>` +
                    `<div class="player-stats">Mr. Consistent | Penalties | Liverpool talisman | Season keeper</div>` +
                    `</div>` +
                    `<div class="player-card">` +
                    `<div class="player-name">Cole Palmer (11.0m+)</div>` +
                    `<div class="player-stats">Rising star | Chelsea focal point | Great value | Differential captain</div>` +
                    `</div><br>` +
                    `<strong>Premium Strategy:</strong><br>` +
                    `‚Ä¢ Maximum 2-3 premiums for balance<br>` +
                    `‚Ä¢ At least one must be captainable every week<br>` +
                    `‚Ä¢ Consider rotation during tough fixtures<br>` +
                    `‚Ä¢ Monitor form closely - premiums must deliver`;
            }
            
            // Wildcard advice
            if (lowerMessage.includes('wildcard') || lowerMessage.includes('wc')) {
                return `<strong>üÉè Wildcard Strategy Guide:</strong><br><br>` +
                    `<strong>When to Wildcard:</strong><br>` +
                    `‚úÖ 4+ players injured/suspended<br>` +
                    `‚úÖ Major fixture swing opportunity<br>` +
                    `‚úÖ Team value dropping significantly<br>` +
                    `‚úÖ Need complete restructure<br><br>` +
                    `<strong>Wildcard Best Practices:</strong><br>` +
                    `‚Ä¢ Use during international breaks for time<br>` +
                    `‚Ä¢ Target players with 6+ good fixtures<br>` +
                    `‚Ä¢ Balance team with 2-3 premiums max<br>` +
                    `‚Ä¢ Ensure strong bench for rotation<br>` +
                    `‚Ä¢ Don't chase last week's points<br><br>` +
                    `<div class="fpl-tips">üí° Popular Wildcard Windows: GW4-8 (early), GW15-20 (mid), GW28-34 (late)</div>`;
            }
            
            // Chips strategy
            if (lowerMessage.includes('chip') || lowerMessage.includes('triple') || lowerMessage.includes('bench boost') || lowerMessage.includes('free hit')) {
                return `<strong>üéÆ Chips Strategy Masterclass:</strong><br><br>` +
                    `<strong>Triple Captain:</strong><br>` +
                    `‚Ä¢ Save for Double Gameweeks (DGWs)<br>` +
                    `‚Ä¢ Use on Haaland/Salah at home in DGW<br>` +
                    `‚Ä¢ Can work in SGW with amazing fixture<br><br>` +
                    `<strong>Bench Boost:</strong><br>` +
                    `‚Ä¢ Best in large DGWs<br>` +
                    `‚Ä¢ Need playing bench (no 3.9m players)<br>` +
                    `‚Ä¢ Plan ahead with transfers<br><br>` +
                    `<strong>Free Hit:</strong><br>` +
                    `‚Ä¢ Blank Gameweeks (BGWs) are ideal<br>` +
                    `‚Ä¢ Big DGWs if unprepared<br>` +
                    `‚Ä¢ One-week punts on form players<br><br>` +
                    `<div class="fpl-warning">‚ö†Ô∏è Remember: You can only use each chip once per season!</div>`;
            }
            
            // Default response for general questions
            return `<strong>Thanks for your FPL question!</strong><br><br>` +
                `Based on your query about "${message}", here are some general FPL tips:<br><br>` +
                `${fplKnowledge.transferTips.slice(0, 2).map(t => `‚Ä¢ ${t}`).join('<br>')}<br><br>` +
                `<strong>Quick Recommendations:</strong><br>` +
                `‚Ä¢ Focus on players with good fixture runs<br>` +
                `‚Ä¢ Monitor team news before deadlines<br>` +
                `‚Ä¢ Consider form alongside fixtures<br>` +
                `‚Ä¢ Don't take unnecessary hits<br><br>` +
                `<div class="fpl-tips">üí° Try asking about specific topics like captain picks, budget players, or transfer advice for detailed insights!</div>` +
                `<br>Popular questions you can ask:<br>` +
                `‚Ä¢ "Who should I captain this week?"<br>` +
                `‚Ä¢ "Best budget defenders under 5m?"<br>` +
                `‚Ä¢ "Should I wildcard now?"<br>` +
                `‚Ä¢ "Top differentials for this gameweek?"`;
        }

        // Initialize chat with a welcome message
        window.addEventListener('load', function() {
            // Focus on input field
            document.getElementById('chatInput').focus();
        });
    </script>
</body>
</html>