<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FPL AI Assistant - Free Fantasy Premier League Chatbot & Expert Advisor 2025</title>
    <meta name="description" content="FPL AI Assistant provides instant Fantasy Premier League advice. Get captain picks, transfer tips, differential players, and team analysis from our advanced FPL AI Assistant chatbot. Free FPL tools and expert insights.">
    <meta name="keywords" content="FPL AI Assistant, Fantasy Premier League AI, FPL chatbot, FPL assistant, FPL tips, FPL advice, FPL captain picks, FPL transfers, FPL differentials, Fantasy Premier League assistant, FPL tools">
    <meta name="author" content="EPL News Hub">
    <meta property="og:title" content="FPL AI Assistant - Your Personal Fantasy Premier League Expert">
    <meta property="og:description" content="Get instant FPL advice from our AI Assistant. Captain picks, transfers, differentials, and team analysis - all powered by advanced FPL AI technology.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://eplnewshub.com/fpl-ai-assistant.html">
    <meta property="og:image" content="https://eplnewshub.com/fpl-ai-assistant-preview.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="FPL AI Assistant - Expert Fantasy Premier League Advice">
    <meta name="twitter:description" content="Free FPL AI Assistant chatbot. Get instant captain picks, transfer tips, and team analysis.">
    <link rel="canonical" href="https://eplnewshub.com/fpl-ai-assistant.html">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    
    <!-- Schema Markup for AI Assistant -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "FPL AI Assistant",
      "description": "Advanced FPL AI Assistant providing Fantasy Premier League advice, captain picks, transfer tips, and team analysis through an intelligent chatbot interface.",
      "applicationCategory": "SportsApplication",
      "operatingSystem": "Web Browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "ratingCount": "2451"
      },
      "author": {
        "@type": "Organization",
        "name": "EPL News Hub"
      }
    }
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: background 0.3s ease;
        }

        body.dark-mode {
            background: linear-gradient(135deg, #1a1a2e 0%, #0f0f1e 100%);
        }

        .dark-mode .ai-header {
            background: rgba(30, 30, 45, 0.95);
            color: #fff;
        }

        .dark-mode .ai-header h1 {
            color: #fff;
        }

        .dark-mode .ai-header p {
            color: #aaa;
        }

        .dark-mode .chat-container {
            background: #1e1e2e;
        }

        .dark-mode .chat-messages {
            background: #252535;
        }

        .dark-mode .message-text {
            background: #2a2a3a;
            color: #fff;
        }

        .dark-mode .quick-actions {
            background: #2a2a3a;
            border-bottom-color: #3a3a4a;
        }

        .dark-mode .quick-btn {
            background: #3a3a4a;
            color: #fff;
            border-color: #4a4a5a;
        }

        .dark-mode .chat-input-container {
            background: #1e1e2e;
            border-top-color: #3a3a4a;
        }

        .dark-mode .chat-input {
            background: #2a2a3a;
            color: #fff;
            border-color: #3a3a4a;
        }

        .dark-toggle {
            position: fixed;
            top: 80px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transition: transform 0.2s;
        }

        .dark-toggle:hover {
            transform: scale(1.1);
        }

        .dark-mode .dark-toggle {
            background: rgba(50, 50, 70, 0.9);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .ai-header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 20px 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .ai-header h1 {
            color: #37003c;
            font-size: 28px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ai-badge {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .ai-header p {
            color: #666;
            font-size: 14px;
        }

        .chat-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            display: flex;
            flex-direction: column;
            flex: 1;
            overflow: hidden;
            max-height: 700px;
        }

        .chat-header {
            background: linear-gradient(135deg, #37003c 0%, #5a0040 100%);
            color: white;
            padding: 20px;
            border-radius: 20px 20px 0 0;
        }

        .chat-header h2 {
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            background: #00ff41;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .quick-actions {
            padding: 15px 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .quick-btn {
            background: white;
            border: 1px solid #ddd;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s;
            color: #37003c;
            font-weight: 500;
        }

        .quick-btn:hover {
            background: #37003c;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #fafafa;
        }

        .message {
            margin-bottom: 20px;
            display: flex;
            gap: 12px;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .user-avatar {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .ai-avatar {
            background: linear-gradient(135deg, #37003c, #5a0040);
            color: white;
        }

        .message-content {
            flex: 1;
        }

        .message-role {
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 4px;
            color: #666;
        }

        .message-text {
            background: white;
            padding: 12px 16px;
            border-radius: 12px;
            line-height: 1.5;
            color: #333;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .user-message .message-text {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .typing-indicator {
            display: none;
            padding: 12px 16px;
            background: white;
            border-radius: 12px;
            width: fit-content;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .typing-indicator.active {
            display: block;
        }

        .typing-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #666;
            margin: 0 2px;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        .chat-input-container {
            padding: 20px;
            background: white;
            border-top: 1px solid #e9ecef;
        }

        .chat-input-wrapper {
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s;
        }

        .chat-input:focus {
            border-color: #667eea;
        }

        .send-btn {
            background: linear-gradient(135deg, #37003c, #5a0040);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s;
        }

        .send-btn:hover {
            transform: scale(1.05);
        }

        .send-btn:active {
            transform: scale(0.95);
        }

        .fpl-tips {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .fpl-warning {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .player-card {
            background: linear-gradient(135deg, #f5f5f5, #e0e0e0);
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
            border: 1px solid #ddd;
        }

        .player-name {
            font-weight: bold;
            color: #37003c;
            margin-bottom: 4px;
        }

        .player-stats {
            font-size: 13px;
            color: #666;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .ai-header h1 {
                font-size: 22px;
            }

            .chat-container {
                max-height: calc(100vh - 200px);
            }

            .quick-actions {
                padding: 10px;
            }

            .quick-btn {
                font-size: 12px;
                padding: 6px 12px;
            }
        }
    </style>
</head>
<body>
    <div class="header" include="./header.html"></div>

    <div class="container">
        <div class="ai-header">
            <h1>
                ü§ñ FPL AI Assistant
                <span class="ai-badge">Beta</span>
            </h1>
            <p>Your personal FPL AI Assistant - The most advanced Fantasy Premier League chatbot. Get instant FPL advice, captain recommendations, transfer strategies, and data-driven insights from our intelligent FPL AI Assistant.</p>
        </div>

        <div class="chat-container">
            <div class="chat-header">
                <h2>
                    <span class="status-indicator"></span>
                    FPL AI Assistant - Live Expert System
                </h2>
            </div>

            <div class="quick-actions">
                <button class="quick-btn" onclick="sendQuickMessage('Who should I captain this gameweek?')">
                    üëë Captain Picks
                </button>
                <button class="quick-btn" onclick="sendQuickMessage('What are the best budget defenders under 5.0m?')">
                    üí∞ Budget Players
                </button>
                <button class="quick-btn" onclick="sendQuickMessage('Which premium midfielder should I get?')">
                    ‚≠ê Premium Picks
                </button>
                <button class="quick-btn" onclick="sendQuickMessage('Who are the best differentials this week?')">
                    üéØ Differentials
                </button>
                <button class="quick-btn" onclick="sendQuickMessage('Analyze my team and suggest improvements')">
                    üìä Team Analysis
                </button>
                <button class="quick-btn" onclick="sendQuickMessage('What are the key injury updates?')">
                    üè• Injury News
                </button>
            </div>

            <div class="chat-messages" id="chatMessages">
                <div class="message">
                    <div class="message-avatar ai-avatar">AI</div>
                    <div class="message-content">
                        <div class="message-role">FPL AI Assistant</div>
                        <div class="message-text">
                            üëã Welcome to the <strong>FPL AI Assistant</strong> - your intelligent Fantasy Premier League companion! I'm an advanced FPL chatbot designed to provide expert FPL advice 24/7.
                            <br><br>
                            <strong>What your FPL AI Assistant can do:</strong><br>
                            ‚Ä¢ <strong>Captain Analysis</strong> - Data-driven captain picks with xG, xA statistics<br>
                            ‚Ä¢ <strong>Transfer Algorithm</strong> - Smart transfer suggestions based on form, fixtures, and value<br>
                            ‚Ä¢ <strong>Differential Engine</strong> - Find low-ownership gems before they explode<br>
                            ‚Ä¢ <strong>Team Optimizer</strong> - Analyze and improve your squad structure<br>
                            ‚Ä¢ <strong>Price Predictor</strong> - Anticipate rises and falls<br>
                            ‚Ä¢ <strong>Injury Tracker</strong> - Real-time injury and team news updates<br>
                            ‚Ä¢ <strong>Chip Strategy</strong> - Optimal timing for Wildcards, Triple Captain, and more<br>
                            <br>
                            üí° <strong>Pro Tip:</strong> Ask specific questions for the best FPL AI Assistant responses. Try "Who are the top 3 captains for GW20?" or "Should I transfer out Salah?"<br>
                            <br>
                            Let's climb those ranks together! What FPL advice do you need today? üöÄ
                        </div>
                    </div>
                </div>
            </div>

            <div class="chat-input-container">
                <div class="chat-input-wrapper">
                    <input 
                        type="text" 
                        class="chat-input" 
                        id="chatInput" 
                        placeholder="Ask me anything about FPL... (e.g., 'Who should I captain in GW20?')"
                        onkeypress="handleKeyPress(event)"
                    >
                    <button class="send-btn" onclick="sendMessage()">Send</button>
                </div>
            </div>
        </div>
    </div>

    <!-- SEO Content Section -->
    <div class="seo-content">
        <div class="seo-container">
            <h2>About FPL AI Assistant - Your Intelligent Fantasy Premier League Companion</h2>
            <p>The <strong>FPL AI Assistant</strong> is a cutting-edge chatbot designed specifically for Fantasy Premier League managers. Our AI-powered assistant provides instant, data-driven FPL advice to help you make better decisions and climb the rankings.</p>
            
            <div class="features-grid">
                <div class="feature-card">
                    <h3>ü§ñ Advanced FPL AI Technology</h3>
                    <p>Our FPL AI Assistant uses sophisticated algorithms to analyze player form, fixtures, and statistics, delivering personalized FPL recommendations tailored to your team.</p>
                </div>
                <div class="feature-card">
                    <h3>üìä Real-Time FPL Analysis</h3>
                    <p>Get instant FPL insights with our AI Assistant's real-time analysis engine. From captain picks to transfer strategies, make informed decisions backed by data.</p>
                </div>
                <div class="feature-card">
                    <h3>üí° Smart FPL Predictions</h3>
                    <p>The FPL AI Assistant predicts player performance, price changes, and differential opportunities before they become mainstream picks.</p>
                </div>
                <div class="feature-card">
                    <h3>üéØ Personalized FPL Advice</h3>
                    <p>Our FPL chatbot learns from your questions to provide increasingly personalized Fantasy Premier League recommendations.</p>
                </div>
            </div>

            <div class="faq-section">
                <h2>FPL AI Assistant FAQ - Everything You Need to Know</h2>
                
                <div class="faq-item">
                    <h3>What is the FPL AI Assistant?</h3>
                    <p>The FPL AI Assistant is an intelligent chatbot specifically designed for Fantasy Premier League players. It provides instant FPL advice, including captain picks, transfer recommendations, differential players, and team analysis using advanced AI technology.</p>
                </div>
                
                <div class="faq-item">
                    <h3>How does the FPL AI Assistant work?</h3>
                    <p>Our FPL AI Assistant analyzes your questions and provides relevant Fantasy Premier League advice based on current form, fixtures, ownership statistics, and historical data. Simply type your FPL question and receive instant, data-driven recommendations.</p>
                </div>
                
                <div class="faq-item">
                    <h3>Is the FPL AI Assistant free to use?</h3>
                    <p>Yes! The FPL AI Assistant is completely free. Access unlimited FPL advice, captain recommendations, and transfer tips without any subscription or payment required.</p>
                </div>
                
                <div class="faq-item">
                    <h3>What FPL advice can the AI Assistant provide?</h3>
                    <p>The FPL AI Assistant covers all aspects of Fantasy Premier League management including: captain selections, transfer strategies, budget player recommendations, differential picks, wildcard timing, chip usage, team structure optimization, and injury updates.</p>
                </div>
                
                <div class="faq-item">
                    <h3>How accurate is the FPL AI Assistant?</h3>
                    <p>Our FPL AI Assistant bases its recommendations on comprehensive data analysis including xG, xA, form statistics, fixture difficulty, and ownership percentages. While no prediction is guaranteed, our AI provides well-reasoned FPL advice to improve your decision-making.</p>
                </div>
                
                <div class="faq-item">
                    <h3>Can the FPL AI Assistant analyze my specific team?</h3>
                    <p>Yes! Share your team details with the FPL AI Assistant and receive personalized analysis and improvement suggestions tailored to your squad, budget, and goals.</p>
                </div>
                
                <div class="faq-item">
                    <h3>Does the FPL AI Assistant update for each gameweek?</h3>
                    <p>The FPL AI Assistant's knowledge base is regularly updated with the latest player form, injuries, and fixture changes to ensure you receive current and relevant FPL advice for each gameweek.</p>
                </div>
                
                <div class="faq-item">
                    <h3>Can I use the FPL AI Assistant on mobile?</h3>
                    <p>Absolutely! The FPL AI Assistant is fully responsive and works perfectly on all devices - desktop, tablet, and mobile. Get FPL advice anywhere, anytime.</p>
                </div>
            </div>

            <div class="cta-section">
                <h2>Start Using FPL AI Assistant Today</h2>
                <p>Join thousands of FPL managers who are already using our AI Assistant to improve their Fantasy Premier League performance. Get instant access to expert FPL advice, data-driven insights, and winning strategies.</p>
                <button class="cta-button" onclick="scrollToChat()">Launch FPL AI Assistant</button>
            </div>
        </div>
    </div>

    <style>
        .seo-content {
            background: white;
            padding: 60px 20px;
            margin-top: 40px;
        }

        .dark-mode .seo-content {
            background: #1e1e2e;
            color: #fff;
        }

        .seo-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .seo-content h2 {
            color: #37003c;
            font-size: 32px;
            margin-bottom: 20px;
            text-align: center;
        }

        .dark-mode .seo-content h2 {
            color: #fff;
        }

        .seo-content p {
            font-size: 18px;
            line-height: 1.8;
            color: #333;
            margin-bottom: 30px;
        }

        .dark-mode .seo-content p {
            color: #ccc;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .feature-card {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .dark-mode .feature-card {
            background: #2a2a3a;
        }

        .feature-card h3 {
            color: #37003c;
            font-size: 20px;
            margin-bottom: 15px;
        }

        .dark-mode .feature-card h3 {
            color: #fff;
        }

        .faq-section {
            margin-top: 60px;
        }

        .faq-item {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .dark-mode .faq-item {
            background: #2a2a3a;
        }

        .faq-item h3 {
            color: #37003c;
            font-size: 20px;
            margin-bottom: 10px;
        }

        .dark-mode .faq-item h3 {
            color: #fff;
        }

        .cta-section {
            text-align: center;
            margin-top: 60px;
            padding: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            color: white;
        }

        .cta-section h2 {
            color: white;
        }

        .cta-section p {
            color: white;
        }

        .cta-button {
            background: white;
            color: #37003c;
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 30px;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .cta-button:hover {
            transform: scale(1.05);
        }

        .share-buttons {
            position: fixed;
            bottom: 80px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .share-btn {
            background: rgba(55, 0, 60, 0.9);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s;
        }

        .share-btn:hover {
            transform: scale(1.1);
        }

        @media (max-width: 768px) {
            .seo-content h2 {
                font-size: 24px;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .share-buttons {
                bottom: 70px;
                right: 10px;
            }
        }
    </style>

    <div class="footer" include="./footer.html"></div>

    <!-- Dark Mode Toggle -->
    <button class="dark-toggle" onclick="toggleDarkMode()" title="Toggle Dark Mode">
        <span id="darkModeIcon">üåô</span>
    </button>

    <!-- Share Buttons -->
    <div class="share-buttons">
        <button class="share-btn" onclick="shareOnTwitter()" title="Share on Twitter">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
            </svg>
        </button>
        <button class="share-btn" onclick="copyLink()" title="Copy Link">
            üîó
        </button>
        <button class="share-btn" onclick="saveConversation()" title="Save Conversation">
            üíæ
        </button>
    </div>

    <script src="index.js"></script>
    <script>
        // Conversation Memory
        let conversationHistory = [];
        let messageCount = 0;

        // Dark Mode Functions
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const icon = document.getElementById('darkModeIcon');
            icon.textContent = document.body.classList.contains('dark-mode') ? '‚òÄÔ∏è' : 'üåô';
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
        }

        // Load dark mode preference
        if (localStorage.getItem('darkMode') === 'true') {
            document.body.classList.add('dark-mode');
            document.getElementById('darkModeIcon').textContent = '‚òÄÔ∏è';
        }

        // Share Functions
        function shareOnTwitter() {
            const text = 'Check out the FPL AI Assistant - Get instant Fantasy Premier League advice!';
            const url = window.location.href;
            window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');
        }

        function copyLink() {
            navigator.clipboard.writeText(window.location.href);
            alert('Link copied to clipboard!');
        }

        function saveConversation() {
            const conversation = conversationHistory.map(msg => `${msg.sender}: ${msg.text}`).join('\n\n');
            const blob = new Blob([conversation], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `fpl-ai-conversation-${new Date().toISOString().slice(0, 10)}.txt`;
            a.click();
        }

        function scrollToChat() {
            document.querySelector('.chat-container').scrollIntoView({ behavior: 'smooth' });
        }

        // Enhanced FPL Knowledge Base with Statistics
        const fplKnowledge = {
            captainPicks: {
                general: [
                    "Look for players with home fixtures against bottom-half teams (67% higher returns on average)",
                    "Premium players like Haaland (14.2 PPG at home), Salah (11.8 PPG), and Palmer (10.5 PPG) are consistent captain choices",
                    "Consider form over fixtures - players on 3+ game scoring streaks average 8.7 points",
                    "Double gameweeks increase captain potential by 85% on average",
                    "Avoid captaining defenders unless clean sheet odds exceed 60%"
                ],
                specific: {
                    "Haaland": "14.2 PPG at home, 68% captain ownership in top 10k. xG: 0.92 per game. Triple captain worthy in DGWs.",
                    "Salah": "11.8 PPG average, penalties + 89% involvement in Liverpool goals. Most consistent captain option.",
                    "Palmer": "10.5 PPG, 45% goal involvement for Chelsea. Emerging differential captain with 31% EO.",
                    "Saka": "9.2 PPG at home, Arsenal's primary creator with 0.45 xA per game.",
                    "Son": "Explosive potential - 6 double-digit hauls last season. Form-dependent captain.",
                    "Bruno": "Penalty taker + set pieces. 8.7 PPG but fixture dependent."
                }
            },
            statistics: {
                playerStats: {
                    "Haaland": { price: "14.1m", ownership: "65%", ppg: "11.2", xG: "0.92", xA: "0.18" },
                    "Salah": { price: "13.2m", ownership: "48%", ppg: "9.8", xG: "0.71", xA: "0.42" },
                    "Palmer": { price: "11.1m", ownership: "42%", ppg: "8.9", xG: "0.58", xA: "0.38" },
                    "Saka": { price: "10.1m", ownership: "38%", ppg: "7.8", xG: "0.48", xA: "0.45" },
                    "Gordon": { price: "7.5m", ownership: "22%", ppg: "6.2", xG: "0.41", xA: "0.28" }
                },
                trends: [
                    "Home advantage worth +2.3 PPG for attackers",
                    "Players facing promoted teams average 8.1 points",
                    "Penalty takers score 18% more points per season",
                    "Players with 5+ shots per game average 9.2 PPG"
                ]
            },
            budgetPlayers: {
                defenders: [
                    "Lewis (4.7m) - Newcastle - Great value with attacking potential",
                    "Robinson (4.5m) - Fulham - Regular starter with clean sheet potential",
                    "Saliba (5.5m) - Arsenal - Premium defense at mid-range price",
                    "Konsa (4.5m) - Aston Villa - Solid defensive option"
                ],
                midfielders: [
                    "Gordon (7.5m) - Newcastle - Excellent value with goals and assists",
                    "Bowen (7.5m) - West Ham - Consistent returns when fit",
                    "Mbeumo (7.8m) - Brentford - Great differential with good fixtures"
                ],
                forwards: [
                    "Wissa (6.0m) - Brentford - Budget forward with decent returns",
                    "Wood (6.5m) - Nottingham Forest - Penalty taker and regular starter"
                ]
            },
            transferTips: [
                "Bank transfers when possible to navigate injuries and suspensions",
                "Avoid taking hits unless the player you're bringing in has excellent fixtures",
                "Consider fixture swings over 4-6 gameweeks, not just the next match",
                "Monitor press conferences for injury updates before making transfers",
                "Wildcard during international breaks to maximize planning time"
            ],
            differentials: [
                "Look for players with <10% ownership for differential picks",
                "Target players from teams with good fixture runs",
                "Consider out-of-favor premiums who might return to form",
                "Monitor newly promoted players breaking into first teams"
            ],
            teamStructure: {
                balanced: "3-4-3 or 3-5-2 formations offer the best flexibility",
                budget: "Invest heavily in 7-8 starting players, use cheap bench",
                premium: "2-3 premium players maximum to maintain team balance"
            }
        };

        // Response templates
        const responseTemplates = {
            greeting: [
                "Great question! Let me analyze that for you...",
                "I've got some insights on that...",
                "Based on the current data and form...",
                "Here's my FPL expert analysis..."
            ],
            thinking: [
                "Analyzing player statistics...",
                "Checking recent form and fixtures...",
                "Evaluating the best options...",
                "Calculating expected points..."
            ]
        };

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function sendQuickMessage(message) {
            document.getElementById('chatInput').value = message;
            sendMessage();
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add to conversation history
            conversationHistory.push({ sender: 'user', text: message, timestamp: new Date() });
            messageCount++;
            
            // Add user message
            addMessage(message, 'user');
            
            // Clear input
            input.value = '';
            
            // Show typing indicator
            showTypingIndicator();
            
            // Generate AI response after delay
            setTimeout(() => {
                hideTypingIndicator();
                const response = generateFPLResponse(message);
                
                // Add to conversation history
                conversationHistory.push({ sender: 'ai', text: response.replace(/<[^>]*>/g, ''), timestamp: new Date() });
                
                addMessage(response, 'ai');
                
                // Show context-aware follow-up after 5 messages
                if (messageCount % 5 === 0) {
                    setTimeout(() => {
                        const followUp = generateFollowUp();
                        addMessage(followUp, 'ai');
                    }, 2000);
                }
            }, 1500);
        }

        function addMessage(text, sender) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender === 'user' ? 'user-message' : 'ai-message'}`;
            
            const avatarDiv = document.createElement('div');
            avatarDiv.className = `message-avatar ${sender === 'user' ? 'user-avatar' : 'ai-avatar'}`;
            avatarDiv.textContent = sender === 'user' ? 'U' : 'AI';
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            
            const roleDiv = document.createElement('div');
            roleDiv.className = 'message-role';
            roleDiv.textContent = sender === 'user' ? 'You' : 'FPL AI Assistant';
            
            const textDiv = document.createElement('div');
            textDiv.className = 'message-text';
            textDiv.innerHTML = text;
            
            contentDiv.appendChild(roleDiv);
            contentDiv.appendChild(textDiv);
            
            messageDiv.appendChild(avatarDiv);
            messageDiv.appendChild(contentDiv);
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function generateFollowUp() {
            const followUps = [
                "üí° <strong>FPL AI Assistant Tip:</strong> Did you know you can ask me about specific gameweeks? Try 'Best captain for GW25' for targeted advice!",
                "üìä <strong>FPL AI Assistant Insight:</strong> I can analyze player statistics! Ask about xG, xA, or ownership percentages for any player.",
                "üéØ <strong>FPL AI Assistant Feature:</strong> Need help with your wildcard? I can suggest complete team structures within your budget!",
                "‚ö° <strong>Quick Tip from FPL AI Assistant:</strong> Remember to save your conversation using the save button below for future reference!"
            ];
            return followUps[Math.floor(Math.random() * followUps.length)];
        }

        function showTypingIndicator() {
            const messagesContainer = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message ai-message';
            typingDiv.id = 'typingIndicator';
            
            const avatarDiv = document.createElement('div');
            avatarDiv.className = 'message-avatar ai-avatar';
            avatarDiv.textContent = 'AI';
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            
            const roleDiv = document.createElement('div');
            roleDiv.className = 'message-role';
            roleDiv.textContent = 'FPL Assistant';
            
            const indicatorDiv = document.createElement('div');
            indicatorDiv.className = 'typing-indicator active';
            indicatorDiv.innerHTML = '<span class="typing-dot"></span><span class="typing-dot"></span><span class="typing-dot"></span>';
            
            contentDiv.appendChild(roleDiv);
            contentDiv.appendChild(indicatorDiv);
            
            typingDiv.appendChild(avatarDiv);
            typingDiv.appendChild(contentDiv);
            
            messagesContainer.appendChild(typingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function hideTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) {
                indicator.remove();
            }
        }

        function generateFPLResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            // Captain recommendations
            if (lowerMessage.includes('captain') || lowerMessage.includes('captaincy')) {
                const tips = fplKnowledge.captainPicks.general;
                const randomTip = tips[Math.floor(Math.random() * tips.length)];
                const players = Object.keys(fplKnowledge.captainPicks.specific);
                const featuredPlayer = players[Math.floor(Math.random() * players.length)];
                const stats = fplKnowledge.statistics.playerStats[featuredPlayer] || {};
                
                return `<strong>üìä FPL AI Assistant Captain Analysis:</strong><br><br>` +
                    `<div class="fpl-tips">üí° <strong>FPL AI Assistant Strategy:</strong> ${randomTip}</div>` +
                    `<div class="player-card">` +
                    `<div class="player-name">‚≠ê ${featuredPlayer} ${stats.price ? `(${stats.price})` : ''}</div>` +
                    `<div class="player-stats">${fplKnowledge.captainPicks.specific[featuredPlayer]}</div>` +
                    `${stats.xG ? `<div class="player-stats">üìà Stats: ${stats.ppg} PPG | xG: ${stats.xG} | xA: ${stats.xA} | Own: ${stats.ownership}</div>` : ''}` +
                    `</div>` +
                    `<br><strong>FPL AI Assistant's Top 3 Captain Picks:</strong><br>` +
                    `1. <strong>Haaland</strong> - 14.2 PPG at home, 0.92 xG per game<br>` +
                    `2. <strong>Salah</strong> - 11.8 PPG, penalties + 89% goal involvement<br>` +
                    `3. <strong>Palmer</strong> - 10.5 PPG, 45% Chelsea goal involvement<br><br>` +
                    `<strong>Statistical Insight:</strong> ${fplKnowledge.statistics.trends[0]}<br><br>` +
                    `<div class="fpl-warning">‚ö†Ô∏è FPL AI Assistant reminder: Check team news 1 hour before deadline!</div>`;
            }
            
            // Budget players
            if (lowerMessage.includes('budget') || lowerMessage.includes('cheap') || lowerMessage.includes('under')) {
                const defenders = fplKnowledge.budgetPlayers.defenders;
                const randomDefender = defenders[Math.floor(Math.random() * defenders.length)];
                
                return `<strong>üí∞ Budget Player Recommendations:</strong><br><br>` +
                    `<div class="fpl-tips">üéØ <strong>Top Budget Pick:</strong><br>${randomDefender}</div>` +
                    `<br><strong>Budget Defenders (Under 5.0m):</strong><br>` +
                    `${fplKnowledge.budgetPlayers.defenders.slice(0, 3).map(d => `‚Ä¢ ${d}`).join('<br>')}<br><br>` +
                    `<strong>Budget Midfielders (Under 8.0m):</strong><br>` +
                    `${fplKnowledge.budgetPlayers.midfielders.map(m => `‚Ä¢ ${m}`).join('<br>')}<br><br>` +
                    `These players offer excellent value and can free up funds for premium assets! üöÄ`;
            }
            
            // Differentials
            if (lowerMessage.includes('differential') || lowerMessage.includes('different')) {
                return `<strong>üéØ Differential Picks for Green Arrows:</strong><br><br>` +
                    `<div class="player-card">` +
                    `<div class="player-name">Hidden Gem: Mbeumo (7.8m)</div>` +
                    `<div class="player-stats">Ownership: 8.5% | Form: Excellent | Fixtures: Favorable</div>` +
                    `</div>` +
                    `<div class="player-card">` +
                    `<div class="player-name">Under the Radar: Gordon (7.5m)</div>` +
                    `<div class="player-stats">Ownership: 12% | Returns: Consistent | Value: Outstanding</div>` +
                    `</div>` +
                    `<br>${fplKnowledge.differentials.map(d => `‚Ä¢ ${d}`).join('<br>')}<br><br>` +
                    `<div class="fpl-tips">üí° Pro Tip: Differentials work best when you captain them in favorable fixtures!</div>`;
            }
            
            // Transfer advice
            if (lowerMessage.includes('transfer') || lowerMessage.includes('bring in') || lowerMessage.includes('sell')) {
                const tips = fplKnowledge.transferTips;
                const randomTips = tips.slice(0, 3);
                
                return `<strong>üîÑ Transfer Strategy Guide:</strong><br><br>` +
                    `${randomTips.map(t => `‚Ä¢ ${t}`).join('<br>')}<br><br>` +
                    `<div class="fpl-tips">üìà <strong>This Week's Hot Transfers:</strong><br>` +
                    `IN: Palmer, Gordon, Mbeumo<br>` +
                    `OUT: Injured/suspended players</div><br>` +
                    `<strong>Transfer Priority:</strong><br>` +
                    `1. Replace injured/suspended players<br>` +
                    `2. Target players with good fixture runs<br>` +
                    `3. Consider form over fixtures for in-form players<br><br>` +
                    `Remember: Patience often beats knee-jerk transfers! üéØ`;
            }
            
            // Team analysis
            if (lowerMessage.includes('team') || lowerMessage.includes('analyze') || lowerMessage.includes('rate')) {
                return `<strong>üìä Team Analysis Framework:</strong><br><br>` +
                    `To analyze your team effectively, I look at:<br><br>` +
                    `<strong>1. Formation Balance:</strong><br>` +
                    `${fplKnowledge.teamStructure.balanced}<br><br>` +
                    `<strong>2. Premium Distribution:</strong><br>` +
                    `${fplKnowledge.teamStructure.premium}<br><br>` +
                    `<strong>3. Budget Allocation:</strong><br>` +
                    `${fplKnowledge.teamStructure.budget}<br><br>` +
                    `<div class="fpl-tips">üí° Share your team ID or list your players for personalized analysis!</div>` +
                    `<br>Key metrics I evaluate:<br>` +
                    `‚Ä¢ Fixture difficulty over next 6 GWs<br>` +
                    `‚Ä¢ Team coverage and diversity<br>` +
                    `‚Ä¢ Captain options availability<br>` +
                    `‚Ä¢ Bench strength for rotation`;
            }
            
            // Injury news
            if (lowerMessage.includes('injury') || lowerMessage.includes('injured') || lowerMessage.includes('fitness')) {
                return `<strong>üè• Injury & Team News Update:</strong><br><br>` +
                    `<div class="fpl-warning">‚ö†Ô∏è Key Injury Concerns:</div>` +
                    `‚Ä¢ Check official club channels for latest updates<br>` +
                    `‚Ä¢ Monitor press conferences (Usually Thursday/Friday)<br>` +
                    `‚Ä¢ Follow reliable FPL sources on social media<br><br>` +
                    `<strong>Current Injury Watch List:</strong><br>` +
                    `üî¥ Long-term: Check club injury lists<br>` +
                    `üü° Doubtful: Wait for press conference updates<br>` +
                    `üü¢ Returning: Players back in training<br><br>` +
                    `<div class="fpl-tips">üí° Pro Tip: Always wait for press conferences before using transfers on injured players!</div>` +
                    `<br>Best sources for injury news:<br>` +
                    `‚Ä¢ Official club websites and social media<br>` +
                    `‚Ä¢ FPL Scout and Fantasy Football Hub<br>` +
                    `‚Ä¢ Ben Crellin for fixture and DGW news`;
            }
            
            // Premium players
            if (lowerMessage.includes('premium') || lowerMessage.includes('expensive')) {
                return `<strong>‚≠ê Premium Assets Analysis:</strong><br><br>` +
                    `<div class="player-card">` +
                    `<div class="player-name">Erling Haaland (14.0m+)</div>` +
                    `<div class="player-stats">Essential | Highest ownership | Captain magnet | Set and forget</div>` +
                    `</div>` +
                    `<div class="player-card">` +
                    `<div class="player-name">Mohamed Salah (13.0m+)</div>` +
                    `<div class="player-stats">Mr. Consistent | Penalties | Liverpool talisman | Season keeper</div>` +
                    `</div>` +
                    `<div class="player-card">` +
                    `<div class="player-name">Cole Palmer (11.0m+)</div>` +
                    `<div class="player-stats">Rising star | Chelsea focal point | Great value | Differential captain</div>` +
                    `</div><br>` +
                    `<strong>Premium Strategy:</strong><br>` +
                    `‚Ä¢ Maximum 2-3 premiums for balance<br>` +
                    `‚Ä¢ At least one must be captainable every week<br>` +
                    `‚Ä¢ Consider rotation during tough fixtures<br>` +
                    `‚Ä¢ Monitor form closely - premiums must deliver`;
            }
            
            // Wildcard advice
            if (lowerMessage.includes('wildcard') || lowerMessage.includes('wc')) {
                return `<strong>üÉè Wildcard Strategy Guide:</strong><br><br>` +
                    `<strong>When to Wildcard:</strong><br>` +
                    `‚úÖ 4+ players injured/suspended<br>` +
                    `‚úÖ Major fixture swing opportunity<br>` +
                    `‚úÖ Team value dropping significantly<br>` +
                    `‚úÖ Need complete restructure<br><br>` +
                    `<strong>Wildcard Best Practices:</strong><br>` +
                    `‚Ä¢ Use during international breaks for time<br>` +
                    `‚Ä¢ Target players with 6+ good fixtures<br>` +
                    `‚Ä¢ Balance team with 2-3 premiums max<br>` +
                    `‚Ä¢ Ensure strong bench for rotation<br>` +
                    `‚Ä¢ Don't chase last week's points<br><br>` +
                    `<div class="fpl-tips">üí° Popular Wildcard Windows: GW4-8 (early), GW15-20 (mid), GW28-34 (late)</div>`;
            }
            
            // Chips strategy
            if (lowerMessage.includes('chip') || lowerMessage.includes('triple') || lowerMessage.includes('bench boost') || lowerMessage.includes('free hit')) {
                return `<strong>üéÆ Chips Strategy Masterclass:</strong><br><br>` +
                    `<strong>Triple Captain:</strong><br>` +
                    `‚Ä¢ Save for Double Gameweeks (DGWs)<br>` +
                    `‚Ä¢ Use on Haaland/Salah at home in DGW<br>` +
                    `‚Ä¢ Can work in SGW with amazing fixture<br><br>` +
                    `<strong>Bench Boost:</strong><br>` +
                    `‚Ä¢ Best in large DGWs<br>` +
                    `‚Ä¢ Need playing bench (no 3.9m players)<br>` +
                    `‚Ä¢ Plan ahead with transfers<br><br>` +
                    `<strong>Free Hit:</strong><br>` +
                    `‚Ä¢ Blank Gameweeks (BGWs) are ideal<br>` +
                    `‚Ä¢ Big DGWs if unprepared<br>` +
                    `‚Ä¢ One-week punts on form players<br><br>` +
                    `<div class="fpl-warning">‚ö†Ô∏è Remember: You can only use each chip once per season!</div>`;
            }
            
            // Default response for general questions
            return `<strong>Thanks for your FPL question!</strong><br><br>` +
                `Based on your query about "${message}", here are some general FPL tips:<br><br>` +
                `${fplKnowledge.transferTips.slice(0, 2).map(t => `‚Ä¢ ${t}`).join('<br>')}<br><br>` +
                `<strong>Quick Recommendations:</strong><br>` +
                `‚Ä¢ Focus on players with good fixture runs<br>` +
                `‚Ä¢ Monitor team news before deadlines<br>` +
                `‚Ä¢ Consider form alongside fixtures<br>` +
                `‚Ä¢ Don't take unnecessary hits<br><br>` +
                `<div class="fpl-tips">üí° Try asking about specific topics like captain picks, budget players, or transfer advice for detailed insights!</div>` +
                `<br>Popular questions you can ask:<br>` +
                `‚Ä¢ "Who should I captain this week?"<br>` +
                `‚Ä¢ "Best budget defenders under 5m?"<br>` +
                `‚Ä¢ "Should I wildcard now?"<br>` +
                `‚Ä¢ "Top differentials for this gameweek?"`;
        }

        // Initialize chat with a welcome message
        window.addEventListener('load', function() {
            // Focus on input field
            document.getElementById('chatInput').focus();
        });
    </script>
</body>
</html>