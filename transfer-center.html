<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Transfer Center | Premier League Transfers & FPL Activity | EPL News Hub</title>
    <meta name="description" content="Track Premier League transfers, FPL transfer activity, price changes, and transfer rumors. Real-time data on the most transferred players.">

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TVPLGM5QY9"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-TVPLGM5QY9');
    </script>

    <link rel="icon" type="image/png" href="/eplnewshubnewlogo.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #0d0d12;
            color: #e5e5e5;
            min-height: 100vh;
            line-height: 1.6;
        }

        /* Dark mode header override */
        .header {
            background: #0d0d12 !important;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .page-header {
            text-align: center;
            padding: 50px 20px;
            background: linear-gradient(180deg, rgba(55, 0, 100, 0.4) 0%, rgba(0, 200, 100, 0.15) 100%);
            border-radius: 24px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .page-header h1 {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, #00ff87 0%, #60efff 50%, #00ff87 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
            letter-spacing: -1px;
        }

        .page-header p {
            color: #888;
            font-size: 1.1rem;
            margin-bottom: 8px;
        }

        .last-updated {
            color: #555;
            font-size: 0.85rem;
            margin-top: 15px;
        }

        .transfer-tabs {
            display: flex;
            gap: 12px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .transfer-tab-btn {
            padding: 14px 28px;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            color: #777;
            cursor: pointer;
            transition: all 0.25s ease;
            font-size: 14px;
            font-weight: 600;
            font-family: inherit;
        }

        .transfer-tab-btn:hover {
            background: rgba(255, 255, 255, 0.08);
            color: #fff;
            border-color: rgba(255, 255, 255, 0.15);
        }

        .transfer-tab-btn.active {
            background: linear-gradient(135deg, #00ff87, #00c853);
            color: #000;
            border-color: transparent;
            box-shadow: 0 4px 20px rgba(0, 255, 135, 0.3);
        }

        .transfer-tab-content {
            display: none;
        }

        .transfer-tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .transfer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(420px, 1fr));
            gap: 25px;
        }

        .transfer-panel {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 20px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.06);
            backdrop-filter: blur(10px);
        }

        .transfer-panel-header {
            padding: 20px 24px;
            display: flex;
            align-items: center;
            gap: 14px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
        }

        .transfer-panel-header.hot {
            background: linear-gradient(135deg, rgba(255, 100, 100, 0.2), rgba(255, 150, 50, 0.15));
        }

        .transfer-panel-header.cold {
            background: linear-gradient(135deg, rgba(100, 150, 255, 0.2), rgba(135, 206, 250, 0.15));
        }

        .transfer-panel-header.neutral {
            background: linear-gradient(135deg, rgba(100, 100, 100, 0.15), rgba(150, 150, 150, 0.1));
        }

        .transfer-panel-header.premier {
            background: linear-gradient(135deg, rgba(55, 0, 60, 0.5), rgba(128, 0, 128, 0.3));
        }

        .transfer-panel-header.rumors {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.2), rgba(255, 152, 0, 0.15));
        }

        .transfer-panel-header.rise {
            background: linear-gradient(135deg, rgba(0, 255, 135, 0.2), rgba(0, 200, 100, 0.15));
        }

        .transfer-panel-header.fall {
            background: linear-gradient(135deg, rgba(255, 59, 48, 0.2), rgba(255, 100, 100, 0.15));
        }

        .transfer-panel-header.summer {
            background: linear-gradient(135deg, rgba(255, 200, 50, 0.2), rgba(255, 150, 50, 0.15));
        }

        .transfer-icon {
            font-size: 28px;
        }

        .transfer-panel-header h3 {
            flex: 1;
            margin: 0;
            font-size: 18px;
            font-weight: 700;
            color: #fff;
        }

        .transfer-badge {
            padding: 6px 14px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 20px;
            font-size: 11px;
            color: #999;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .transfer-badge.live {
            background: rgba(0, 255, 135, 0.2);
            color: #00ff87;
        }

        .transfer-list {
            max-height: 500px;
            overflow-y: auto;
        }

        .transfer-list::-webkit-scrollbar {
            width: 6px;
        }

        .transfer-list::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.02);
        }

        .transfer-list::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        .transfer-list.horizontal {
            display: flex;
            overflow-x: auto;
            max-height: none;
            padding: 20px;
            gap: 15px;
        }

        .transfer-list.horizontal::-webkit-scrollbar {
            height: 6px;
        }

        .transfer-item {
            display: flex;
            align-items: center;
            padding: 16px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.04);
            gap: 14px;
            transition: background 0.2s;
        }

        .transfer-item:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .transfer-item:last-child {
            border-bottom: none;
        }

        .transfer-rank {
            width: 34px;
            height: 34px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.06);
            border-radius: 50%;
            font-weight: 700;
            font-size: 13px;
            color: #666;
        }

        .transfer-rank.top-3 {
            background: linear-gradient(135deg, #ffd700, #ffaa00);
            color: #000;
        }

        .transfer-player-info {
            flex: 1;
        }

        .transfer-player-name {
            font-weight: 600;
            font-size: 15px;
            margin-bottom: 4px;
            color: #fff;
        }

        .transfer-player-meta {
            font-size: 12px;
            color: #666;
        }

        .transfer-stats {
            text-align: right;
        }

        .transfer-count {
            font-weight: 700;
            font-size: 17px;
            color: #00ff87;
        }

        .transfer-count.negative {
            color: #ff6b6b;
        }

        .transfer-count.positive {
            color: #00ff87;
        }

        .transfer-price {
            font-size: 12px;
            color: #666;
            margin-top: 2px;
        }

        .transfer-loading {
            padding: 60px 20px;
            text-align: center;
            color: #666;
        }

        .transfer-loading p {
            margin-top: 15px;
            font-size: 14px;
        }

        .loading-spinner {
            width: 44px;
            height: 44px;
            border: 3px solid rgba(0, 255, 135, 0.15);
            border-top-color: #00ff87;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .transfer-card {
            flex: 0 0 200px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            transition: transform 0.2s, background 0.2s;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .transfer-card:hover {
            transform: translateY(-4px);
            background: rgba(255, 255, 255, 0.06);
        }

        .transfer-card-name {
            font-weight: 700;
            font-size: 15px;
            margin-bottom: 6px;
            color: #fff;
        }

        .transfer-card-team {
            font-size: 12px;
            color: #666;
            margin-bottom: 14px;
        }

        .transfer-card-stat {
            font-size: 26px;
            font-weight: 800;
        }

        .transfer-card-stat.positive {
            color: #00ff87;
        }

        .transfer-card-stat.negative {
            color: #ff6b6b;
        }

        .transfer-card-label {
            font-size: 11px;
            color: #666;
            margin-top: 6px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .real-transfer-item {
            display: flex;
            align-items: center;
            padding: 18px 22px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.04);
            gap: 16px;
            transition: background 0.2s;
        }

        .real-transfer-item:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .real-transfer-item:last-child {
            border-bottom: none;
        }

        .real-transfer-player {
            flex: 1;
        }

        .real-transfer-name {
            font-weight: 700;
            font-size: 16px;
            margin-bottom: 5px;
            color: #fff;
        }

        .real-transfer-details {
            font-size: 13px;
            color: #666;
        }

        .real-transfer-clubs {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .real-transfer-club {
            padding: 8px 14px;
            background: rgba(255, 255, 255, 0.06);
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
        }

        .real-transfer-club.from {
            color: #ff8a8a;
        }

        .real-transfer-club.to {
            color: #7dffb3;
        }

        .real-transfer-arrow {
            color: #555;
            font-size: 18px;
        }

        .real-transfer-fee {
            font-weight: 800;
            font-size: 15px;
            color: #ffd700;
            text-align: right;
        }

        .real-transfer-type {
            font-size: 11px;
            color: #666;
            margin-top: 3px;
        }

        .real-transfer-type.loan {
            color: #60efff;
        }

        .team-builder-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 14px 28px;
            background: linear-gradient(135deg, #00ff87, #00c853);
            color: #000;
            text-decoration: none;
            border-radius: 12px;
            font-weight: 700;
            margin-top: 20px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .team-builder-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 255, 135, 0.35);
        }

        .main-content {
            padding: 20px 0 60px;
        }

        .section-divider {
            margin: 30px 0;
            text-align: center;
            color: #444;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .club-filter {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .club-filter-btn {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 8px;
            color: #777;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.2s;
            font-family: inherit;
        }

        .club-filter-btn:hover, .club-filter-btn.active {
            background: rgba(0, 255, 135, 0.15);
            border-color: rgba(0, 255, 135, 0.3);
            color: #00ff87;
        }

        .data-source {
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.02);
            border-top: 1px solid rgba(255, 255, 255, 0.04);
            font-size: 11px;
            color: #555;
            text-align: center;
        }

        .data-source a {
            color: #00ff87;
            text-decoration: none;
        }

        @media (max-width: 768px) {
            .transfer-grid {
                grid-template-columns: 1fr;
            }

            .page-header h1 {
                font-size: 2rem;
            }

            .transfer-tab-btn {
                font-size: 12px;
                padding: 12px 18px;
            }

            .real-transfer-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }

            .real-transfer-clubs {
                width: 100%;
            }

            .real-transfer-fee {
                text-align: left;
            }
        }

        /* Footer dark mode */
        .footer {
            background: #0d0d12 !important;
            border-top: 1px solid rgba(255, 255, 255, 0.1) !important;
        }
    </style>
</head>
<body>
    <div class="header" include="./header.html"></div>

    <main class="main-content">
        <div class="container">
            <div class="page-header">
                <h1>Transfer Center</h1>
                <p>Live FPL transfer activity & Premier League transfer news</p>
                <p class="last-updated" id="last-updated">Data updates automatically</p>
                <a href="/fpl-team-builder.html" class="team-builder-link">Open FPL Team Builder</a>
            </div>

            <div class="transfer-tabs">
                <button class="transfer-tab-btn active" data-transfer-tab="fpl-activity">FPL Activity</button>
                <button class="transfer-tab-btn" data-transfer-tab="real-transfers">Premier League Transfers</button>
                <button class="transfer-tab-btn" data-transfer-tab="price-changes">Price Changes</button>
            </div>

            <div id="fpl-activity-tab" class="transfer-tab-content active">
                <div class="transfer-grid">
                    <div class="transfer-panel">
                        <div class="transfer-panel-header hot">
                            <span class="transfer-icon">üî•</span>
                            <h3>Most Transferred In</h3>
                            <span class="transfer-badge live">Live</span>
                        </div>
                        <div class="transfer-list" id="transfers-in-list">
                            <div class="transfer-loading">
                                <div class="loading-spinner"></div>
                                <p>Loading transfer data...</p>
                            </div>
                        </div>
                    </div>

                    <div class="transfer-panel">
                        <div class="transfer-panel-header cold">
                            <span class="transfer-icon">‚ùÑÔ∏è</span>
                            <h3>Most Transferred Out</h3>
                            <span class="transfer-badge live">Live</span>
                        </div>
                        <div class="transfer-list" id="transfers-out-list">
                            <div class="transfer-loading">
                                <div class="loading-spinner"></div>
                                <p>Loading transfer data...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="transfer-panel" style="margin-top: 25px;">
                    <div class="transfer-panel-header neutral">
                        <span class="transfer-icon">üìä</span>
                        <h3>Biggest Net Transfers</h3>
                        <span class="transfer-badge">Season Total</span>
                    </div>
                    <div class="transfer-list horizontal" id="net-transfers-list">
                        <div class="transfer-loading">
                            <div class="loading-spinner"></div>
                            <p>Loading transfer data...</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="real-transfers-tab" class="transfer-tab-content">
                <div class="club-filter" id="club-filter">
                    <button class="club-filter-btn active" data-club="all">All Clubs</button>
                </div>

                <div class="transfer-panel">
                    <div class="transfer-panel-header premier">
                        <span class="transfer-icon">‚öΩ</span>
                        <h3>January 2025 Window</h3>
                        <span class="transfer-badge">Confirmed</span>
                    </div>
                    <div class="transfer-list" id="january-transfers-list">
                        <div class="transfer-loading">
                            <div class="loading-spinner"></div>
                            <p>Loading transfer news...</p>
                        </div>
                    </div>
                    <div class="data-source">Data from <a href="https://www.skysports.com/football/news/11095/13280582/transfer-news-january-transfer-window-2025-premier-league-deals-ins-and-outs" target="_blank">Sky Sports</a> & <a href="https://www.premierleague.com/transfers" target="_blank">Premier League</a></div>
                </div>

                <div class="transfer-panel" style="margin-top: 25px;">
                    <div class="transfer-panel-header summer">
                        <span class="transfer-icon">‚òÄÔ∏è</span>
                        <h3>Summer 2024 Big Signings</h3>
                        <span class="transfer-badge">Completed</span>
                    </div>
                    <div class="transfer-list" id="summer-transfers-list">
                        <div class="transfer-loading">
                            <div class="loading-spinner"></div>
                            <p>Loading transfers...</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="price-changes-tab" class="transfer-tab-content">
                <div class="transfer-grid">
                    <div class="transfer-panel">
                        <div class="transfer-panel-header rise">
                            <span class="transfer-icon">üìà</span>
                            <h3>Price Risers</h3>
                            <span class="transfer-badge live">This GW</span>
                        </div>
                        <div class="transfer-list" id="price-risers-list">
                            <div class="transfer-loading">
                                <div class="loading-spinner"></div>
                                <p>Loading price data...</p>
                            </div>
                        </div>
                    </div>

                    <div class="transfer-panel">
                        <div class="transfer-panel-header fall">
                            <span class="transfer-icon">üìâ</span>
                            <h3>Price Fallers</h3>
                            <span class="transfer-badge live">This GW</span>
                        </div>
                        <div class="transfer-list" id="price-fallers-list">
                            <div class="transfer-loading">
                                <div class="loading-spinner"></div>
                                <p>Loading price data...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="transfer-panel" style="margin-top: 25px;">
                    <div class="transfer-panel-header neutral">
                        <span class="transfer-icon">üí∞</span>
                        <h3>Biggest Season Price Changes</h3>
                        <span class="transfer-badge">Since Start</span>
                    </div>
                    <div class="transfer-list horizontal" id="season-price-changes-list">
                        <div class="transfer-loading">
                            <div class="loading-spinner"></div>
                            <p>Loading price data...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div class="footer" include="footer.html"></div>
    <script src="./index.js"></script>

    <script>
        let allPlayers = [];
        let teams = [];
        let currentClubFilter = 'all';

        const positionMap = {
            1: 'GK',
            2: 'DEF',
            3: 'MID',
            4: 'FWD'
        };

        // Tab switching
        document.querySelectorAll('.transfer-tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.transfer-tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.transfer-tab-content').forEach(c => c.classList.remove('active'));
                btn.classList.add('active');
                document.getElementById(btn.dataset.transferTab + '-tab').classList.add('active');
            });
        });

        // Real January 2025 Transfer Data
        const january2025Transfers = [
            // Manchester City - Major Signings
            { name: 'Omar Marmoush', from: 'Eintracht Frankfurt', to: 'Man City', fee: '¬£59m', type: 'permanent' },
            { name: 'Nico Gonzalez', from: 'Porto', to: 'Man City', fee: '¬£50m', type: 'permanent' },
            { name: 'Abdukodir Khusanov', from: 'Lens', to: 'Man City', fee: '¬£33.5m', type: 'permanent' },
            { name: 'Vitor Reis', from: 'Palmeiras', to: 'Man City', fee: '¬£29.6m', type: 'permanent' },
            { name: 'Kyle Walker', from: 'Man City', to: 'AC Milan', fee: 'Loan', type: 'loan' },

            // Manchester United
            { name: 'Patrick Dorgu', from: 'Lecce', to: 'Man Utd', fee: '¬£30m', type: 'permanent' },
            { name: 'Marcus Rashford', from: 'Man Utd', to: 'Aston Villa', fee: 'Loan', type: 'loan' },
            { name: 'Antony', from: 'Man Utd', to: 'Real Betis', fee: 'Loan', type: 'loan' },

            // Aston Villa
            { name: 'Donyell Malen', from: 'Borussia Dortmund', to: 'Aston Villa', fee: '¬£20m', type: 'permanent' },
            { name: 'Jhon Duran', from: 'Aston Villa', to: 'Al Nassr', fee: '¬£64m', type: 'permanent' },
            { name: 'Marco Asensio', from: 'PSG', to: 'Aston Villa', fee: 'Loan', type: 'loan' },
            { name: 'Axel Disasi', from: 'Chelsea', to: 'Aston Villa', fee: 'Loan', type: 'loan' },
            { name: 'Jaden Philogene', from: 'Aston Villa', to: 'Ipswich', fee: '¬£20m', type: 'permanent' },
            { name: 'Diego Carlos', from: 'Aston Villa', to: 'Fenerbahce', fee: '¬£10m', type: 'permanent' },
            { name: 'Emiliano Buendia', from: 'Aston Villa', to: 'Bayer Leverkusen', fee: 'Loan', type: 'loan' },

            // Tottenham
            { name: 'Antonin Kinsky', from: 'Slavia Prague', to: 'Tottenham', fee: '¬£12.5m', type: 'permanent' },
            { name: 'Kevin Danso', from: 'Lens', to: 'Tottenham', fee: 'Loan', type: 'loan' },
            { name: 'Mathys Tel', from: 'Bayern Munich', to: 'Tottenham', fee: 'Loan', type: 'loan' },

            // Brighton
            { name: 'Diego Gomez', from: 'Inter Miami', to: 'Brighton', fee: '¬£11m', type: 'permanent' },
            { name: 'Eiran Cashin', from: 'Derby', to: 'Brighton', fee: '¬£9m', type: 'permanent' },
            { name: 'Evan Ferguson', from: 'Brighton', to: 'West Ham', fee: 'Loan', type: 'loan' },
            { name: 'Julio Enciso', from: 'Brighton', to: 'Ipswich', fee: 'Loan', type: 'loan' },

            // Wolves
            { name: 'Emmanuel Agbadou', from: 'Reims', to: 'Wolves', fee: '¬£16.6m', type: 'permanent' },
            { name: 'Marshall Munetsi', from: 'Reims', to: 'Wolves', fee: '¬£16m', type: 'permanent' },
            { name: 'Nasser Djiga', from: 'Red Star Belgrade', to: 'Wolves', fee: '¬£10m', type: 'permanent' },

            // Chelsea
            { name: 'Joao Felix', from: 'Chelsea', to: 'AC Milan', fee: 'Loan', type: 'loan' },
            { name: 'Renato Veiga', from: 'Chelsea', to: 'Juventus', fee: 'Loan', type: 'loan' },
            { name: 'Ben Chilwell', from: 'Chelsea', to: 'Crystal Palace', fee: 'Loan', type: 'loan' },
            { name: 'Cesare Casadei', from: 'Chelsea', to: 'Torino', fee: '¬£12.5m', type: 'permanent' },
            { name: 'Carney Chukwuemeka', from: 'Chelsea', to: 'Borussia Dortmund', fee: 'Loan', type: 'loan' },

            // Leicester
            { name: 'Tom Cannon', from: 'Leicester', to: 'Sheffield Utd', fee: '¬£10m', type: 'permanent' },

            // Ipswich
            { name: 'Ben Godfrey', from: 'Atalanta', to: 'Ipswich', fee: 'Loan', type: 'loan' },
            { name: 'Alex Palmer', from: 'West Brom', to: 'Ipswich', fee: '¬£4m', type: 'permanent' },

            // Brentford
            { name: 'Michael Kayode', from: 'Fiorentina', to: 'Brentford', fee: 'Loan (¬£13.5m option)', type: 'loan' },

            // Bournemouth
            { name: 'Julio Soler', from: 'Lanus', to: 'Bournemouth', fee: '¬£6.6m', type: 'permanent' },
            { name: 'Philip Billing', from: 'Bournemouth', to: 'Napoli', fee: 'Loan', type: 'loan' },

            // Southampton
            { name: 'Albert Gronbaek', from: 'Rennes', to: 'Southampton', fee: 'Loan', type: 'loan' },
            { name: 'Adam Armstrong', from: 'Southampton', to: 'West Brom', fee: 'Loan', type: 'loan' },
            { name: 'Ben Brereton Diaz', from: 'Southampton', to: 'Sheffield Utd', fee: 'Loan', type: 'loan' },

            // Crystal Palace
            { name: 'Romain Esse', from: 'Millwall', to: 'Crystal Palace', fee: 'Undisclosed', type: 'permanent' },

            // West Ham
            { name: 'James Ward-Prowse', from: 'Nottingham Forest', to: 'West Ham', fee: 'Recall', type: 'permanent' },

            // Newcastle
            { name: 'Lloyd Kelly', from: 'Newcastle', to: 'Juventus', fee: 'Loan', type: 'loan' },

            // Liverpool
            { name: 'Jayden Danns', from: 'Liverpool', to: 'Sunderland', fee: 'Loan', type: 'loan' },
            { name: 'Stefan Bajcetic', from: 'Liverpool', to: 'Las Palmas', fee: 'Loan', type: 'loan' },

            // Everton
            { name: 'Carlos Alcaraz', from: 'Flamengo', to: 'Everton', fee: 'Loan', type: 'loan' },

            // Nottingham Forest
            { name: 'Tyler Bindon', from: 'Reading', to: 'Nottingham Forest', fee: 'Undisclosed', type: 'permanent' }
        ];

        // Summer 2024 Big Signings
        const summer2024Transfers = [
            { name: 'Dominic Solanke', from: 'Bournemouth', to: 'Tottenham', fee: '¬£65m', type: 'permanent' },
            { name: 'Pedro Neto', from: 'Wolves', to: 'Chelsea', fee: '¬£54m', type: 'permanent' },
            { name: 'Leny Yoro', from: 'Lille', to: 'Man Utd', fee: '¬£52m', type: 'permanent' },
            { name: 'Amadou Onana', from: 'Everton', to: 'Aston Villa', fee: '¬£50m', type: 'permanent' },
            { name: 'Riccardo Calafiori', from: 'Bologna', to: 'Arsenal', fee: '¬£42m', type: 'permanent' },
            { name: 'Archie Gray', from: 'Leeds', to: 'Tottenham', fee: '¬£40m', type: 'permanent' },
            { name: 'Ian Maatsen', from: 'Chelsea', to: 'Aston Villa', fee: '¬£37.5m', type: 'permanent' },
            { name: 'Joshua Zirkzee', from: 'Bologna', to: 'Man Utd', fee: '¬£36.5m', type: 'permanent' },
            { name: 'Savinho', from: 'Troyes', to: 'Man City', fee: '¬£33m', type: 'permanent' },
            { name: 'Yankuba Minteh', from: 'Newcastle', to: 'Brighton', fee: '¬£30m', type: 'permanent' },
            { name: 'Giorgi Mamardashvili', from: 'Valencia', to: 'Liverpool', fee: '¬£29m', type: 'permanent' },
            { name: 'Joao Pedro', from: 'Watford', to: 'Brighton', fee: '¬£30m', type: 'permanent' },
            { name: 'Matthijs de Ligt', from: 'Bayern Munich', to: 'Man Utd', fee: '¬£42m', type: 'permanent' },
            { name: 'Manuel Ugarte', from: 'PSG', to: 'Man Utd', fee: '¬£42m', type: 'permanent' },
            { name: 'Noussair Mazraoui', from: 'Bayern Munich', to: 'Man Utd', fee: '¬£17m', type: 'permanent' }
        ];

        // Get unique clubs for filter
        function getUniqueClubs() {
            const clubs = new Set();
            january2025Transfers.forEach(t => {
                clubs.add(t.from);
                clubs.add(t.to);
            });
            return Array.from(clubs).filter(c =>
                ['Man City', 'Man Utd', 'Arsenal', 'Chelsea', 'Liverpool', 'Tottenham', 'Aston Villa',
                 'Newcastle', 'Brighton', 'West Ham', 'Wolves', 'Crystal Palace', 'Everton',
                 'Nottingham Forest', 'Bournemouth', 'Brentford', 'Fulham', 'Leicester',
                 'Southampton', 'Ipswich'].includes(c)
            ).sort();
        }

        // Initialize club filter
        function initClubFilter() {
            const filterContainer = document.getElementById('club-filter');
            const clubs = getUniqueClubs();

            filterContainer.innerHTML = '<button class="club-filter-btn active" data-club="all">All Clubs</button>';
            clubs.forEach(club => {
                filterContainer.innerHTML += `<button class="club-filter-btn" data-club="${club}">${club}</button>`;
            });

            filterContainer.querySelectorAll('.club-filter-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    filterContainer.querySelectorAll('.club-filter-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentClubFilter = btn.dataset.club;
                    loadJanuaryTransfers();
                });
            });
        }

        async function fetchFPLData() {
            const fplUrl = 'https://fantasy.premierleague.com/api/bootstrap-static/';
            const proxies = [
                { name: 'corsproxy.io', url: `https://corsproxy.io/?${encodeURIComponent(fplUrl)}` },
                { name: 'allorigins-raw', url: `https://api.allorigins.win/raw?url=${encodeURIComponent(fplUrl)}` }
            ];

            for (const proxy of proxies) {
                try {
                    const response = await fetch(proxy.url);
                    if (!response.ok) continue;
                    const data = await response.json();
                    if (data && data.elements) {
                        allPlayers = data.elements;
                        teams = data.teams || [];
                        document.getElementById('last-updated').textContent =
                            `FPL data updated: ${new Date().toLocaleString('en-GB')}`;
                        loadAllTransferData();
                        return;
                    }
                } catch (error) {
                    console.log(`Proxy ${proxy.name} failed`);
                }
            }
            showError();
        }

        function showError() {
            document.querySelectorAll('.transfer-loading').forEach(el => {
                el.innerHTML = '<p style="color: #ff6b6b;">Failed to load data. Please refresh.</p>';
            });
        }

        function loadAllTransferData() {
            loadFPLTransfersIn();
            loadFPLTransfersOut();
            loadNetTransfers();
            loadPriceRisers();
            loadPriceFallers();
            loadSeasonPriceChanges();
            loadJanuaryTransfers();
            loadSummerTransfers();
            initClubFilter();
        }

        function formatNumber(num) {
            if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
            if (num >= 1000) return (num / 1000).toFixed(0) + 'K';
            return num.toString();
        }

        function loadFPLTransfersIn() {
            const sorted = [...allPlayers].filter(p => p.transfers_in_event > 0)
                .sort((a, b) => b.transfers_in_event - a.transfers_in_event).slice(0, 15);
            const container = document.getElementById('transfers-in-list');

            if (sorted.length === 0) {
                container.innerHTML = '<p style="padding: 30px; color: #666; text-align: center;">No transfer data available for this gameweek</p>';
                return;
            }

            container.innerHTML = sorted.map((p, i) => {
                const team = teams.find(t => t.id === p.team);
                return `
                    <div class="transfer-item">
                        <div class="transfer-rank ${i < 3 ? 'top-3' : ''}">${i + 1}</div>
                        <div class="transfer-player-info">
                            <div class="transfer-player-name">${p.web_name}</div>
                            <div class="transfer-player-meta">${team ? team.short_name : ''} ‚Ä¢ ${positionMap[p.element_type]} ‚Ä¢ ¬£${(p.now_cost / 10).toFixed(1)}m</div>
                        </div>
                        <div class="transfer-stats">
                            <div class="transfer-count positive">+${formatNumber(p.transfers_in_event)}</div>
                            <div class="transfer-price">${p.total_points} pts ‚Ä¢ ${p.form} form</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function loadFPLTransfersOut() {
            const sorted = [...allPlayers].filter(p => p.transfers_out_event > 0)
                .sort((a, b) => b.transfers_out_event - a.transfers_out_event).slice(0, 15);
            const container = document.getElementById('transfers-out-list');

            if (sorted.length === 0) {
                container.innerHTML = '<p style="padding: 30px; color: #666; text-align: center;">No transfer data available for this gameweek</p>';
                return;
            }

            container.innerHTML = sorted.map((p, i) => {
                const team = teams.find(t => t.id === p.team);
                return `
                    <div class="transfer-item">
                        <div class="transfer-rank ${i < 3 ? 'top-3' : ''}">${i + 1}</div>
                        <div class="transfer-player-info">
                            <div class="transfer-player-name">${p.web_name}</div>
                            <div class="transfer-player-meta">${team ? team.short_name : ''} ‚Ä¢ ${positionMap[p.element_type]} ‚Ä¢ ¬£${(p.now_cost / 10).toFixed(1)}m</div>
                        </div>
                        <div class="transfer-stats">
                            <div class="transfer-count negative">-${formatNumber(p.transfers_out_event)}</div>
                            <div class="transfer-price">${p.total_points} pts ‚Ä¢ ${p.form} form</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function loadNetTransfers() {
            const withNet = allPlayers.map(p => ({
                ...p,
                netTransfers: (p.transfers_in || 0) - (p.transfers_out || 0)
            }));
            const topGainers = [...withNet].sort((a, b) => b.netTransfers - a.netTransfers).slice(0, 12);
            const container = document.getElementById('net-transfers-list');

            container.innerHTML = topGainers.map(p => {
                const team = teams.find(t => t.id === p.team);
                const isPositive = p.netTransfers >= 0;
                return `
                    <div class="transfer-card">
                        <div class="transfer-card-name">${p.web_name}</div>
                        <div class="transfer-card-team">${team ? team.short_name : ''} ‚Ä¢ ${positionMap[p.element_type]}</div>
                        <div class="transfer-card-stat ${isPositive ? 'positive' : 'negative'}">${isPositive ? '+' : ''}${formatNumber(p.netTransfers)}</div>
                        <div class="transfer-card-label">Net Transfers</div>
                    </div>
                `;
            }).join('');
        }

        function loadPriceRisers() {
            const sorted = [...allPlayers].filter(p => p.cost_change_event > 0)
                .sort((a, b) => b.cost_change_event - a.cost_change_event).slice(0, 15);
            const container = document.getElementById('price-risers-list');

            if (sorted.length === 0) {
                container.innerHTML = '<p style="padding: 30px; color: #666; text-align: center;">No price rises this gameweek</p>';
                return;
            }

            container.innerHTML = sorted.map((p, i) => {
                const team = teams.find(t => t.id === p.team);
                return `
                    <div class="transfer-item">
                        <div class="transfer-rank ${i < 3 ? 'top-3' : ''}">${i + 1}</div>
                        <div class="transfer-player-info">
                            <div class="transfer-player-name">${p.web_name}</div>
                            <div class="transfer-player-meta">${team ? team.short_name : ''} ‚Ä¢ ${positionMap[p.element_type]}</div>
                        </div>
                        <div class="transfer-stats">
                            <div class="transfer-count positive">+¬£${(p.cost_change_event / 10).toFixed(1)}m</div>
                            <div class="transfer-price">Now ¬£${(p.now_cost / 10).toFixed(1)}m</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function loadPriceFallers() {
            const sorted = [...allPlayers].filter(p => p.cost_change_event < 0)
                .sort((a, b) => a.cost_change_event - b.cost_change_event).slice(0, 15);
            const container = document.getElementById('price-fallers-list');

            if (sorted.length === 0) {
                container.innerHTML = '<p style="padding: 30px; color: #666; text-align: center;">No price falls this gameweek</p>';
                return;
            }

            container.innerHTML = sorted.map((p, i) => {
                const team = teams.find(t => t.id === p.team);
                return `
                    <div class="transfer-item">
                        <div class="transfer-rank ${i < 3 ? 'top-3' : ''}">${i + 1}</div>
                        <div class="transfer-player-info">
                            <div class="transfer-player-name">${p.web_name}</div>
                            <div class="transfer-player-meta">${team ? team.short_name : ''} ‚Ä¢ ${positionMap[p.element_type]}</div>
                        </div>
                        <div class="transfer-stats">
                            <div class="transfer-count negative">-¬£${(Math.abs(p.cost_change_event) / 10).toFixed(1)}m</div>
                            <div class="transfer-price">Now ¬£${(p.now_cost / 10).toFixed(1)}m</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function loadSeasonPriceChanges() {
            const sorted = [...allPlayers]
                .filter(p => Math.abs(p.cost_change_start || 0) > 0)
                .sort((a, b) => Math.abs(b.cost_change_start || 0) - Math.abs(a.cost_change_start || 0))
                .slice(0, 12);
            const container = document.getElementById('season-price-changes-list');

            container.innerHTML = sorted.map(p => {
                const team = teams.find(t => t.id === p.team);
                const change = p.cost_change_start || 0;
                const isPositive = change >= 0;
                return `
                    <div class="transfer-card">
                        <div class="transfer-card-name">${p.web_name}</div>
                        <div class="transfer-card-team">${team ? team.short_name : ''}</div>
                        <div class="transfer-card-stat ${isPositive ? 'positive' : 'negative'}">${isPositive ? '+' : ''}¬£${(change / 10).toFixed(1)}m</div>
                        <div class="transfer-card-label">Season Change</div>
                    </div>
                `;
            }).join('');
        }

        function loadJanuaryTransfers() {
            const container = document.getElementById('january-transfers-list');
            let transfers = january2025Transfers;

            if (currentClubFilter !== 'all') {
                transfers = transfers.filter(t =>
                    t.from === currentClubFilter || t.to === currentClubFilter
                );
            }

            if (transfers.length === 0) {
                container.innerHTML = '<p style="padding: 30px; color: #666; text-align: center;">No transfers found for this club</p>';
                return;
            }

            container.innerHTML = transfers.map(t => `
                <div class="real-transfer-item">
                    <div class="real-transfer-player">
                        <div class="real-transfer-name">${t.name}</div>
                        <div class="real-transfer-details">${t.type === 'loan' ? 'Loan Deal' : 'Permanent'}</div>
                    </div>
                    <div class="real-transfer-clubs">
                        <span class="real-transfer-club from">${t.from}</span>
                        <span class="real-transfer-arrow">‚Üí</span>
                        <span class="real-transfer-club to">${t.to}</span>
                    </div>
                    <div>
                        <div class="real-transfer-fee">${t.fee}</div>
                        <div class="real-transfer-type ${t.type}">${t.type === 'loan' ? 'LOAN' : ''}</div>
                    </div>
                </div>
            `).join('');
        }

        function loadSummerTransfers() {
            const container = document.getElementById('summer-transfers-list');

            container.innerHTML = summer2024Transfers.map(t => `
                <div class="real-transfer-item">
                    <div class="real-transfer-player">
                        <div class="real-transfer-name">${t.name}</div>
                        <div class="real-transfer-details">Summer 2024</div>
                    </div>
                    <div class="real-transfer-clubs">
                        <span class="real-transfer-club from">${t.from}</span>
                        <span class="real-transfer-arrow">‚Üí</span>
                        <span class="real-transfer-club to">${t.to}</span>
                    </div>
                    <div>
                        <div class="real-transfer-fee">${t.fee}</div>
                    </div>
                </div>
            `).join('');
        }

        // Initialize
        fetchFPLData();
    </script>
</body>
</html>
