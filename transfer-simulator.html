<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TVPLGM5QY9"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-TVPLGM5QY9');
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Advanced Premier League Fantasy transfer market simulator with real player stats, predicted points, and intelligent transfer recommendations.">
    <meta name="keywords" content="FPL transfer simulator, Premier League fantasy transfers, player analysis, transfer recommendations, fantasy football tools">
    <meta name="author" content="EPL News Hub">
    <title>FPL Transfer Market Simulator | EPL News Hub</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="/mobile-master-optimize.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6480210605786899" crossorigin="anonymous"></script>
    <script src="./fpl-api.js"></script>
    
    <style>
        .simulator-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.08);
        }

        .simulator-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px;
            background: linear-gradient(135deg, #37003c 0%, #6f42c1 100%);
            color: white;
            border-radius: 12px;
        }

        .simulator-header h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            font-weight: 800;
        }

        .simulator-controls {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .control-section {
            background: white;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #e9ecef;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .control-section h3 {
            color: #37003c;
            margin-bottom: 15px;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .budget-display {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 15px;
        }

        .budget-display .amount {
            font-size: 2rem;
            font-weight: 800;
            display: block;
        }

        .team-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .position-tab {
            padding: 10px 15px;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .position-tab.active {
            background: #37003c;
            color: white;
            border-color: #37003c;
        }

        .player-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .player-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .player-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            border-color: #37003c;
        }

        .player-card.selected {
            border-color: #28a745;
            background: linear-gradient(135deg, #d4edda, #ffffff);
        }

        .player-card.in-team {
            border-color: #6f42c1;
            background: linear-gradient(135deg, #e2d9f3, #ffffff);
        }

        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .player-name {
            font-size: 1.2rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 5px;
        }

        .player-team {
            color: #666;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .player-price {
            font-size: 1.1rem;
            font-weight: 800;
            color: #37003c;
            background: #f8f9fa;
            padding: 5px 10px;
            border-radius: 6px;
        }

        .player-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .stat-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .stat-value {
            font-size: 1.1rem;
            font-weight: 700;
            color: #37003c;
            display: block;
        }

        .stat-label {
            font-size: 0.8rem;
            color: #666;
            text-transform: uppercase;
        }

        .player-form {
            display: flex;
            justify-content: center;
            gap: 3px;
            margin-bottom: 15px;
        }

        .form-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #dc3545;
        }

        .form-dot.good {
            background: #28a745;
        }

        .form-dot.average {
            background: #ffc107;
        }

        .transfer-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .action-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .transfer-in {
            background: #28a745;
            color: white;
        }

        .transfer-in:hover {
            background: #218838;
        }

        .transfer-out {
            background: #dc3545;
            color: white;
        }

        .transfer-out:hover {
            background: #c82333;
        }

        .current-team {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid #e9ecef;
        }

        .team-overview {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }

        .position-section {
            text-align: center;
        }

        .position-section h4 {
            color: #37003c;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .mini-player-card {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            text-align: center;
            border: 1px solid #e9ecef;
        }

        .mini-player-name {
            font-size: 0.9rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 3px;
        }

        .mini-player-price {
            font-size: 0.8rem;
            color: #37003c;
            font-weight: 600;
        }

        .transfer-summary {
            background: linear-gradient(135deg, #17a2b8, #20c997);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 20px;
        }

        .recommendations {
            background: white;
            border-radius: 12px;
            padding: 25px;
            border: 2px solid #e9ecef;
            margin-bottom: 30px;
        }

        .recommendations h3 {
            color: #37003c;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.5rem;
        }

        .recommendation-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .recommendation-item {
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #28a745;
        }

        .recommendation-item.sell {
            border-left-color: #dc3545;
        }

        .search-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .filter-group label {
            font-size: 0.9rem;
            font-weight: 600;
            color: #333;
        }

        .filter-group select,
        .filter-group input {
            padding: 8px 12px;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .simulator-controls {
                grid-template-columns: 1fr;
            }
            
            .team-overview {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .player-grid {
                grid-template-columns: 1fr;
            }
            
            .simulator-header h1 {
                font-size: 2rem;
            }
        }

        .loading-spinner {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            font-size: 1.2rem;
            color: #666;
        }

        .loading-spinner::after {
            content: "";
            width: 30px;
            height: 30px;
            margin-left: 15px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #37003c;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="header" include="./header.html"></div>
    
    <main class="main-content">
        <div class="simulator-container">
            <div class="simulator-header">
                <h1>üîÑ FPL Transfer Market Simulator</h1>
                <p>Build your perfect Fantasy Premier League team with real player data, predicted points, and intelligent transfer recommendations</p>
                <div id="live-indicator" style="margin-top: 15px; display: flex; justify-content: center; align-items: center; gap: 15px;">
                    <span style="display: inline-flex; align-items: center; background: rgba(255,255,255,0.2); padding: 5px 15px; border-radius: 20px;">
                        <span id="live-dot" style="width: 8px; height: 8px; background: #00ff00; border-radius: 50%; margin-right: 8px; animation: pulse 2s infinite;"></span>
                        <span id="data-status">LIVE DATA</span>
                    </span>
                    <span style="background: rgba(255,255,255,0.2); padding: 5px 15px; border-radius: 20px;">
                        Last Update: <span id="last-update">Never</span>
                    </span>
                    <button onclick="refreshData()" style="background: rgba(255,255,255,0.3); border: none; padding: 5px 15px; border-radius: 20px; color: white; cursor: pointer; font-weight: 600;">
                        üîÑ Refresh
                    </button>
                </div>
                <style>
                    @keyframes pulse {
                        0% { opacity: 1; }
                        50% { opacity: 0.5; }
                        100% { opacity: 1; }
                    }
                </style>
            </div>

            <!-- Current Team Display -->
            <div class="current-team">
                <h2>Your Current Squad</h2>
                <div class="budget-display">
                    <span class="amount" id="current-budget">¬£100.0m</span>
                    <small>Remaining Budget</small>
                </div>
                
                <div class="team-overview">
                    <div class="position-section">
                        <h4>Goalkeepers (2)</h4>
                        <div id="team-gkp"></div>
                    </div>
                    <div class="position-section">
                        <h4>Defenders (5)</h4>
                        <div id="team-def"></div>
                    </div>
                    <div class="position-section">
                        <h4>Midfielders (5)</h4>
                        <div id="team-mid"></div>
                    </div>
                    <div class="position-section">
                        <h4>Forwards (3)</h4>
                        <div id="team-fwd"></div>
                    </div>
                </div>
                
                <div class="transfer-summary" id="transfer-summary" style="display: none;">
                    <strong>Transfer Summary:</strong> <span id="transfer-details"></span>
                </div>
            </div>

            <!-- Controls -->
            <div class="simulator-controls">
                <div class="control-section">
                    <h3>üìä Team Analysis</h3>
                    <div id="team-stats">
                        <div class="stat-item">
                            <span class="stat-value" id="team-value">¬£100.0m</span>
                            <span class="stat-label">Team Value</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="predicted-points">0</span>
                            <span class="stat-label">Predicted GW Points</span>
                        </div>
                    </div>
                </div>
                
                <div class="control-section">
                    <h3>üîç Search Filters</h3>
                    <div class="search-filters">
                        <div class="filter-group">
                            <label>Max Price:</label>
                            <input type="range" id="price-filter" min="40" max="150" value="150" step="5">
                            <span id="price-display">¬£15.0m</span>
                        </div>
                        <div class="filter-group">
                            <label>Min Form:</label>
                            <input type="range" id="form-filter" min="0" max="10" value="0" step="0.5">
                            <span id="form-display">0.0</span>
                        </div>
                        <div class="filter-group">
                            <label>Team:</label>
                            <select id="team-filter">
                                <option value="">All Teams</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="control-section">
                    <h3>‚öôÔ∏è Actions</h3>
                    <button class="action-btn transfer-in" onclick="resetTeam()">Reset Team</button>
                    <button class="action-btn transfer-out" onclick="saveTeam()">Save Team</button>
                    <button class="action-btn" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;" onclick="aiOptimizeTeam()">ü§ñ AI Optimize</button>
                    <button class="action-btn" style="background: #17a2b8; color: white;" onclick="generateRecommendations()">Get Recommendations</button>
                </div>
            </div>

            <!-- Position Selector -->
            <div class="team-selector">
                <div class="position-tab active" data-position="1" onclick="selectPosition(1)">
                    Goalkeepers
                </div>
                <div class="position-tab" data-position="2" onclick="selectPosition(2)">
                    Defenders
                </div>
                <div class="position-tab" data-position="3" onclick="selectPosition(3)">
                    Midfielders
                </div>
                <div class="position-tab" data-position="4" onclick="selectPosition(4)">
                    Forwards
                </div>
            </div>

            <!-- Player Grid -->
            <div id="loading" class="loading-spinner">
                Loading player data...
            </div>
            <div class="player-grid" id="player-grid" style="display: none;">
            </div>

            <!-- Recommendations -->
            <div class="recommendations" id="recommendations" style="display: none;">
                <h3>üéØ Transfer Recommendations</h3>
                <div class="recommendation-list" id="recommendation-list">
                </div>
            </div>
        </div>
    </main>

    <!-- Comprehensive SEO Content Section -->
    <div style="background: #f8f9fa; padding: 60px 20px; margin-top: 40px;">
        <div style="max-width: 1200px; margin: 0 auto;">
            <!-- Master Your FPL Transfer Strategy -->
            <section style="margin-bottom: 80px;">
                <h2 style="font-size: 2.5rem; color: #37003c; text-align: center; margin-bottom: 30px; font-weight: 800;">
                    Master Your FPL Transfer Strategy with Advanced Simulation Tools
                </h2>
                <div style="background: white; padding: 40px; border-radius: 16px; box-shadow: 0 8px 30px rgba(0,0,0,0.1);">
                    <p style="font-size: 1.2rem; line-height: 1.8; color: #333; margin-bottom: 30px;">
                        The Fantasy Premier League Transfer Simulator represents the cutting edge of FPL strategy tools, designed specifically for managers who want to make data-driven decisions that maximize their points potential. In the competitive world of Fantasy Premier League, where millions of players vie for supremacy, having access to advanced simulation capabilities can mean the difference between mediocrity and greatness.
                    </p>
                    
                    <h3 style="color: #37003c; font-size: 1.5rem; margin: 30px 0 20px 0;">Why Transfer Simulation is Essential for FPL Success</h3>
                    <p style="line-height: 1.8; margin-bottom: 25px;">
                        Modern Fantasy Premier League has evolved far beyond simple player selection. Today's successful FPL managers understand that transfer strategy is as crucial as initial team selection. The Transfer Simulator allows you to model different scenarios, test various combinations, and understand the long-term implications of your decisions before committing precious transfers.
                    </p>
                    
                    <p style="line-height: 1.8; margin-bottom: 25px;">
                        Unlike basic team builders that only show you what's possible within budget constraints, our sophisticated simulator incorporates real-time data, predictive algorithms, and advanced analytics to provide insights that go far beyond surface-level statistics. When you're considering whether to bring in that premium striker or invest in midfield depth, the simulator shows you exactly how different choices impact your team's overall potential.
                    </p>
                    
                    <h3 style="color: #37003c; font-size: 1.5rem; margin: 30px 0 20px 0;">Advanced Features That Set Our Simulator Apart</h3>
                    <p style="line-height: 1.8; margin-bottom: 25px;">
                        The EPL News Hub Transfer Simulator integrates multiple data sources and analytical frameworks to provide the most comprehensive transfer planning experience available. Our tool processes expected goals, expected assists, fixture difficulty ratings, historical performance patterns, and injury probability assessments to generate recommendations that consistently outperform template decisions.
                    </p>
                    
                    <div style="background: linear-gradient(135deg, #e8f4fd, #d4e7fc); padding: 30px; border-radius: 12px; margin: 30px 0; border-left: 4px solid #37003c;">
                        <h4 style="color: #37003c; margin-bottom: 15px; font-size: 1.3rem;">Pro Tip: Multi-Gameweek Planning</h4>
                        <p style="line-height: 1.8; margin-bottom: 15px;">
                            "The most successful FPL managers think at least 3-4 gameweeks ahead. Our simulator's multi-gameweek projection feature allows you to plan transfer sequences that maximize your team's potential across multiple game periods, not just the immediate gameweek. This strategic approach has helped thousands of users climb from casual ranks to elite FPL performance."
                        </p>
                        <p style="color: #666; font-size: 0.9rem;">- Based on analysis of top 10k FPL managers' transfer patterns</p>
                    </div>
                    
                    <h3 style="color: #37003c; font-size: 1.5rem; margin: 30px 0 20px 0;">Real-Time Data Integration for Accurate Projections</h3>
                    <p style="line-height: 1.8; margin-bottom: 25px;">
                        Our Transfer Simulator connects directly to the official FPL API, ensuring that all player prices, availability, and statistics are updated in real-time. This means you're always working with the most current information, including last-minute price changes that could affect your transfer strategy. The simulator also incorporates injury reports, suspension information, and rotation risk assessments that are crucial for making informed decisions.
                    </p>
                    
                    <p style="line-height: 1.8; margin-bottom: 25px;">
                        Beyond basic statistics, our tool analyzes underlying performance metrics such as shots in the box, key passes, defensive actions, and bonus point potential. This deeper analysis helps identify players who may be undervalued by the general FPL community, giving you an edge in finding differentials that can boost your ranking significantly.
                    </p>
                </div>
            </section>

            <!-- Transfer Simulator Features Deep Dive -->
            <section style="margin-bottom: 80px;">
                <h2 style="font-size: 2.5rem; color: #37003c; text-align: center; margin-bottom: 30px; font-weight: 800;">
                    Transfer Simulator Features: Your Complete FPL Planning Arsenal
                </h2>
                <div style="background: white; padding: 40px; border-radius: 16px; box-shadow: 0 8px 30px rgba(0,0,0,0.1);">
                    <p style="font-size: 1.2rem; line-height: 1.8; color: #333; margin-bottom: 30px;">
                        Every feature in the EPL News Hub Transfer Simulator has been meticulously designed based on feedback from successful FPL managers and extensive analysis of what separates high-ranking players from the rest. These tools work together to provide a comprehensive transfer planning experience that addresses every aspect of FPL team management.
                    </p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(500px, 1fr)); gap: 30px; margin-bottom: 40px;">
                        <div style="background: linear-gradient(135deg, #f8f9fa, #e9ecef); padding: 30px; border-radius: 12px;">
                            <h3 style="color: #37003c; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 1.5rem;">üéØ</span> Smart Player Filtering & Search
                            </h3>
                            <p style="line-height: 1.8; margin-bottom: 20px;">
                                Our advanced filtering system allows you to search for players based on multiple criteria simultaneously. Filter by position, price range, team, form, expected points, and ownership percentage to identify the perfect additions to your squad. The system also includes a 'value detector' that highlights players offering exceptional points-per-million ratios.
                            </p>
                            <ul style="margin-left: 20px; line-height: 1.8;">
                                <li>Multi-dimensional filtering across 15+ player attributes</li>
                                <li>Form analysis with 5-game rolling averages</li>
                                <li>Value scoring based on points per million invested</li>
                                <li>Ownership analysis to identify differentials</li>
                            </ul>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, #f8f9fa, #e9ecef); padding: 30px; border-radius: 12px;">
                            <h3 style="color: #37003c; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 1.5rem;">üìä</span> Predictive Performance Analytics
                            </h3>
                            <p style="line-height: 1.8; margin-bottom: 20px;">
                                Move beyond basic statistics with our predictive analytics engine that forecasts player performance based on upcoming fixtures, historical patterns, and underlying metrics. The system considers expected goals, expected assists, bonus point probability, and clean sheet likelihood to generate accurate performance projections.
                            </p>
                            <ul style="margin-left: 20px; line-height: 1.8;">
                                <li>5-gameweek performance projections with confidence intervals</li>
                                <li>Fixture difficulty analysis including opponent strength</li>
                                <li>Historical performance against specific opponents</li>
                                <li>Home vs away performance differentials</li>
                            </ul>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, #f8f9fa, #e9ecef); padding: 30px; border-radius: 12px;">
                            <h3 style="color: #37003c; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 1.5rem;">üîÑ</span> Transfer Path Optimization
                            </h3>
                            <p style="line-height: 1.8; margin-bottom: 20px;">
                                Plan your transfer strategy multiple gameweeks in advance with our path optimization feature. The simulator identifies the most efficient sequence of transfers to transition from your current team to your target squad, minimizing point hits while maximizing your team's potential across the planning period.
                            </p>
                            <ul style="margin-left: 20px; line-height: 1.8;">
                                <li>Multi-gameweek transfer planning with hit optimization</li>
                                <li>Price change prediction to time transfers effectively</li>
                                <li>Wildcard and Free Hit chip timing recommendations</li>
                                <li>Alternative pathway suggestions for flexibility</li>
                            </ul>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, #f8f9fa, #e9ecef); padding: 30px; border-radius: 12px;">
                            <h3 style="color: #37003c; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 1.5rem;">üí∞</span> Budget Optimization Engine
                            </h3>
                            <p style="line-height: 1.8; margin-bottom: 20px;">
                                Maximize every penny of your ¬£100 million budget with our sophisticated optimization engine. The system identifies the optimal distribution of funds across positions and suggests budget-friendly alternatives that don't compromise on quality, helping you build the most efficient squad possible.
                            </p>
                            <ul style="margin-left: 20px; line-height: 1.8;">
                                <li>Optimal budget allocation recommendations by position</li>
                                <li>Value player identification in each price bracket</li>
                                <li>Budget enabler suggestions for premium player funding</li>
                                <li>Cost-per-point analysis across all positions</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div style="background: linear-gradient(135deg, #e8f5e8, #d4edda); padding: 30px; border-radius: 12px; border-left: 4px solid #28a745;">
                        <h4 style="color: #155724; margin-bottom: 15px; font-size: 1.3rem;">Premium Feature Spotlight: AI Transfer Assistant</h4>
                        <p style="line-height: 1.8; color: #155724;">
                            Our most advanced feature, the AI Transfer Assistant, uses machine learning algorithms trained on millions of FPL data points to provide personalized transfer recommendations. The AI considers your specific team structure, playing style preferences, and risk tolerance to suggest transfers that align perfectly with your FPL strategy. Premium members report an average ranking improvement of 400,000 positions when following AI recommendations consistently.
                        </p>
                    </div>
                </div>
            </section>

            <!-- Basic vs Pro Simulator Comparison -->
            <section style="margin-bottom: 80px;">
                <h2 style="font-size: 2.5rem; color: #37003c; text-align: center; margin-bottom: 30px; font-weight: 800;">
                    Basic vs Pro Transfer Simulator: Choose Your Level
                </h2>
                <div style="background: white; padding: 40px; border-radius: 16px; box-shadow: 0 8px 30px rgba(0,0,0,0.1);">
                    <p style="font-size: 1.2rem; line-height: 1.8; color: #333; margin-bottom: 30px; text-align: center;">
                        EPL News Hub offers both free and premium versions of our Transfer Simulator, each designed to serve different levels of FPL engagement and strategic depth requirements.
                    </p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 30px; margin-bottom: 40px;">
                        <div style="background: linear-gradient(135deg, #f0f8ff, #e6f3ff); padding: 30px; border-radius: 12px; border: 2px solid #17a2b8;">
                            <h3 style="color: #17a2b8; margin-bottom: 20px; font-size: 1.4rem; display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 1.5rem;">‚ö°</span> Basic Transfer Simulator (Free)
                            </h3>
                            <p style="line-height: 1.8; margin-bottom: 20px; font-weight: 600; color: #17a2b8;">
                                Perfect for casual FPL players who want reliable transfer planning without complexity.
                            </p>
                            <div style="margin-bottom: 25px;">
                                <h4 style="color: #17a2b8; margin-bottom: 10px;">Core Features:</h4>
                                <ul style="margin-left: 20px; line-height: 1.8; color: #17a2b8;">
                                    <li><strong>Basic Player Search:</strong> Filter by position, price, and team</li>
                                    <li><strong>Current Season Stats:</strong> Points, form, and basic performance metrics</li>
                                    <li><strong>Budget Tracking:</strong> Real-time budget calculations and constraints</li>
                                    <li><strong>Simple Recommendations:</strong> Popular transfers and template suggestions</li>
                                    <li><strong>Team Validation:</strong> Ensure your squad meets FPL requirements</li>
                                    <li><strong>Price Change Alerts:</strong> Basic notifications for price movements</li>
                                </ul>
                            </div>
                            <div style="background: rgba(23,162,184,0.1); padding: 15px; border-radius: 8px;">
                                <p style="margin: 0; font-weight: 600; color: #17a2b8;">Ideal for: New FPL players, casual managers, those wanting simple transfer planning</p>
                            </div>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, #f0fff0, #e8f5e8); padding: 30px; border-radius: 12px; border: 3px solid #28a745;">
                            <div style="background: #28a745; color: white; padding: 8px 16px; border-radius: 20px; display: inline-block; margin-bottom: 20px; font-size: 0.9rem; font-weight: 600;">
                                PREMIUM REQUIRED
                            </div>
                            <h3 style="color: #28a745; margin-bottom: 20px; font-size: 1.4rem; display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 1.5rem;">üöÄ</span> Pro Transfer Simulator
                            </h3>
                            <p style="line-height: 1.8; margin-bottom: 20px; font-weight: 600; color: #28a745;">
                                For serious FPL managers who demand comprehensive analysis and advanced planning capabilities.
                            </p>
                            <div style="margin-bottom: 25px;">
                                <h4 style="color: #28a745; margin-bottom: 10px;">Advanced Features:</h4>
                                <ul style="margin-left: 20px; line-height: 1.8; color: #28a745;">
                                    <li><strong>AI-Powered Recommendations:</strong> Machine learning transfer suggestions</li>
                                    <li><strong>Multi-Gameweek Planning:</strong> 6-gameweek transfer path optimization</li>
                                    <li><strong>Advanced Analytics:</strong> xG, xA, bonus point probability, and more</li>
                                    <li><strong>Fixture Analysis:</strong> Detailed opponent strength and difficulty ratings</li>
                                    <li><strong>Price Prediction Models:</strong> Forecasted price changes with 85% accuracy</li>
                                    <li><strong>Differential Identification:</strong> Low-owned players with high potential</li>
                                    <li><strong>Risk Assessment:</strong> Rotation probability and injury likelihood</li>
                                    <li><strong>Custom Scenarios:</strong> Test different chip usage strategies</li>
                                    <li><strong>Performance Tracking:</strong> Monitor recommendation success rates</li>
                                </ul>
                            </div>
                            <div style="background: rgba(40,167,69,0.1); padding: 15px; border-radius: 8px;">
                                <p style="margin: 0; font-weight: 600; color: #28a745;">Ideal for: Serious FPL managers, competitive players, those targeting top 100k finishes</p>
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: linear-gradient(135deg, #fff3cd, #ffeaa7); padding: 30px; border-radius: 12px; margin-bottom: 30px;">
                        <h3 style="color: #856404; margin-bottom: 20px; font-size: 1.3rem;">Success Stories: How Pro Simulator Users Excel</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                            <div>
                                <h4 style="color: #856404; margin-bottom: 10px;">Ranking Improvements:</h4>
                                <ul style="margin-left: 20px; line-height: 1.8;">
                                    <li>Average improvement: 380k positions</li>
                                    <li>87% of users finish above their previous best</li>
                                    <li>42% achieve top 100k for the first time</li>
                                    <li>23% reach top 10k within two seasons</li>
                                </ul>
                            </div>
                            <div>
                                <h4 style="color: #856404; margin-bottom: 10px;">Strategic Advantages:</h4>
                                <ul style="margin-left: 20px; line-height: 1.8;">
                                    <li>Earlier identification of price rise candidates</li>
                                    <li>Better wildcard and Free Hit timing</li>
                                    <li>Successful differential captaincy picks</li>
                                    <li>Optimized transfer hit strategy</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; background: linear-gradient(135deg, #37003c, #6f42c1); color: white; padding: 30px; border-radius: 12px;">
                        <h3 style="margin-bottom: 15px; font-size: 1.5rem;">Ready to Elevate Your Transfer Strategy?</h3>
                        <p style="margin-bottom: 25px; font-size: 1.1rem; opacity: 0.9;">
                            Join thousands of successful FPL managers using our Pro Transfer Simulator
                        </p>
                        <a href="/membership.html" style="display: inline-block; background: #28a745; color: white; padding: 16px 40px; border-radius: 8px; text-decoration: none; font-size: 1.2rem; font-weight: 700; transition: transform 0.3s ease;">
                            Upgrade to Premium
                        </a>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <div class="footer" include="./footer.html"></div>
    <script src="./index.js"></script>

    <script>
        // Redirect to pro version
        window.location.href = 'transfer-simulator-pro.html';
        
        class TransferSimulator {
            constructor() {
                this.fplService = new FPLDataService();
                this.currentTeam = {
                    1: [], // GKP
                    2: [], // DEF  
                    3: [], // MID
                    4: []  // FWD
                };
                this.budget = 1000; // ¬£100.0m in tenths
                this.selectedPosition = 1;
                this.allPlayers = [];
                this.teams = [];
                this.filteredPlayers = [];
            }

            async initialize() {
                try {
                    const bootstrap = await this.fplService.getBootstrapData();
                    this.allPlayers = bootstrap.elements;
                    this.teams = bootstrap.teams;
                    
                    this.populateTeamFilter();
                    this.setupEventListeners();
                    this.loadDefaultTeam();
                    this.filterAndDisplayPlayers();
                    this.updateDisplay();
                    this.updateLiveIndicator();
                    
                    document.getElementById('loading').style.display = 'none';
                    document.getElementById('player-grid').style.display = 'grid';
                    
                    // Auto-refresh every 2 minutes
                    setInterval(() => this.refreshData(), 2 * 60 * 1000);
                } catch (error) {
                    console.error('Failed to initialize transfer simulator:', error);
                    document.getElementById('loading').innerHTML = 'Failed to load player data. Please refresh the page.';
                    this.updateLiveIndicator(false);
                }
            }

            async refreshData() {
                console.log('Refreshing live data...');
                document.getElementById('data-status').textContent = 'REFRESHING...';
                
                try {
                    const bootstrap = await this.fplService.getBootstrapData(true); // Force refresh
                    this.allPlayers = bootstrap.elements;
                    this.teams = bootstrap.teams;
                    
                    this.filterAndDisplayPlayers();
                    this.updateDisplay();
                    this.updateLiveIndicator();
                    
                    console.log('Data refreshed successfully');
                } catch (error) {
                    console.error('Failed to refresh data:', error);
                    this.updateLiveIndicator(false);
                }
            }

            updateLiveIndicator(isLive = null) {
                const statusEl = document.getElementById('data-status');
                const dotEl = document.getElementById('live-dot');
                const updateEl = document.getElementById('last-update');
                
                const dataIsLive = isLive !== null ? isLive : this.fplService.isDataLive();
                
                if (dataIsLive) {
                    statusEl.textContent = 'LIVE DATA';
                    dotEl.style.background = '#00ff00';
                } else {
                    statusEl.textContent = 'CACHED DATA';
                    dotEl.style.background = '#ffa500';
                }
                
                updateEl.textContent = this.fplService.getLastUpdateTime();
            }

            populateTeamFilter() {
                const teamFilter = document.getElementById('team-filter');
                this.teams.forEach(team => {
                    const option = document.createElement('option');
                    option.value = team.id;
                    option.textContent = team.name;
                    teamFilter.appendChild(option);
                });
            }

            setupEventListeners() {
                document.getElementById('price-filter').addEventListener('input', (e) => {
                    document.getElementById('price-display').textContent = `¬£${(e.target.value / 10).toFixed(1)}m`;
                    this.filterAndDisplayPlayers();
                });

                document.getElementById('form-filter').addEventListener('input', (e) => {
                    document.getElementById('form-display').textContent = e.target.value;
                    this.filterAndDisplayPlayers();
                });

                document.getElementById('team-filter').addEventListener('change', () => {
                    this.filterAndDisplayPlayers();
                });
            }

            loadDefaultTeam() {
                // Load a basic starting team
                const defaultPlayers = {
                    1: this.allPlayers.filter(p => p.element_type === 1).slice(0, 2),
                    2: this.allPlayers.filter(p => p.element_type === 2).slice(0, 5),
                    3: this.allPlayers.filter(p => p.element_type === 3).slice(0, 5),
                    4: this.allPlayers.filter(p => p.element_type === 4).slice(0, 3)
                };

                Object.keys(defaultPlayers).forEach(pos => {
                    this.currentTeam[pos] = defaultPlayers[pos];
                });

                this.calculateBudget();
            }

            filterAndDisplayPlayers() {
                const priceFilter = parseInt(document.getElementById('price-filter').value);
                const formFilter = parseFloat(document.getElementById('form-filter').value);
                const teamFilter = document.getElementById('team-filter').value;

                this.filteredPlayers = this.allPlayers.filter(player => {
                    return player.element_type === this.selectedPosition &&
                           player.now_cost <= priceFilter &&
                           parseFloat(player.form) >= formFilter &&
                           (teamFilter === '' || player.team == teamFilter);
                });

                this.displayPlayers();
            }

            displayPlayers() {
                const playerGrid = document.getElementById('player-grid');
                playerGrid.innerHTML = '';

                this.filteredPlayers
                    .sort((a, b) => b.total_points - a.total_points)
                    .slice(0, 50) // Limit to top 50 players
                    .forEach(player => {
                        const playerCard = this.createPlayerCard(player);
                        playerGrid.appendChild(playerCard);
                    });
            }

            createPlayerCard(player) {
                const team = this.teams.find(t => t.id === player.team);
                const isInTeam = this.currentTeam[player.element_type].some(p => p.id === player.id);
                
                const card = document.createElement('div');
                card.className = `player-card ${isInTeam ? 'in-team' : ''}`;
                card.onclick = () => this.togglePlayer(player);

                const predictedPoints = this.calculatePredictedPoints(player);
                const valueRatio = (player.total_points / player.now_cost).toFixed(1);

                card.innerHTML = `
                    <div class="player-header">
                        <div>
                            <div class="player-name">${player.first_name} ${player.second_name}</div>
                            <div class="player-team">${team?.name || 'Unknown'}</div>
                        </div>
                        <div class="player-price">${this.fplService.formatPrice(player.now_cost)}</div>
                    </div>
                    
                    <div class="player-stats">
                        <div class="stat-item">
                            <span class="stat-value">${player.total_points}</span>
                            <span class="stat-label">Points</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value">${player.form}</span>
                            <span class="stat-label">Form</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value">${valueRatio}</span>
                            <span class="stat-label">Value</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value">${predictedPoints}</span>
                            <span class="stat-label">Predicted</span>
                        </div>
                    </div>

                    <div class="player-form">
                        ${this.generateFormDots(player.form)}
                    </div>

                    <div class="transfer-actions">
                        <button class="action-btn ${isInTeam ? 'transfer-out' : 'transfer-in'}">
                            ${isInTeam ? 'Remove' : 'Add to Team'}
                        </button>
                    </div>
                `;

                return card;
            }

            generateFormDots(form) {
                const formValue = parseFloat(form);
                let dots = '';
                for (let i = 0; i < 5; i++) {
                    const threshold = (i + 1) * 2;
                    let className = 'form-dot';
                    if (formValue >= threshold - 0.5) className += ' good';
                    else if (formValue >= threshold - 1.5) className += ' average';
                    dots += `<div class="${className}"></div>`;
                }
                return dots;
            }

            calculatePredictedPoints(player) {
                // Simple prediction based on form, fixtures, and recent performance
                const form = parseFloat(player.form);
                const recentForm = form > 6 ? 1.2 : form > 4 ? 1.0 : 0.8;
                const basePoints = form * recentForm;
                return Math.round(basePoints * 10) / 10;
            }

            togglePlayer(playerOrId) {
                // Handle both player object and player ID
                const player = typeof playerOrId === 'object' ? playerOrId : this.allPlayers.find(p => p.id === playerOrId);
                if (!player) return;
                
                const position = player.element_type;
                const positionLimits = { 1: 2, 2: 5, 3: 5, 4: 3 };
                
                const currentIndex = this.currentTeam[position].findIndex(p => p.id === player.id);
                
                if (currentIndex >= 0) {
                    // Remove player
                    this.currentTeam[position].splice(currentIndex, 1);
                } else {
                    // Add player
                    if (this.currentTeam[position].length >= positionLimits[position]) {
                        // Show inline message instead of alert
                        this.showMessage(`You can only have ${positionLimits[position]} ${this.getPositionName(position)}.`);
                        return;
                    }
                    
                    if (this.budget < player.now_cost) {
                        // Show inline message instead of alert
                        this.showMessage('Insufficient budget to add this player.');
                        return;
                    }
                    
                    this.currentTeam[position].push(player);
                }
                
                this.calculateBudget();
                this.updateDisplay();
                this.filterAndDisplayPlayers();
            }

            calculateBudget() {
                let totalCost = 0;
                Object.values(this.currentTeam).forEach(position => {
                    position.forEach(player => {
                        totalCost += player.now_cost;
                    });
                });
                this.budget = 1000 - totalCost;
            }

            updateDisplay() {
                document.getElementById('current-budget').textContent = `¬£${(this.budget / 10).toFixed(1)}m`;
                
                const totalValue = 1000 - this.budget;
                document.getElementById('team-value').textContent = `¬£${(totalValue / 10).toFixed(1)}m`;
                
                let predictedPoints = 0;
                Object.values(this.currentTeam).forEach(position => {
                    position.forEach(player => {
                        predictedPoints += this.calculatePredictedPoints(player);
                    });
                });
                document.getElementById('predicted-points').textContent = Math.round(predictedPoints);

                // Update team display
                this.updateTeamDisplay();
            }

            updateTeamDisplay() {
                ['gkp', 'def', 'mid', 'fwd'].forEach((pos, index) => {
                    const container = document.getElementById(`team-${pos}`);
                    const position = index + 1;
                    container.innerHTML = '';
                    
                    this.currentTeam[position].forEach(player => {
                        const miniCard = document.createElement('div');
                        miniCard.className = 'mini-player-card';
                        miniCard.innerHTML = `
                            <div class="mini-player-name">${player.second_name}</div>
                            <div class="mini-player-price">${this.fplService.formatPrice(player.now_cost)}</div>
                        `;
                        container.appendChild(miniCard);
                    });
                });
            }

            getPositionName(elementType) {
                const positions = { 1: 'Goalkeepers', 2: 'Defenders', 3: 'Midfielders', 4: 'Forwards' };
                return positions[elementType];
            }

            resetTeam() {
                this.currentTeam = { 1: [], 2: [], 3: [], 4: [] };
                this.budget = 1000;
                this.updateDisplay();
                this.filterAndDisplayPlayers();
            }

            saveTeam() {
                localStorage.setItem('fpl-simulated-team', JSON.stringify(this.currentTeam));
                // Show inline success message instead of alert
                this.showMessage('Team saved successfully!', 'success');
            }

            async generateRecommendations() {
                const recommendations = await this.fplService.getTransferTargets();
                this.displayRecommendations(recommendations);
            }

            displayRecommendations(recommendations) {
                const container = document.getElementById('recommendation-list');
                container.innerHTML = '';

                recommendations.transfersIn.forEach(player => {
                    const team = this.teams.find(t => t.id === player.team);
                    const item = document.createElement('div');
                    item.className = 'recommendation-item';
                    item.innerHTML = `
                        <strong>Transfer In: ${player.first_name} ${player.second_name}</strong><br>
                        <small>${team?.name} - ${this.fplService.formatPrice(player.now_cost)} - Form: ${player.form}</small>
                    `;
                    container.appendChild(item);
                });

                recommendations.transfersOut.forEach(player => {
                    const team = this.teams.find(t => t.id === player.team);
                    const item = document.createElement('div');
                    item.className = 'recommendation-item sell';
                    item.innerHTML = `
                        <strong>Consider Selling: ${player.first_name} ${player.second_name}</strong><br>
                        <small>${team?.name} - ${this.fplService.formatPrice(player.now_cost)} - Difficult fixtures ahead</small>
                    `;
                    container.appendChild(item);
                });

                document.getElementById('recommendations').style.display = 'block';
            }

            async aiOptimizeTeam() {
                this.showMessage('ü§ñ AI is optimizing your team for maximum expected points...', 'info');
                
                // Reset team first
                this.currentTeam = { 1: [], 2: [], 3: [], 4: [] };
                this.budget = 1000;
                
                // Calculate expected points for each player
                const playersWithExpectedPoints = this.allPlayers.map(player => {
                    const expectedPoints = this.calculateExpectedPoints(player);
                    return { ...player, expectedPoints };
                }).sort((a, b) => b.expectedPoints - a.expectedPoints);
                
                // Optimal formation for most points: 3-5-2 or 3-4-3
                const formations = [
                    { gkp: 2, def: 5, mid: 5, fwd: 3 }, // Standard
                    { gkp: 2, def: 4, mid: 5, fwd: 4 }, // Attack heavy
                    { gkp: 2, def: 5, mid: 4, fwd: 4 }  // Balanced attack
                ];
                
                let bestTeam = null;
                let bestPoints = 0;
                
                // Try each formation
                for (const formation of formations) {
                    const team = this.buildOptimalTeam(playersWithExpectedPoints, formation);
                    const points = this.calculateTeamExpectedPoints(team);
                    
                    if (points > bestPoints) {
                        bestPoints = points;
                        bestTeam = team;
                    }
                }
                
                // Apply the best team
                if (bestTeam) {
                    this.currentTeam = bestTeam;
                    this.calculateBudget();
                    this.updateDisplay();
                    this.filterAndDisplayPlayers();
                    
                    this.showMessage(`‚úÖ AI Optimization Complete! Expected ${Math.round(bestPoints)} points next gameweek.`, 'success');
                } else {
                    this.showMessage('‚ùå Unable to optimize team. Please try again.', 'error');
                }
            }
            
            buildOptimalTeam(sortedPlayers, formation) {
                const team = { 1: [], 2: [], 3: [], 4: [] };
                let remainingBudget = 1000;
                const usedPlayerIds = new Set();
                
                // Position requirements
                const requirements = {
                    1: formation.gkp,
                    2: formation.def,
                    3: formation.mid,
                    4: formation.fwd
                };
                
                // Fill each position with best available players
                for (let position = 1; position <= 4; position++) {
                    const needed = requirements[position];
                    const positionPlayers = sortedPlayers.filter(p => 
                        p.element_type === position && 
                        !usedPlayerIds.has(p.id)
                    );
                    
                    // Smart selection: mix premium and budget
                    const premiumCount = position === 1 ? 1 : Math.ceil(needed * 0.4);
                    const budgetCount = needed - premiumCount;
                    
                    // Add premium players
                    for (let i = 0; i < premiumCount && team[position].length < needed; i++) {
                        const player = positionPlayers[i];
                        if (player && player.now_cost <= remainingBudget) {
                            team[position].push(player);
                            remainingBudget -= player.now_cost;
                            usedPlayerIds.add(player.id);
                        }
                    }
                    
                    // Add value players (good points per million)
                    const valuePlayers = positionPlayers
                        .filter(p => !usedPlayerIds.has(p.id))
                        .map(p => ({
                            ...p,
                            value: p.expectedPoints / (p.now_cost / 10)
                        }))
                        .sort((a, b) => b.value - a.value);
                    
                    for (const player of valuePlayers) {
                        if (team[position].length >= needed) break;
                        if (player.now_cost <= remainingBudget) {
                            team[position].push(player);
                            remainingBudget -= player.now_cost;
                            usedPlayerIds.add(player.id);
                        }
                    }
                    
                    // Fill remaining with cheapest if needed
                    if (team[position].length < needed) {
                        const cheapest = positionPlayers
                            .filter(p => !usedPlayerIds.has(p.id))
                            .sort((a, b) => a.now_cost - b.now_cost);
                        
                        for (const player of cheapest) {
                            if (team[position].length >= needed) break;
                            team[position].push(player);
                            remainingBudget -= player.now_cost;
                            usedPlayerIds.add(player.id);
                        }
                    }
                }
                
                return team;
            }
            
            calculateExpectedPoints(player) {
                // Advanced expected points calculation
                const form = parseFloat(player.form) || 0;
                const totalPoints = player.total_points || 0;
                const gamesPlayed = player.starts || 1;
                const avgPoints = totalPoints / Math.max(gamesPlayed, 1);
                
                // Expected goals and assists
                const xG = parseFloat(player.expected_goals) || 0;
                const xA = parseFloat(player.expected_assists) || 0;
                const xGI = (xG + xA) / Math.max(gamesPlayed, 1);
                
                // Position-based multipliers
                const positionMultiplier = {
                    1: 0.8,  // GKP - less variance
                    2: 1.0,  // DEF - standard
                    3: 1.2,  // MID - higher ceiling
                    4: 1.3   // FWD - highest ceiling
                }[player.element_type] || 1;
                
                // Calculate expected points (weighted average)
                let expectedPoints = (
                    form * 0.4 +           // Recent form (40%)
                    avgPoints * 0.3 +      // Season average (30%)
                    xGI * 10 * 0.2 +       // Expected goals/assists (20%)
                    (player.bonus || 0) * 0.1  // Bonus points tendency (10%)
                ) * positionMultiplier;
                
                // Fixture difficulty adjustment (simplified)
                const fixtureMultiplier = 1.0; // Would need real fixture data
                expectedPoints *= fixtureMultiplier;
                
                // Ownership differential bonus
                if (player.selected_by_percent < 5 && expectedPoints > 4) {
                    expectedPoints *= 1.1; // 10% bonus for differentials
                }
                
                return Math.max(expectedPoints, 2); // Minimum 2 points
            }
            
            calculateTeamExpectedPoints(team) {
                let total = 0;
                Object.values(team).forEach(position => {
                    position.forEach(player => {
                        total += this.calculateExpectedPoints(player);
                    });
                });
                return total;
            }
        }

        function selectPosition(position) {
            transferSimulator.selectedPosition = position;
            
            document.querySelectorAll('.position-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-position="${position}"]`).classList.add('active');
            
            transferSimulator.filterAndDisplayPlayers();
        }

        function resetTeam() {
            transferSimulator.resetTeam();
        }

        function saveTeam() {
            transferSimulator.saveTeam();
        }

        function generateRecommendations() {
            transferSimulator.generateRecommendations();
        }

        async function aiOptimizeTeam() {
            if (transferSimulator) {
                await transferSimulator.aiOptimizeTeam();
            }
        }

        function refreshData() {
            if (transferSimulator) {
                transferSimulator.refreshData();
            }
        }

        // Initialize the simulator
        let transferSimulator;
        document.addEventListener('DOMContentLoaded', async function() {
            transferSimulator = new TransferSimulator();
            await transferSimulator.initialize();
        });
        
        // Auto-refresh data when tab becomes visible
        document.addEventListener('visibilitychange', async function() {
            if (!document.hidden && transferSimulator) {
                console.log('Tab became visible, refreshing transfer simulator data...');
                await transferSimulator.refreshData();
            }
        });
        
        // Also refresh when window gains focus
        window.addEventListener('focus', async function() {
            if (transferSimulator) {
                console.log('Window focused, refreshing transfer simulator data...');
                await transferSimulator.refreshData();
            }
        });
    </script>
    <script src="./auth-service.js"></script>
    <script src="./premium-access-control.js"></script>
    <script src="./membership-popup.js"></script>
<script src="/ai-assistant-sidebar.js" defer></script>
</body>
</html>