<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TVPLGM5QY9"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-TVPLGM5QY9');
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Premier League Fantasy Football tips, strategies, and insights. Expert FPL advice, player recommendations, and weekly analysis from EPL News Hub.">
    <meta name="keywords" content="Premier League Fantasy, FPL, Fantasy Football, EPL Fantasy, player tips, transfers, captain picks, gameweek analysis">
    <meta name="author" content="EPL News Hub">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <link rel="apple-touch-icon" href="reidsnbest.webp">
    <link rel="icon" type="image/webp" href="reidsnbest.webp">
    <title>Premier League Fantasy Football | FPL Tips & Analysis | EPL News Hub</title>
    <link rel="stylesheet" href="styles.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6480210605786899"
     crossorigin="anonymous"></script>
    <script src="./fpl-api.js"></script>
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        
        const firebaseConfig = {
            apiKey: "AIzaSyCyOey0l27yQP68oybpoodMVcvayhIHt2I",
            authDomain: "epl-news-hub-94c09.firebaseapp.com",
            projectId: "epl-news-hub-94c09",
            storageBucket: "epl-news-hub-94c09.firebasestorage.app",
            messagingSenderId: "674703933278",
            appId: "1:674703933278:web:90c6dd4aa9f1ace73099cf",
            measurementId: "G-ECM6BCQCS8"
        };
        
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        
        window.auth = auth;
        window.onAuthStateChanged = onAuthStateChanged;
    </script>
</head>
<body>
    <div class="header" include="./header.html"></div>
    
    <!-- Main Content Area -->
    <main class="main-content">
        <div class="content-wrapper">
            <article class="nyt-article">
                <h1>Premier League Fantasy Football Hub</h1>
                <div class="byline">
                    <span>By EPL News Hub Fantasy Team</span> | <time datetime="2025-01-22">Updated Daily</time>
                </div>
                
                <p>Welcome to your ultimate Premier League Fantasy Football destination! Get the latest FPL tips, player analysis, transfer recommendations, and gameweek strategies to dominate your mini-leagues. Our expert team provides comprehensive coverage to help you climb the global rankings.</p>

                <!-- Mid-Article Ad -->
                <div class="ad-mid-article" include="./ad-components/mid-article-ad.html"></div>

                <h2>üèÜ This Week's Captain Picks</h2>
                <div class="fantasy-section">
                    <div id="captain-picks-loading" class="loading-message">
                        <p>Loading live captain recommendations...</p>
                    </div>
                    <div id="captain-picks" class="captain-picks" style="display: none;">
                        <!-- Captain picks will be populated by JavaScript -->
                    </div>
                </div>

                <h2>üìà This Week's Transfers</h2>
                <div class="fantasy-section">
                    <div id="transfers-loading" class="loading-message">
                        <p>Loading live transfer recommendations...</p>
                    </div>
                    <div id="transfers-content" style="display: none;">
                        <h3>Players to Buy</h3>
                        <ul id="transfers-in" class="transfer-list buy">
                            <!-- Transfer targets will be populated by JavaScript -->
                        </ul>
                        
                        <h3>Players to Sell</h3>
                        <ul id="transfers-out" class="transfer-list sell">
                            <!-- Transfer outs will be populated by JavaScript -->
                        </ul>
                    </div>
                </div>

                <h2>‚öΩ Premium vs Budget Picks</h2>
                <div class="fantasy-section">
                    <div class="picks-comparison">
                        <div class="premium-column">
                            <h3>Premium Picks (¬£9m+)</h3>
                            <ul>
                                <li>Erling Haaland (¬£15.1m) - Essential despite price</li>
                                <li>Mohamed Salah (¬£12.8m) - Liverpool's talisman</li>
                                <li>Bukayo Saka (¬£9.7m) - Arsenal's most consistent</li>
                                <li>Cole Palmer (¬£10.2m) - Chelsea's creative force</li>
                            </ul>
                        </div>
                        
                        <div class="budget-column">
                            <h3>Budget Picks (Under ¬£7m)</h3>
                            <ul>
                                <li>Chris Wood (¬£6.8m) - Incredible value striker</li>
                                <li>Bryan Mbeumo (¬£6.2m) - Brentford's key player</li>
                                <li>Antonee Robinson (¬£4.8m) - Fulham attacking defender</li>
                                <li>Yoane Wissa (¬£6.1m) - Brentford's versatile forward</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <h2>üìä Key Statistics</h2>
                <div class="fantasy-section">
                    <div id="stats-loading" class="loading-message">
                        <p>Loading live FPL statistics...</p>
                    </div>
                    <div id="stats-grid" class="stats-grid" style="display: none;">
                        <div class="stat-card">
                            <h3>Top Scorers (FPL Points)</h3>
                            <ol id="top-scorers">
                                <!-- Top scorers will be populated by JavaScript -->
                            </ol>
                        </div>
                        
                        <div class="stat-card">
                            <h3>Best Value Players (Pts/¬£m)</h3>
                            <ol id="best-value">
                                <!-- Best value players will be populated by JavaScript -->
                            </ol>
                        </div>
                    </div>
                </div>

                <h2>üìÖ Upcoming Fixtures</h2>
                <div class="fantasy-section">
                    <div id="fixtures-loading" class="loading-message">
                        <p>Loading upcoming fixtures...</p>
                    </div>
                    <div id="fixtures-content" style="display: none;">
                        <div id="next-gameweek-fixtures" class="fixtures-grid">
                            <!-- Fixtures will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <h2>üìä Fixture Difficulty Analysis (GW1-6)</h2>
                <div class="fantasy-section">
                    <div class="fdr-overview">
                        <p><strong>Comprehensive FDR Analysis:</strong> Based on data from Premier League, Fantasy Football Fix, AllAboutFPL, and Statr Draft. Fixture Difficulty Rating (FDR) on 1-5 scale (1 easiest, 5 hardest). Rankings sorted from easiest to hardest overall schedule including xG projections, clean sheet probabilities, and FPL recommendations.</p>
                        
                        <div class="fdr-filters">
                            <button class="fdr-filter active" onclick="filterFDR('all')">All Teams</button>
                            <button class="fdr-filter" onclick="filterFDR('easy')">Easy (‚â§2.8)</button>
                            <button class="fdr-filter" onclick="filterFDR('medium')">Medium (2.9-3.1)</button>
                            <button class="fdr-filter" onclick="filterFDR('hard')">Hard (‚â•3.2)</button>
                        </div>
                    </div>
                    
                    <div class="fdr-table-container">
                        <table class="fdr-table" id="fdr-table">
                            <thead>
                                <tr>
                                    <th>Rank</th>
                                    <th>Team</th>
                                    <th>Avg FDR</th>
                                    <th>GW1-6 Fixtures</th>
                                    <th>Key FPL Picks</th>
                                    <th>Clean Sheet %</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr data-fdr="2.5" class="fdr-easy">
                                    <td class="rank">1</td>
                                    <td class="team-cell">
                                        <strong>Sunderland</strong>
                                        <span class="team-note">Promoted</span>
                                    </td>
                                    <td class="fdr-score fdr-easy-score">2.5</td>
                                    <td class="fixtures">
                                        <div class="fixture-list">
                                            <span class="fixture">West Ham (A)</span>
                                            <span class="fixture">Burnley (H)</span>
                                            <span class="fixture">Brentford (A)</span>
                                            <span class="fixture">Crystal Palace (H)</span>
                                            <span class="fixture">Aston Villa (A)</span>
                                            <span class="fixture">Nottm Forest (H)</span>
                                        </div>
                                    </td>
                                    <td class="fpl-picks">Adingra (¬£5.5m MID), Budget defenders</td>
                                    <td class="clean-sheet">20%</td>
                                </tr>
                                
                                <tr data-fdr="2.67" class="fdr-easy">
                                    <td class="rank">2</td>
                                    <td class="team-cell"><strong>Tottenham</strong></td>
                                    <td class="fdr-score fdr-easy-score">2.67</td>
                                    <td class="fixtures">
                                        <div class="fixture-list">
                                            <span class="fixture">Burnley (A)</span>
                                            <span class="fixture difficult">Man City (H)</span>
                                            <span class="fixture">Bournemouth (A)</span>
                                            <span class="fixture">West Ham (H)</span>
                                            <span class="fixture">Brighton (A)</span>
                                            <span class="fixture">Wolves (H)</span>
                                        </div>
                                    </td>
                                    <td class="fpl-picks">Kudus (¬£6.5m), Solanke (¬£7.5m), Porro (¬£5.5m)</td>
                                    <td class="clean-sheet">30%</td>
                                </tr>
                                
                                <tr data-fdr="2.7" class="fdr-easy">
                                    <td class="rank">3</td>
                                    <td class="team-cell"><strong>West Ham</strong></td>
                                    <td class="fdr-score fdr-easy-score">2.7</td>
                                    <td class="fixtures">
                                        <div class="fixture-list">
                                            <span class="fixture">Sunderland (H)</span>
                                            <span class="fixture difficult">Chelsea (A)</span>
                                            <span class="fixture">Nottm Forest (H)</span>
                                            <span class="fixture difficult">Tottenham (A)</span>
                                            <span class="fixture">Crystal Palace (H)</span>
                                            <span class="fixture">Everton (A)</span>
                                        </div>
                                    </td>
                                    <td class="fpl-picks">Bowen (¬£8.0m MID, 161 pts)</td>
                                    <td class="clean-sheet">35%</td>
                                </tr>
                                
                                <tr data-fdr="2.8" class="fdr-easy">
                                    <td class="rank">4</td>
                                    <td class="team-cell"><strong>Brighton</strong></td>
                                    <td class="fdr-score fdr-easy-score">2.8</td>
                                    <td class="fixtures">
                                        <div class="fixture-list">
                                            <span class="fixture">Fulham (A)</span>
                                            <span class="fixture">Everton (H)</span>
                                            <span class="fixture very-difficult">Man City (A)</span>
                                            <span class="fixture">Bournemouth (H)</span>
                                            <span class="fixture difficult">Tottenham (H)</span>
                                            <span class="fixture difficult">Chelsea (A)</span>
                                        </div>
                                    </td>
                                    <td class="fpl-picks">Joao Pedro (¬£7.5m FWD, 60% owned)</td>
                                    <td class="clean-sheet">30%</td>
                                </tr>
                                
                                <tr data-fdr="2.83" class="fdr-easy">
                                    <td class="rank">5</td>
                                    <td class="team-cell"><strong>Aston Villa</strong></td>
                                    <td class="fdr-score fdr-easy-score">2.83</td>
                                    <td class="fixtures">
                                        <div class="fixture-list">
                                            <span class="fixture difficult">Newcastle (A)</span>
                                            <span class="fixture">Brentford (H)</span>
                                            <span class="fixture">Crystal Palace (A)</span>
                                            <span class="fixture">Everton (H)</span>
                                            <span class="fixture">Sunderland (H)</span>
                                            <span class="fixture">Fulham (A)</span>
                                        </div>
                                    </td>
                                    <td class="fpl-picks">Rogers (¬£7.0m), Konsa (¬£4.5m), Watkins (¬£9.0m)</td>
                                    <td class="clean-sheet">40%</td>
                                </tr>
                                
                                <tr data-fdr="2.83" class="fdr-easy">
                                    <td class="rank">6</td>
                                    <td class="team-cell"><strong>Brentford</strong></td>
                                    <td class="fdr-score fdr-easy-score">2.83</td>
                                    <td class="fixtures">
                                        <div class="fixture-list">
                                            <span class="fixture">Nottm Forest (A)</span>
                                            <span class="fixture">Aston Villa (H)</span>
                                            <span class="fixture">Sunderland (H)</span>
                                            <span class="fixture difficult">Chelsea (A)</span>
                                            <span class="fixture">Fulham (H)</span>
                                            <span class="fixture difficult">Man United (A)</span>
                                        </div>
                                    </td>
                                    <td class="fpl-picks">Kelleher (¬£4.5m GK, 30%+ owned)</td>
                                    <td class="clean-sheet">32%</td>
                                </tr>
                                
                                <tr data-fdr="2.9" class="fdr-medium">
                                    <td class="rank">7</td>
                                    <td class="team-cell"><strong>Bournemouth</strong></td>
                                    <td class="fdr-score fdr-medium-score">2.9</td>
                                    <td class="fixtures">
                                        <div class="fixture-list">
                                            <span class="fixture very-difficult">Liverpool (A)</span>
                                            <span class="fixture">Wolves (H)</span>
                                            <span class="fixture difficult">Tottenham (H)</span>
                                            <span class="fixture">Brighton (A)</span>
                                            <span class="fixture difficult">Newcastle (A)</span>
                                            <span class="fixture">Leeds (H)</span>
                                        </div>
                                    </td>
                                    <td class="fpl-picks">Semenyo (¬£6.5m), Kluivert (¬£6.0m)</td>
                                    <td class="clean-sheet">25%</td>
                                </tr>
                                
                                <tr data-fdr="3.0" class="fdr-medium">
                                    <td class="rank">8</td>
                                    <td class="team-cell"><strong>Crystal Palace</strong></td>
                                    <td class="fdr-score fdr-medium-score">3.0</td>
                                    <td class="fixtures">
                                        <div class="fixture-list">
                                            <span class="fixture">Leeds (H)</span>
                                            <span class="fixture difficult">Man United (A)</span>
                                            <span class="fixture">Aston Villa (H)</span>
                                            <span class="fixture">Sunderland (A)</span>
                                            <span class="fixture difficult">West Ham (A)</span>
                                            <span class="fixture">Burnley (H)</span>
                                        </div>
                                    </td>
                                    <td class="fpl-picks">Budget defenders (¬£4.5m)</td>
                                    <td class="clean-sheet">25%</td>
                                </tr>
                                
                                <tr data-fdr="3.0" class="fdr-medium">
                                    <td class="rank">9</td>
                                    <td class="team-cell"><strong>Everton</strong></td>
                                    <td class="fdr-score fdr-medium-score">3.0</td>
                                    <td class="fixtures">
                                        <div class="fixture-list">
                                            <span class="fixture">Leeds (A)</span>
                                            <span class="fixture">Brighton (A)</span>
                                            <span class="fixture">Wolves (H)</span>
                                            <span class="fixture difficult">Aston Villa (A)</span>
                                            <span class="fixture difficult">Chelsea (H)</span>
                                            <span class="fixture">West Ham (H)</span>
                                        </div>
                                    </td>
                                    <td class="fpl-picks">Ndiaye (¬£6.5m), Pickford (¬£5.0m, 158 pts)</td>
                                    <td class="clean-sheet">28%</td>
                                </tr>
                                
                                <tr data-fdr="3.0" class="fdr-medium">
                                    <td class="rank">10</td>
                                    <td class="team-cell"><strong>Fulham</strong></td>
                                    <td class="fdr-score fdr-medium-score">3.0</td>
                                    <td class="fixtures">
                                        <div class="fixture-list">
                                            <span class="fixture">Brighton (H)</span>
                                            <span class="fixture difficult">Man United (A)</span>
                                            <span class="fixture">Leeds (H)</span>
                                            <span class="fixture">Brentford (A)</span>
                                            <span class="fixture difficult">Chelsea (H)</span>
                                            <span class="fixture">Aston Villa (H)</span>
                                        </div>
                                    </td>
                                    <td class="fpl-picks">Mid-price forwards</td>
                                    <td class="clean-sheet">30%</td>
                                </tr>
                                
                                <tr data-fdr="3.0" class="fdr-medium">
                                    <td class="rank">11</td>
                                    <td class="team-cell"><strong>Liverpool</strong></td>
                                    <td class="fdr-score fdr-medium-score">3.0</td>
                                    <td class="fixtures">
                                        <div class="fixture-list">
                                            <span class="fixture">Bournemouth (H)</span>
                                            <span class="fixture">Newcastle (H)</span>
                                            <span class="fixture very-difficult">Arsenal (A)</span>
                                            <span class="fixture">Burnley (H)</span>
                                            <span class="fixture difficult">Man United (A)</span>
                                            <span class="fixture">Brighton (H)</span>
                                        </div>
                                    </td>
                                    <td class="fpl-picks">Salah (¬£12.5m, 49%), Van Dijk (¬£6.0m)</td>
                                    <td class="clean-sheet">45%</td>
                                </tr>
                                
                                <tr data-fdr="3.1" class="fdr-medium">
                                    <td class="rank">12</td>
                                    <td class="team-cell"><strong>Manchester City</strong></td>
                                    <td class="fdr-score fdr-medium-score">3.1</td>
                                    <td class="fixtures">
                                        <div class="fixture-list">
                                            <span class="fixture">Wolves (H)</span>
                                            <span class="fixture difficult">Tottenham (A)</span>
                                            <span class="fixture">Brighton (H)</span>
                                            <span class="fixture difficult">Man United (A)</span>
                                            <span class="fixture very-difficult">Arsenal (A)</span>
                                            <span class="fixture">Burnley (H)</span>
                                        </div>
                                    </td>
                                    <td class="fpl-picks">Haaland (¬£15.0m FWD)</td>
                                    <td class="clean-sheet">50%</td>
                                </tr>
                                
                                <tr data-fdr="2.67" class="fdr-easy">
                                    <td class="rank">13</td>
                                    <td class="team-cell"><strong>Nottingham Forest</strong></td>
                                    <td class="fdr-score fdr-easy-score">2.67</td>
                                    <td class="fixtures">
                                        <div class="fixture-list">
                                            <span class="fixture">Brentford (H)</span>
                                            <span class="fixture">West Ham (A)</span>
                                            <span class="fixture">West Ham (A)</span>
                                            <span class="fixture very-difficult">Arsenal (H)</span>
                                            <span class="fixture">Burnley (A)</span>
                                            <span class="fixture">Sunderland (A)</span>
                                        </div>
                                    </td>
                                    <td class="fpl-picks">Sels (¬£5.0m), Wood (¬£7.5m, 200 pts), Murillo (¬£5.5m)</td>
                                    <td class="clean-sheet">40%</td>
                                </tr>
                                
                                <tr data-fdr="2.83" class="fdr-easy">
                                    <td class="rank">14</td>
                                    <td class="team-cell"><strong>Chelsea</strong></td>
                                    <td class="fdr-score fdr-easy-score">2.83</td>
                                    <td class="fixtures">
                                        <div class="fixture-list">
                                            <span class="fixture difficult">Man United (H)</span>
                                            <span class="fixture">West Ham (H)</span>
                                            <span class="fixture">Fulham (A)</span>
                                            <span class="fixture">Brentford (H)</span>
                                            <span class="fixture">Everton (A)</span>
                                            <span class="fixture">Brighton (H)</span>
                                        </div>
                                    </td>
                                    <td class="fpl-picks">Palmer (¬£10.5m, 49.3%, 214 pts), Cucurella (¬£6.0m)</td>
                                    <td class="clean-sheet">35%</td>
                                </tr>
                                
                                <tr data-fdr="3.2" class="fdr-hard">
                                    <td class="rank">15</td>
                                    <td class="team-cell">
                                        <strong>Leeds United</strong>
                                        <span class="team-note">Promoted</span>
                                    </td>
                                    <td class="fdr-score fdr-hard-score">3.2</td>
                                    <td class="fixtures">
                                        <div class="fixture-list">
                                            <span class="fixture">Everton (H)</span>
                                            <span class="fixture very-difficult">Arsenal (H)</span>
                                            <span class="fixture difficult">Newcastle (A)</span>
                                            <span class="fixture">Fulham (A)</span>
                                            <span class="fixture">Wolves (H)</span>
                                            <span class="fixture">Bournemouth (A)</span>
                                        </div>
                                    </td>
                                    <td class="fpl-picks">Budget options (¬£4.5m)</td>
                                    <td class="clean-sheet">22%</td>
                                </tr>
                                
                                <tr data-fdr="3.2" class="fdr-hard">
                                    <td class="rank">16</td>
                                    <td class="team-cell"><strong>Wolves</strong></td>
                                    <td class="fdr-score fdr-hard-score">3.2</td>
                                    <td class="fixtures">
                                        <div class="fixture-list">
                                            <span class="fixture very-difficult">Man City (A)</span>
                                            <span class="fixture">Bournemouth (A)</span>
                                            <span class="fixture">Everton (H)</span>
                                            <span class="fixture difficult">Newcastle (H)</span>
                                            <span class="fixture">Leeds (H)</span>
                                            <span class="fixture difficult">Tottenham (A)</span>
                                        </div>
                                    </td>
                                    <td class="fpl-picks">Udogie (¬£4.5m DEF)</td>
                                    <td class="clean-sheet">25%</td>
                                </tr>
                                
                                <tr data-fdr="3.3" class="fdr-hard">
                                    <td class="rank">17</td>
                                    <td class="team-cell"><strong>Newcastle</strong></td>
                                    <td class="fdr-score fdr-hard-score">3.3</td>
                                    <td class="fixtures">
                                        <div class="fixture-list">
                                            <span class="fixture">Aston Villa (H)</span>
                                            <span class="fixture very-difficult">Liverpool (A)</span>
                                            <span class="fixture">Leeds (H)</span>
                                            <span class="fixture">Wolves (H)</span>
                                            <span class="fixture">Bournemouth (H)</span>
                                            <span class="fixture very-difficult">Arsenal (H)</span>
                                        </div>
                                    </td>
                                    <td class="fpl-picks">Isak (¬£10.5m FWD)</td>
                                    <td class="clean-sheet">28%</td>
                                </tr>
                                
                                <tr data-fdr="3.3" class="fdr-hard">
                                    <td class="rank">18</td>
                                    <td class="team-cell">
                                        <strong>Burnley</strong>
                                        <span class="team-note">Promoted</span>
                                    </td>
                                    <td class="fdr-score fdr-hard-score">3.3</td>
                                    <td class="fixtures">
                                        <div class="fixture-list">
                                            <span class="fixture difficult">Tottenham (H)</span>
                                            <span class="fixture">Sunderland (A)</span>
                                            <span class="fixture difficult">Man United (H)</span>
                                            <span class="fixture very-difficult">Liverpool (H)</span>
                                            <span class="fixture">Nottm Forest (H)</span>
                                            <span class="fixture very-difficult">Man City (H)</span>
                                        </div>
                                    </td>
                                    <td class="fpl-picks">Budget enablers (¬£4.0m like Esteve)</td>
                                    <td class="clean-sheet">15%</td>
                                </tr>
                                
                                <tr data-fdr="3.3" class="fdr-hard">
                                    <td class="rank">19</td>
                                    <td class="team-cell"><strong>Manchester United</strong></td>
                                    <td class="fdr-score fdr-hard-score">3.3</td>
                                    <td class="fixtures">
                                        <div class="fixture-list">
                                            <span class="fixture very-difficult">Arsenal (A)</span>
                                            <span class="fixture">Fulham (H)</span>
                                            <span class="fixture">Burnley (A)</span>
                                            <span class="fixture very-difficult">Man City (H)</span>
                                            <span class="fixture very-difficult">Liverpool (H)</span>
                                            <span class="fixture">Brentford (H)</span>
                                        </div>
                                    </td>
                                    <td class="fpl-picks">None standout early</td>
                                    <td class="clean-sheet">20%</td>
                                </tr>
                                
                                <tr data-fdr="3.3" class="fdr-hard">
                                    <td class="rank">20</td>
                                    <td class="team-cell"><strong>Arsenal</strong></td>
                                    <td class="fdr-score fdr-hard-score">3.3</td>
                                    <td class="fixtures">
                                        <div class="fixture-list">
                                            <span class="fixture difficult">Man United (H)</span>
                                            <span class="fixture">Leeds (H)</span>
                                            <span class="fixture very-difficult">Liverpool (H)</span>
                                            <span class="fixture">Nottm Forest (H)</span>
                                            <span class="fixture very-difficult">Man City (A)</span>
                                            <span class="fixture difficult">Newcastle (H)</span>
                                        </div>
                                    </td>
                                    <td class="fpl-picks">Gyokeres (¬£9.0m), Saliba (¬£6.0m)</td>
                                    <td class="clean-sheet">40%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="fdr-key-stats">
                        <h3>üìä Key League Stats (GW1-6)</h3>
                        <div class="stats-summary">
                            <div class="stat-highlight">
                                <h4>üéØ Expected Goals Leaders</h4>
                                <p>Man City (12.3), Chelsea & Liverpool (~11), Forest & Fulham (~10). Bournemouth ranked 3rd for xG last season (73.61).</p>
                            </div>
                            
                            <div class="stat-highlight">
                                <h4>üõ°Ô∏è Clean Sheet Probabilities</h4>
                                <p>Highest: Liverpool/Arsenal (~45%), Forest/Villa (~40%). Lowest: Promoted sides (~20%). Defensive points boost for interceptions and tackles.</p>
                            </div>
                            
                            <div class="stat-highlight">
                                <h4>üìà FPL Strategy Tips</h4>
                                <p>Target Forest/Spurs for early transfers. Pair defenders like Konsa (¬£4.5m) and Esteve (¬£4.0m) for rotation. Premiums like Salah/Haaland shine in favorable runs.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <h2>üéØ Gameweek Strategy Tips</h2>
                <div class="fantasy-section">
                    <div class="strategy-tips">
                        <div class="tip-card">
                            <h3>1. Monitor Team News</h3>
                            <p>Always check for injuries and rotation risks before the deadline. Follow official club accounts and press conferences.</p>
                        </div>
                        
                        <div class="tip-card">
                            <h3>2. Consider Fixture Difficulty</h3>
                            <p>Look at upcoming fixtures when planning transfers. Target teams with good runs of games.</p>
                        </div>
                        
                        <div class="tip-card">
                            <h3>3. Balance Risk vs Reward</h3>
                            <p>Mix premium players with budget gems. Don't chase last week's points - plan ahead.</p>
                        </div>
                    </div>
                </div>

                <h2>üõ†Ô∏è Interactive FPL Tools</h2>
                <div class="fantasy-section">
                    <div class="tools-grid">
                        <div class="tool-card">
                            <div class="tool-icon">üîÑ</div>
                            <h4>Transfer Market Simulator</h4>
                            <p>Build your perfect squad with real player data and intelligent recommendations</p>
                            <a href="/transfer-simulator.html" class="tool-link">Launch Simulator</a>
                        </div>
                        
                        <div class="tool-card">
                            <div class="tool-icon">üìÖ</div>
                            <h4>Fixture Difficulty Calculator</h4>
                            <p>Analyze upcoming fixtures with advanced team performance metrics</p>
                            <a href="/fixture-difficulty-calculator.html" class="tool-link">Calculate Difficulty</a>
                        </div>
                        
                        <div class="tool-card">
                            <div class="tool-icon">üß†</div>
                            <h4>AI Budget Optimizer</h4>
                            <p>Optimize your squad with intelligent budget allocation strategies</p>
                            <a href="/budget-optimizer.html" class="tool-link">Optimize Budget</a>
                        </div>
                        
                        <div class="tool-card">
                            <div class="tool-icon">‚öîÔ∏è</div>
                            <h4>Team Analyzer</h4>
                            <p>Compare Premier League teams with detailed performance analysis</p>
                            <a href="/team-analyzer.html" class="tool-link">Analyze Teams</a>
                        </div>
                        
                        <div class="tool-card">
                            <div class="tool-icon">üîÆ</div>
                            <h4>Player Performance Predictor</h4>
                            <p>AI-powered predictions with form trends and future points forecasting</p>
                            <a href="/player-predictor.html" class="tool-link">Predict Performance</a>
                        </div>
                        
                        <div class="tool-card coming-soon">
                            <div class="tool-icon">üìä</div>
                            <h4>Advanced Analytics Dashboard</h4>
                            <p>Comprehensive FPL statistics and trend analysis (Coming Soon)</p>
                            <span class="tool-link disabled">Coming Soon</span>
                        </div>
                    </div>
                </div>

                <h2>üì± Quick Links</h2>
                <div class="fantasy-section">
                    <div class="quick-links">
                        <a href="https://fantasy.premierleague.com/" target="_blank" class="fantasy-link">Official FPL Site</a>
                        <a href="/stats.html" class="fantasy-link">Live EPL Stats</a>
                        <a href="/articles.html" class="fantasy-link">Latest EPL News</a>
                        <a href="/community.html" class="fantasy-link">Community Polls</a>
                    </div>
                </div>

                <div class="fantasy-disclaimer">
                    <p><strong>Disclaimer:</strong> Fantasy football advice is based on current form, fixtures, and statistical analysis. Player performances can vary, and all decisions should be made considering your team's unique situation. Good luck with your gameweek!</p>
                </div>

                <!-- Bottom Ad -->
                <div class="ad-bottom" include="./ad-components/bottom-ad.html"></div>
            </article>
        </div>
    </main>
    
    <div class="footer" include="./footer.html"></div>
    <script src="./index.js"></script>
    
    <!-- Premium Membership Gate -->
    <div id="premium-gate" class="premium-gate-overlay" style="display: none;">
        <div class="premium-gate-content">
            <div class="gate-header">
                <h2>üîí Premium Fantasy Content Ahead!</h2>
                <p>This Fantasy Premier League hub is exclusive to our Premium Starter members</p>
            </div>
            
            <div class="gate-benefits">
                <h3>Join Premium Starter for only <span class="price">$2.00/month</span></h3>
                <p class="benefits-intro">Get exclusive access to:</p>
                <ul class="benefits-list">
                    <li>‚úÖ <strong>5 exclusive articles per week</strong> - In-depth analysis you won't find anywhere else</li>
                    <li>‚úÖ <strong>Latest transfer rumors</strong> - Breaking news before it hits mainstream media</li>
                    <li>‚úÖ <strong>Weekly team and match analysis</strong> - Expert tactical breakdowns</li>
                    <li>‚úÖ <strong>Access to all articles</strong> - Full archive of premium content</li>
                    <li>‚úÖ <strong>FPL pro advice and suggested teams</strong> - Weekly fantasy lineups from experts</li>
                    <li>‚úÖ <strong>Ad-free browsing</strong> - Clean, uninterrupted reading experience</li>
                    <li>‚úÖ <strong>Premium Fantasy Football Hub</strong> - Advanced FPL strategies and insider tips</li>
                </ul>
            </div>
            
            <div class="gate-actions">
                <button class="join-premium-btn" onclick="joinPremiumStarter()">
                    Join Premium Starter - $2/month
                </button>
                <p class="gate-subtext">Cancel anytime ‚Ä¢ Instant access ‚Ä¢ 30-day money-back guarantee</p>
            </div>
            
            <div class="gate-footer">
                <p>Already a member? <a href="/signin.html" class="signin-link">Sign in here</a></p>
            </div>
        </div>
    </div>
    
    <style>
        .fantasy-section {
            margin: 30px 0;
            padding: 25px;
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            border-radius: 12px;
            border: 1px solid #e9ecef;
        }
        
        .captain-picks {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .player-card {
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid;
        }
        
        .player-card.premium {
            background: #fff3cd;
            border-left-color: #ffc107;
        }
        
        .player-card.budget {
            background: #d4edda;
            border-left-color: #28a745;
        }
        
        .player-card h3 {
            margin-top: 0;
            color: #333;
        }
        
        .transfer-list {
            margin: 15px 0;
        }
        
        .transfer-list.buy li {
            color: #28a745;
            font-weight: 500;
        }
        
        .transfer-list.sell li {
            color: #dc3545;
            font-weight: 500;
        }
        
        .picks-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 20px;
        }
        
        .premium-column, .budget-column {
            padding: 20px;
            background: white;
            border-radius: 8px;
            border: 1px solid #e2e2e2;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .stat-card {
            padding: 20px;
            background: white;
            border-radius: 8px;
            border: 1px solid #e2e2e2;
        }
        
        .stat-card h3 {
            margin-top: 0;
            color: #0066cc;
        }
        
        .stat-card ol {
            margin: 15px 0;
            padding-left: 20px;
        }
        
        .strategy-tips {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .tip-card {
            padding: 20px;
            background: white;
            border-radius: 8px;
            border: 1px solid #e2e2e2;
            border-top: 3px solid #0066cc;
        }
        
        .tip-card h3 {
            margin-top: 0;
            color: #0066cc;
        }
        
        .quick-links {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }
        
        .fantasy-link {
            padding: 12px 20px;
            background: #0066cc;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: background-color 0.2s ease;
        }
        
        .fantasy-link:hover {
            background: #0052a3;
        }
        
        .fantasy-disclaimer {
            margin-top: 40px;
            padding: 20px;
            background: #fff3cd;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
        }
        
        .fantasy-disclaimer p {
            margin: 0;
            font-size: 0.9rem;
            color: #856404;
        }
        
        @media (max-width: 768px) {
            .fantasy-section {
                padding: 20px 15px;
                margin: 20px 0;
            }
            
            .captain-picks {
                grid-template-columns: 1fr;
            }
            
            .picks-comparison {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .strategy-tips {
                grid-template-columns: 1fr;
            }
            
            .quick-links {
                flex-direction: column;
            }
        }
        
        /* Premium Gate Styles */
        .premium-gate-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            box-sizing: border-box;
        }
        
        .premium-gate-content {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            border: 3px solid #37003c;
            text-align: center;
            animation: gateSlideIn 0.5s ease-out;
        }
        
        @keyframes gateSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .gate-header h2 {
            color: #37003c;
            font-size: 2.2rem;
            margin-bottom: 15px;
            font-weight: 800;
        }
        
        .gate-header p {
            color: #666;
            font-size: 1.2rem;
            margin-bottom: 30px;
        }
        
        .gate-benefits h3 {
            color: #37003c;
            font-size: 1.6rem;
            margin-bottom: 20px;
            font-weight: 700;
        }
        
        .price {
            color: #28a745;
            font-weight: 800;
            font-size: 1.8rem;
        }
        
        .benefits-intro {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 20px;
        }
        
        .benefits-list {
            text-align: left;
            list-style: none;
            padding: 0;
            margin: 20px 0;
        }
        
        .benefits-list li {
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
            font-size: 1rem;
            line-height: 1.6;
            color: #333;
        }
        
        .benefits-list li:last-child {
            border-bottom: none;
        }
        
        .join-premium-btn {
            background: linear-gradient(135deg, #37003c, #6f42c1);
            color: white;
            border: none;
            padding: 18px 36px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            box-shadow: 0 8px 25px rgba(55, 0, 60, 0.3);
        }
        
        .join-premium-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(55, 0, 60, 0.4);
        }
        
        .gate-subtext {
            font-size: 0.9rem;
            color: #666;
            margin-top: 15px;
        }
        
        .gate-footer {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }
        
        .signin-link {
            color: #37003c;
            text-decoration: none;
            font-weight: 600;
        }
        
        .signin-link:hover {
            text-decoration: underline;
        }
        
        /* Hide main content when gate is active */
        .content-blocked {
            filter: blur(5px);
            pointer-events: none;
            user-select: none;
        }
        
        /* Mobile responsiveness for gate */
        @media (max-width: 768px) {
            .premium-gate-content {
                padding: 30px 20px;
                margin: 10px;
            }
            
            .gate-header h2 {
                font-size: 1.8rem;
            }
            
            .join-premium-btn {
                padding: 16px 28px;
                font-size: 1.1rem;
            }
        }

        /* Loading animation styles */
        .loading-message {
            text-align: center;
            padding: 40px 20px;
            color: #666;
            font-style: italic;
        }

        .loading-message::after {
            content: "";
            display: inline-block;
            width: 20px;
            height: 20px;
            margin-left: 10px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #0066cc;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            background: #ffe6e6;
            color: #cc0000;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid #cc0000;
        }

        .fixtures-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .fixture-card {
            background: white;
            border: 1px solid #e2e2e2;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }

        .fixture-teams {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: #333;
        }

        .fixture-time {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .fixture-difficulty {
            font-size: 0.8rem;
            padding: 2px 8px;
            border-radius: 12px;
            display: inline-block;
            margin-top: 5px;
        }

        .difficulty-1, .difficulty-2 {
            background: #d4edda;
            color: #155724;
        }

        .difficulty-3 {
            background: #fff3cd;
            color: #856404;
        }

        .difficulty-4, .difficulty-5 {
            background: #f8d7da;
            color: #721c24;
        }

        /* Interactive Tools Styles */
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .tool-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .tool-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            border-color: #37003c;
        }

        .tool-card.coming-soon {
            opacity: 0.7;
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
        }

        .tool-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            display: block;
        }

        .tool-card h4 {
            color: #37003c;
            margin-bottom: 12px;
            font-size: 1.2rem;
            font-weight: 700;
        }

        .tool-card p {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 20px;
        }

        .tool-link {
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(135deg, #37003c, #6f42c1);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .tool-link:hover {
            background: linear-gradient(135deg, #4a0e4e, #8056d3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(55, 0, 60, 0.3);
        }

        .tool-link.disabled {
            background: #6c757d;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .tool-link.disabled:hover {
            transform: none;
            box-shadow: none;
        }

        @media (max-width: 768px) {
            .tools-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .tool-card {
                padding: 20px;
            }
            
            .tool-icon {
                font-size: 2.5rem;
                margin-bottom: 10px;
            }
        }

        /* Fixture Difficulty Rating Styles */
        .fdr-overview {
            margin-bottom: 25px;
        }

        .fdr-overview p {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #37003c;
            margin-bottom: 20px;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .fdr-filters {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .fdr-filter {
            padding: 8px 16px;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            color: #666;
            transition: all 0.3s ease;
        }

        .fdr-filter:hover {
            background: #e9ecef;
            border-color: #37003c;
        }

        .fdr-filter.active {
            background: #37003c;
            color: white;
            border-color: #37003c;
        }

        .fdr-table-container {
            overflow-x: auto;
            margin-bottom: 30px;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }

        .fdr-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px;
            background: white;
        }

        .fdr-table th {
            background: #37003c;
            color: white;
            padding: 12px 8px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .fdr-table td {
            padding: 10px 8px;
            border-bottom: 1px solid #f0f0f0;
            font-size: 0.85rem;
            vertical-align: top;
        }

        .fdr-table tr:hover {
            background: #f8f9fa;
        }

        .rank {
            font-weight: 700;
            color: #37003c;
            text-align: center;
            width: 50px;
        }

        .team-cell {
            min-width: 120px;
        }

        .team-cell strong {
            color: #333;
            font-weight: 700;
            display: block;
            margin-bottom: 3px;
        }

        .team-note {
            background: #ffc107;
            color: #333;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .fdr-score {
            font-weight: 800;
            font-size: 1rem;
            text-align: center;
            padding: 5px;
            border-radius: 6px;
            color: white;
            min-width: 50px;
        }

        .fdr-easy-score {
            background: #28a745;
        }

        .fdr-medium-score {
            background: #ffc107;
            color: #333;
        }

        .fdr-hard-score {
            background: #dc3545;
        }

        .fixtures {
            max-width: 250px;
        }

        .fixture-list {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
        }

        .fixture {
            background: #e8f5e8;
            color: #155724;
            padding: 3px 6px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .fixture.difficult {
            background: #fff3cd;
            color: #856404;
        }

        .fixture.very-difficult {
            background: #f8d7da;
            color: #721c24;
        }

        .fpl-picks {
            max-width: 180px;
            font-size: 0.8rem;
            color: #333;
            line-height: 1.4;
        }

        .clean-sheet {
            text-align: center;
            font-weight: 600;
            color: #37003c;
        }

        .fdr-key-stats {
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            padding: 25px;
            border-radius: 12px;
            border: 1px solid #e9ecef;
        }

        .fdr-key-stats h3 {
            color: #37003c;
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.3rem;
        }

        .stats-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .stat-highlight {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #e9ecef;
            border-left: 4px solid #37003c;
        }

        .stat-highlight h4 {
            color: #37003c;
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .stat-highlight p {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.5;
            margin: 0;
        }

        /* Mobile responsiveness for FDR table */
        @media (max-width: 768px) {
            .fdr-filters {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .fdr-filter {
                font-size: 0.8rem;
                padding: 6px 12px;
            }
            
            .fdr-table {
                font-size: 0.75rem;
                min-width: 600px;
            }
            
            .fdr-table th,
            .fdr-table td {
                padding: 6px 4px;
            }
            
            .fixture {
                font-size: 0.7rem;
                padding: 2px 4px;
            }
            
            .stats-summary {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .stat-highlight {
                padding: 15px;
            }
        }
    </style>

    <script>
        // FPL Data Integration
        let fplService;

        async function initializeFPLData() {
            try {
                fplService = new FPLDataService();
                await Promise.all([
                    loadCaptainPicks(),
                    loadTransferRecommendations(),
                    loadStatistics(),
                    loadFixtures()
                ]);
            } catch (error) {
                console.error('Failed to initialize FPL data:', error);
                showErrorMessages();
            }
        }

        async function loadCaptainPicks() {
            try {
                const captains = await fplService.getCaptainCandidates(2);
                const captainPicksContainer = document.getElementById('captain-picks');
                const loadingElement = document.getElementById('captain-picks-loading');
                
                if (captains.length >= 2) {
                    const premium = captains[0];
                    const budget = captains[1];
                    
                    captainPicksContainer.innerHTML = `
                        <div class="player-card premium">
                            <h3>Premium Pick: ${fplService.formatPlayerName(premium.first_name, premium.second_name)} (C)</h3>
                            <p><strong>Team:</strong> ${premium.team_name} | <strong>Price:</strong> ${fplService.formatPrice(premium.now_cost)}</p>
                            <p><strong>Fixture:</strong> vs ${premium.fixture.opponent} ${premium.fixture.is_home ? '(H)' : '(A)}</p>
                            <p><strong>Form:</strong> ${premium.form} | <strong>Total Points:</strong> ${premium.total_points}</p>
                            <p>Strong form player with favorable upcoming fixture. Current form: ${premium.form}/10 points per game.</p>
                        </div>
                        
                        <div class="player-card budget">
                            <h3>Budget Pick: ${fplService.formatPlayerName(budget.first_name, budget.second_name)} (C)</h3>
                            <p><strong>Team:</strong> ${budget.team_name} | <strong>Price:</strong> ${fplService.formatPrice(budget.now_cost)}</p>
                            <p><strong>Fixture:</strong> vs ${budget.fixture.opponent} ${budget.fixture.is_home ? '(H)' : '(A)}</p>
                            <p><strong>Form:</strong> ${budget.form} | <strong>Total Points:</strong> ${budget.total_points}</p>
                            <p>Excellent value pick with good fixture difficulty. Great differential captain option.</p>
                        </div>
                    `;
                } else {
                    captainPicksContainer.innerHTML = `
                        <div class="player-card premium">
                            <h3>Captain recommendations will be updated before the next gameweek</h3>
                            <p>Check back closer to the deadline for live captain picks based on current form and fixtures.</p>
                        </div>
                    `;
                }
                
                loadingElement.style.display = 'none';
                captainPicksContainer.style.display = 'grid';
            } catch (error) {
                console.error('Error loading captain picks:', error);
                document.getElementById('captain-picks-loading').innerHTML = '<div class="error-message">Unable to load captain picks. Please try again later.</div>';
            }
        }

        async function loadTransferRecommendations() {
            try {
                const transfers = await fplService.getTransferTargets();
                const transfersContent = document.getElementById('transfers-content');
                const transfersLoading = document.getElementById('transfers-loading');
                const transfersIn = document.getElementById('transfers-in');
                const transfersOut = document.getElementById('transfers-out');
                
                transfersIn.innerHTML = transfers.transfersIn.map(player => {
                    const teams = fplService.cache.get('bootstrap')?.data?.teams || [];
                    const teamName = fplService.getTeamName(player.team, teams);
                    const position = fplService.getPositionName(player.element_type);
                    return `<li><strong>${fplService.formatPlayerName(player.first_name, player.second_name)} (${fplService.formatPrice(player.now_cost)})</strong> - ${teamName} ${position}, Form: ${player.form}, Points: ${player.total_points}</li>`;
                }).join('');
                
                transfersOut.innerHTML = transfers.transfersOut.map(player => {
                    const teams = fplService.cache.get('bootstrap')?.data?.teams || [];
                    const teamName = fplService.getTeamName(player.team, teams);
                    const position = fplService.getPositionName(player.element_type);
                    return `<li><strong>${fplService.formatPlayerName(player.first_name, player.second_name)} (${fplService.formatPrice(player.now_cost)})</strong> - ${teamName} ${position}, Form: ${player.form}, Difficult fixtures</li>`;
                }).join('');
                
                transfersLoading.style.display = 'none';
                transfersContent.style.display = 'block';
            } catch (error) {
                console.error('Error loading transfers:', error);
                document.getElementById('transfers-loading').innerHTML = '<div class="error-message">Unable to load transfer recommendations. Please try again later.</div>';
            }
        }

        async function loadStatistics() {
            try {
                const [topPlayers, bestValue] = await Promise.all([
                    fplService.getTopPlayers(5),
                    fplService.getBestValuePlayers(5)
                ]);
                
                const topScorersElement = document.getElementById('top-scorers');
                const bestValueElement = document.getElementById('best-value');
                const statsLoading = document.getElementById('stats-loading');
                const statsGrid = document.getElementById('stats-grid');
                
                topScorersElement.innerHTML = topPlayers.map(player => 
                    `<li>${fplService.formatPlayerName(player.first_name, player.second_name)} - ${player.total_points} pts</li>`
                ).join('');
                
                bestValueElement.innerHTML = bestValue.map(player => 
                    `<li>${fplService.formatPlayerName(player.first_name, player.second_name)} - ${player.value_ratio.toFixed(1)} pts/¬£m</li>`
                ).join('');
                
                statsLoading.style.display = 'none';
                statsGrid.style.display = 'grid';
            } catch (error) {
                console.error('Error loading statistics:', error);
                document.getElementById('stats-loading').innerHTML = '<div class="error-message">Unable to load statistics. Please try again later.</div>';
            }
        }

        async function loadFixtures() {
            try {
                const [bootstrap, fixtures] = await Promise.all([
                    fplService.getBootstrapData(),
                    fplService.getUpcomingFixtures()
                ]);
                
                const currentGW = await fplService.getCurrentGameweek();
                if (!currentGW) return;
                
                const nextFixtures = fixtures
                    .filter(f => f.event === currentGW.id)
                    .slice(0, 10)
                    .map(fixture => {
                        const homeTeam = bootstrap.teams.find(t => t.id === fixture.team_h);
                        const awayTeam = bootstrap.teams.find(t => t.id === fixture.team_a);
                        return {
                            ...fixture,
                            home_team: homeTeam?.name || 'TBD',
                            away_team: awayTeam?.name || 'TBD',
                            home_short: homeTeam?.short_name || 'TBD',
                            away_short: awayTeam?.short_name || 'TBD'
                        };
                    });
                
                const fixturesContainer = document.getElementById('next-gameweek-fixtures');
                const fixturesLoading = document.getElementById('fixtures-loading');
                const fixturesContent = document.getElementById('fixtures-content');
                
                if (nextFixtures.length > 0) {
                    fixturesContainer.innerHTML = nextFixtures.map(fixture => {
                        const kickoffTime = fixture.kickoff_time ? 
                            new Date(fixture.kickoff_time).toLocaleDateString('en-GB', {
                                weekday: 'short',
                                month: 'short',
                                day: 'numeric',
                                hour: '2-digit',
                                minute: '2-digit'
                            }) : 'TBD';
                        
                        return `
                            <div class="fixture-card">
                                <div class="fixture-teams">${fixture.home_short} vs ${fixture.away_short}</div>
                                <div class="fixture-time">${kickoffTime}</div>
                                <div class="fixture-difficulty difficulty-${fixture.team_h_difficulty}">
                                    ${fixture.home_team} Difficulty: ${fixture.team_h_difficulty}/5
                                </div>
                                <div class="fixture-difficulty difficulty-${fixture.team_a_difficulty}">
                                    ${fixture.away_team} Difficulty: ${fixture.team_a_difficulty}/5
                                </div>
                            </div>
                        `;
                    }).join('');
                } else {
                    fixturesContainer.innerHTML = '<div class="fixture-card"><div class="fixture-teams">Fixtures will be available closer to the next gameweek</div></div>';
                }
                
                fixturesLoading.style.display = 'none';
                fixturesContent.style.display = 'block';
            } catch (error) {
                console.error('Error loading fixtures:', error);
                document.getElementById('fixtures-loading').innerHTML = '<div class="error-message">Unable to load fixtures. Please try again later.</div>';
            }
        }

        function showErrorMessages() {
            const errorHtml = '<div class="error-message">Unable to load live FPL data. Please check your internet connection and try again.</div>';
            document.getElementById('captain-picks-loading').innerHTML = errorHtml;
            document.getElementById('transfers-loading').innerHTML = errorHtml;
            document.getElementById('stats-loading').innerHTML = errorHtml;
            document.getElementById('fixtures-loading').innerHTML = errorHtml;
        }

        // Initialize FPL data when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Delay initialization to allow premium gate to load first
            setTimeout(initializeFPLData, 1000);
        });

        // Premium membership gate functionality
        let userAuthenticated = false;
        let userHasPremium = false;
        
        // Check authentication and membership status
        let checkAttempts = 0;
        const maxAttempts = 5;
        
        function checkPremiumAccess() {
            checkAttempts++;
            console.log('Checking premium access, attempt:', checkAttempts);
            
            if (window.onAuthStateChanged && window.auth) {
                console.log('Firebase loaded, checking auth state');
                window.onAuthStateChanged(window.auth, (user) => {
                    if (user) {
                        console.log('User authenticated:', user.email);
                        userAuthenticated = true;
                        // Check for premium membership status
                        checkMembershipStatus(user);
                    } else {
                        console.log('User not authenticated, showing gate');
                        // User not signed in - show gate
                        showPremiumGate();
                    }
                });
            } else if (checkAttempts < maxAttempts) {
                console.log('Firebase not loaded yet, retrying...');
                // Firebase not loaded yet - retry
                setTimeout(checkPremiumAccess, 1000);
            } else {
                console.log('Firebase failed to load, showing gate as fallback');
                // Firebase failed to load after max attempts - show gate as fallback
                showPremiumGate();
            }
        }
        
        function checkMembershipStatus(user) {
            console.log('Checking membership status for:', user.email);
            
            // Special admin accounts with Pro membership
            if (user.email === 'reidwcoleman@gmail.com' || user.email === 'brianpcoleman@gmail.com') {
                console.log('Admin account detected, granting Pro access');
                // Grant Pro membership access to admin accounts
                const adminMembership = {
                    plan: 'pro',
                    status: 'active',
                    startDate: new Date().toISOString(),
                    nextBilling: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString() // 30 days from now
                };
                localStorage.setItem('membership', JSON.stringify(adminMembership));
                userHasPremium = true;
                hidePremiumGate();
                return;
            }
            
            // Check localStorage for membership info
            const membershipInfo = localStorage.getItem('membership');
            console.log('Membership info from localStorage:', membershipInfo);
            
            if (membershipInfo) {
                const membership = JSON.parse(membershipInfo);
                console.log('Parsed membership:', membership);
                // Check if user has starter or pro membership
                if (membership.plan === 'starter' || membership.plan === 'pro' || 
                    membership.plan === 'starter-annual' || membership.plan === 'pro-annual') {
                    console.log('Valid membership found, hiding gate');
                    userHasPremium = true;
                    hidePremiumGate();
                } else {
                    console.log('Invalid membership plan, showing gate');
                    showPremiumGate();
                }
            } else {
                console.log('No membership found, showing gate');
                // No membership found - show gate
                showPremiumGate();
            }
        }
        
        function showPremiumGate() {
            console.log('Showing premium gate');
            const gate = document.getElementById('premium-gate');
            const mainContent = document.querySelector('main');
            
            if (gate) {
                gate.style.display = 'flex';
                console.log('Gate display set to flex');
            } else {
                console.error('Premium gate element not found');
            }
            
            if (mainContent) {
                mainContent.classList.add('content-blocked');
            }
            
            // Prevent scrolling on background
            document.body.style.overflow = 'hidden';
            
            // Disable right-click and keyboard shortcuts
            document.addEventListener('contextmenu', preventDefaultAction);
            document.addEventListener('keydown', preventKeyboardShortcuts);
        }
        
        function hidePremiumGate() {
            console.log('Hiding premium gate');
            const gate = document.getElementById('premium-gate');
            const mainContent = document.querySelector('main');
            
            if (gate) {
                gate.style.display = 'none';
                console.log('Gate display set to none');
            }
            
            if (mainContent) {
                mainContent.classList.remove('content-blocked');
            }
            
            // Re-enable scrolling
            document.body.style.overflow = 'auto';
            
            // Re-enable right-click and keyboard shortcuts
            document.removeEventListener('contextmenu', preventDefaultAction);
            document.removeEventListener('keydown', preventKeyboardShortcuts);
        }
        
        function preventDefaultAction(e) {
            e.preventDefault();
            return false;
        }
        
        function preventKeyboardShortcuts(e) {
            // Prevent common shortcuts like F12, Ctrl+U, Ctrl+Shift+I, etc.
            if (e.key === 'F12' || 
                (e.ctrlKey && e.key === 'u') ||
                (e.ctrlKey && e.shiftKey && e.key === 'I') ||
                (e.ctrlKey && e.shiftKey && e.key === 'C') ||
                (e.ctrlKey && e.key === 's')) {
                e.preventDefault();
                return false;
            }
        }
        
        function joinPremiumStarter() {
            // Redirect to membership page with starter plan pre-selected
            window.location.href = '/membership.html#starter';
        }
        
        // Prevent gate dismissal attempts
        document.addEventListener('click', function(e) {
            const gate = document.getElementById('premium-gate');
            const gateContent = document.querySelector('.premium-gate-content');
            
            if (gate.style.display === 'flex' && 
                !gateContent.contains(e.target) && 
                !userHasPremium) {
                e.preventDefault();
                e.stopPropagation();
                return false;
            }
        });
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Show gate by default, then hide it only if user has access
            showPremiumGate();
            checkPremiumAccess();
        });
        
        // Prevent closing gate with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && !userHasPremium) {
                e.preventDefault();
                return false;
            }
        });

        // Fixture Difficulty Rating Filter Functions
        function filterFDR(category) {
            // Remove active class from all filters
            document.querySelectorAll('.fdr-filter').forEach(filter => {
                filter.classList.remove('active');
            });
            
            // Add active class to clicked filter
            event.target.classList.add('active');
            
            // Get all table rows (excluding header)
            const rows = document.querySelectorAll('.fdr-table tbody tr');
            
            rows.forEach(row => {
                const fdrValue = parseFloat(row.dataset.fdr);
                let shouldShow = false;
                
                switch(category) {
                    case 'all':
                        shouldShow = true;
                        break;
                    case 'easy':
                        shouldShow = fdrValue <= 2.8;
                        break;
                    case 'medium':
                        shouldShow = fdrValue >= 2.9 && fdrValue <= 3.1;
                        break;
                    case 'hard':
                        shouldShow = fdrValue >= 3.2;
                        break;
                }
                
                row.style.display = shouldShow ? '' : 'none';
            });
        }
    </script>
</body>
</html>